import{d as ht,a as M,b as x,s as c,f as u}from"../chunks/5jrULABA.js";import{S as xt,T as E,U as ut,V as ft,$ as Z,Y as d,W as b,X as yt,d as t,_ as s,Z as l,a0 as r,a3 as bt,a5 as kt}from"../chunks/Bu7XKhG-.js";import{i as P}from"../chunks/64S6HLbC.js";import{e as q,i as z}from"../chunks/D91HFo5I.js";import{t as F,f as G}from"../chunks/BufHwZ1v.js";import{s as H,t as gt,a as J}from"../chunks/tnJ21aC2.js";import{s as wt}from"../chunks/DvixMhaI.js";import{b as jt}from"../chunks/BHAKTja7.js";import{s as $t,a as Dt}from"../chunks/Cvp8QKtV.js";import{g as Mt}from"../chunks/BAFRKenw.js";import{a as Et,b as Pt}from"../chunks/BeKFXwpI.js";import{a as K}from"../chunks/BXvIZ4AA.js";var St=u('<button class="add-btn svelte-4vhtx9"> </button>'),Ut=u('<button><span class="mood-emoji svelte-4vhtx9"> </span> <span class="mood-label svelte-4vhtx9"> </span></button>'),At=u('<textarea rows="4" class="svelte-4vhtx9"></textarea> <button class="save-btn svelte-4vhtx9"> </button>',1),It=u('<div class="new-entry svelte-4vhtx9"><h2 class="svelte-4vhtx9"> </h2> <div class="mood-grid svelte-4vhtx9"></div> <!></div>'),Ot=u('<p class="entry-text svelte-4vhtx9"> </p>'),Tt=u('<div class="entry-card svelte-4vhtx9"><div class="entry-header svelte-4vhtx9"><span class="entry-emoji svelte-4vhtx9"> </span> <span class="entry-mood svelte-4vhtx9"> </span> <span class="entry-date svelte-4vhtx9"> </span> <button class="del-btn svelte-4vhtx9">âœ•</button></div> <!></div>'),Bt=u('<p class="empty svelte-4vhtx9"> </p>'),Ct=u('<div class="entry-list svelte-4vhtx9"><!> <!></div>'),Lt=u('<div class="diary-page svelte-4vhtx9"><header class="app-header svelte-4vhtx9"><button class="back-btn svelte-4vhtx9"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M15 18l-6-6 6-6"></path></svg></button> <h1 class="svelte-4vhtx9"> </h1> <!></header> <!> <footer class="credit svelte-4vhtx9"> </footer></div>');function Nt(N,Q){xt(Q,!0);const p=()=>Dt(gt,"$t",R),[R,tt]=$t(),et=[{emoji:"ðŸ˜Š",key:"diary.mood.happy"},{emoji:"ðŸ˜",key:"diary.mood.okay"},{emoji:"ðŸ˜¢",key:"diary.mood.sad"},{emoji:"ðŸ˜¡",key:"diary.mood.angry"},{emoji:"ðŸ˜°",key:"diary.mood.worried"},{emoji:"ðŸ˜´",key:"diary.mood.tired"},{emoji:"ðŸ¤©",key:"diary.mood.excited"},{emoji:"ðŸ¤’",key:"diary.mood.sick"}];let m=E(ut([])),w=E("list"),j=E(""),S=E(""),U=E("");ft(()=>{at()});async function at(){const e=Z(K);if(e){const a=await Et(e,"diary");a?.entries&&d(m,a.entries,!0)}}async function W(){const e=Z(K);e&&await Pt(e,"diary",{entries:t(m)})}function rt(e){d(j,p()(e.key),!0),d(S,e.emoji,!0),J(t(j))}function st(){if(!t(j))return;const e={id:crypto.randomUUID(),date:new Date().toLocaleDateString(),mood:t(j),text:t(U),emoji:t(S)};d(m,[e,...t(m)],!0),t(m).length>100&&d(m,t(m).slice(0,100),!0),W(),J(p()("diary.saved")),d(j,""),d(S,""),d(U,""),d(w,"list")}function ot(e){d(m,t(m).filter(a=>a.id!==e),!0),W()}var A=Lt(),I=s(A),O=s(I),T=l(O,2),it=s(T,!0);r(T);var vt=l(T,2);{var dt=e=>{var a=St(),_=s(a);r(a),b($=>c(_,`+ ${$??""}`),[()=>p()("diary.new")]),M("click",a,()=>d(w,"new")),x(e,a)};P(vt,e=>{t(w)==="list"&&e(dt)})}r(I);var X=l(I,2);{var lt=e=>{var a=It(),_=s(a),$=s(_,!0);r(_);var D=l(_,2);q(D,21,()=>et,z,(i,v)=>{var o=Ut();let f;var h=s(o),g=s(h,!0);r(h);var y=l(h,2),B=s(y,!0);r(y),r(o),b(C=>{f=wt(o,1,"mood-btn svelte-4vhtx9",null,f,{active:t(S)===t(v).emoji}),c(g,t(v).emoji),c(B,C)},[()=>p()(t(v).key)]),M("click",o,()=>rt(t(v))),x(i,o)}),r(D);var k=l(D,2);{var n=i=>{var v=At(),o=bt(v);kt(o);var f=l(o,2),h=s(f);r(f),b((g,y)=>{H(o,"placeholder",g),c(h,`ðŸ’¾ ${y??""}`)},[()=>p()("diary.what_happened"),()=>p()("diary.save")]),jt(o,()=>t(U),g=>d(U,g)),M("click",f,st),x(i,v)};P(k,i=>{t(j)&&i(n)})}r(a),b(i=>c($,i),[()=>p()("diary.how_today")]),F(3,a,()=>G),x(e,a)},nt=e=>{var a=Ct(),_=s(a);q(_,17,()=>t(m),z,(k,n)=>{var i=Tt(),v=s(i),o=s(v),f=s(o,!0);r(o);var h=l(o,2),g=s(h,!0);r(h);var y=l(h,2),B=s(y,!0);r(y);var C=l(y,2);r(v);var pt=l(v,2);{var mt=L=>{var V=Ot(),_t=s(V,!0);r(V),b(()=>c(_t,t(n).text)),x(L,V)};P(pt,L=>{t(n).text&&L(mt)})}r(i),b(()=>{c(f,t(n).emoji),c(g,t(n).mood),c(B,t(n).date)}),M("click",C,()=>ot(t(n).id)),x(k,i)});var $=l(_,2);{var D=k=>{var n=Bt(),i=s(n,!0);r(n),b(v=>c(i,v),[()=>p()("diary.empty")]),x(k,n)};P($,k=>{t(m).length===0&&k(D)})}r(a),F(3,a,()=>G),x(e,a)};P(X,e=>{t(w)==="new"?e(lt):e(nt,!1)})}var Y=l(X,2),ct=s(Y,!0);r(Y),r(A),b((e,a,_)=>{H(O,"aria-label",e),c(it,a),c(ct,_)},[()=>p()("app.back"),()=>p()("diary.title"),()=>p()("diary.credit")]),M("click",O,()=>t(w)==="list"?Mt("/"):d(w,"list")),x(N,A),yt(),tt()}ht(["click"]);export{Nt as component};
