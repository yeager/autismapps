import{d as We,a as M,b as z,s as i,f as g,e as Xe}from"../chunks/5jrULABA.js";import{S as Ge,T as $,U as de,V as He,$ as he,Y as u,W as y,X as Ke,d as e,_ as o,Z as n,a0 as t,a2 as et,a4 as tt,a3 as ot,a1 as ze}from"../chunks/Bu7XKhG-.js";import{i as F}from"../chunks/64S6HLbC.js";import{e as I,i as J}from"../chunks/D91HFo5I.js";import{t as ce,f as ge,a as at}from"../chunks/BufHwZ1v.js";import{s as fe,t as st,a as V,r as rt}from"../chunks/tnJ21aC2.js";import{s as ye}from"../chunks/DvixMhaI.js";import{s as oe}from"../chunks/jfaHFQEH.js";import{b as it}from"../chunks/BHAKTja7.js";import{s as nt,a as lt}from"../chunks/Cvp8QKtV.js";import{g as vt}from"../chunks/BAFRKenw.js";import{a as dt,b as ct}from"../chunks/BeKFXwpI.js";import{a as we}from"../chunks/BXvIZ4AA.js";var mt=g("<button> </button>"),bt=g('<p class="quiz-feedback svelte-z58b2e"> </p>'),ut=g('<button class="calm-btn svelte-z58b2e" style="margin-top: 16px"> </button>'),_t=g('<div class="quiz-emoji svelte-z58b2e"> </div> <p class="quiz-prompt svelte-z58b2e"> </p> <div class="quiz-choices svelte-z58b2e"></div> <!> <!>',1),pt=g('<div class="quiz-area svelte-z58b2e"><div class="quiz-score svelte-z58b2e"> </div> <!></div>'),ht=g('<p class="diary-note svelte-z58b2e"> </p>'),zt=g('<div class="diary-entry svelte-z58b2e"><span class="diary-emoji svelte-z58b2e"> </span> <div><strong> </strong> <span class="diary-time svelte-z58b2e"> </span> <!></div></div>'),gt=g('<p class="empty svelte-z58b2e"> </p>'),ft=g('<div class="export-btns svelte-z58b2e"><button class="export-btn svelte-z58b2e">ðŸ“Š CSV</button> <button class="export-btn svelte-z58b2e">ðŸ“‹ JSON</button></div>'),yt=g('<div class="diary-panel svelte-z58b2e"><h2 class="svelte-z58b2e"> </h2> <!> <!></div>'),wt=g('<div><span class="bp-emoji svelte-z58b2e"> </span> <span class="bp-label svelte-z58b2e"> </span></div>'),xt=g('<button class="strategy-card svelte-z58b2e"><span> </span></button>'),kt=g('<div class="emotion-detail svelte-z58b2e"><div class="detail-header svelte-z58b2e"><span class="detail-emoji svelte-z58b2e"> </span> <h2 class="svelte-z58b2e"> </h2> <span class="zone-badge svelte-z58b2e"> </span></div> <div class="body-map svelte-z58b2e"><h3 class="svelte-z58b2e"> </h3> <div class="body-parts svelte-z58b2e"></div></div> <div class="strategies svelte-z58b2e"><h3 class="svelte-z58b2e"> </h3> <!></div> <div class="log-section svelte-z58b2e"><h3 class="svelte-z58b2e"> </h3> <input type="text" class="note-input svelte-z58b2e"/> <button class="log-btn svelte-z58b2e"> </button></div></div>'),jt=g('<button class="emotion-btn svelte-z58b2e"><span class="em-emoji svelte-z58b2e"> </span> <span class="em-label svelte-z58b2e"> </span></button>'),qt=g('<div class="zone svelte-z58b2e"><h3 class="zone-header svelte-z58b2e"> </h3> <div class="zone-emotions svelte-z58b2e"></div></div>'),Et=g('<div class="zones svelte-z58b2e"></div>'),St=g(`<div class="emotion-page svelte-z58b2e"><header class="app-header svelte-z58b2e"><button class="back-btn svelte-z58b2e"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M15 18l-6-6 6-6"></path></svg></button> <h1 class="svelte-z58b2e"> </h1> <button class="icon-btn svelte-z58b2e" aria-label="Quiz"> </button> <button class="icon-btn svelte-z58b2e">ðŸ““</button></header> <!> <footer class="credit svelte-z58b2e">Emotion zone concept inspired by evidence-based self-regulation frameworks.
    Pictograms: <a href="https://arasaac.org" target="_blank" rel="noopener" class="svelte-z58b2e">ARASAAC</a> â€” CC BY-NC-SA 3.0</footer></div>`);function Ut(xe,ke){Ge(ke,!0);const r=()=>lt(st,"$t",je),[je,qe]=nt(),B=[{id:"happy",emoji:"ðŸ˜Š",label:"emotion.happy",zone:"green",body:["chest","face"],strategies:["emotion.strat.share","emotion.strat.smile"]},{id:"calm",emoji:"ðŸ˜Œ",label:"emotion.calm",zone:"green",body:["chest"],strategies:["emotion.strat.breathe","emotion.strat.enjoy"]},{id:"focused",emoji:"ðŸŽ¯",label:"emotion.focused",zone:"green",body:["head"],strategies:["emotion.strat.keep_going"]},{id:"proud",emoji:"ðŸ’ª",label:"emotion.proud",zone:"green",body:["chest","arms"],strategies:["emotion.strat.share","emotion.strat.celebrate"]},{id:"frustrated",emoji:"ðŸ˜¤",label:"emotion.frustrated",zone:"yellow",body:["head","hands"],strategies:["emotion.strat.break","emotion.strat.ask_help"]},{id:"worried",emoji:"ðŸ˜°",label:"emotion.worried",zone:"yellow",body:["stomach","chest"],strategies:["emotion.strat.breathe","emotion.strat.talk"]},{id:"excited",emoji:"ðŸ¤©",label:"emotion.excited",zone:"yellow",body:["whole"],strategies:["emotion.strat.breathe","emotion.strat.move"]},{id:"silly",emoji:"ðŸ¤ª",label:"emotion.silly",zone:"yellow",body:["whole"],strategies:["emotion.strat.calm_body","emotion.strat.breathe"]},{id:"angry",emoji:"ðŸ˜ ",label:"emotion.angry",zone:"orange",body:["head","hands","chest"],strategies:["emotion.strat.count","emotion.strat.walk_away","emotion.strat.squeeze"]},{id:"scared",emoji:"ðŸ˜¨",label:"emotion.scared",zone:"orange",body:["stomach","chest","legs"],strategies:["emotion.strat.safe_person","emotion.strat.breathe","emotion.strat.grounding"]},{id:"anxious",emoji:"ðŸ˜¥",label:"emotion.anxious",zone:"orange",body:["stomach","chest"],strategies:["emotion.strat.breathe","emotion.strat.grounding","emotion.strat.talk"]},{id:"overwhelmed",emoji:"ðŸ¤¯",label:"emotion.overwhelmed",zone:"orange",body:["head","whole"],strategies:["emotion.strat.quiet_place","emotion.strat.break","emotion.strat.headphones"]},{id:"meltdown",emoji:"ðŸŒ‹",label:"emotion.meltdown",zone:"red",body:["whole"],strategies:["emotion.strat.safe_space","emotion.strat.wait","emotion.strat.heavy_blanket"]},{id:"rage",emoji:"ðŸ”¥",label:"emotion.rage",zone:"red",body:["whole"],strategies:["emotion.strat.safe_space","emotion.strat.cool_down"]},{id:"terror",emoji:"ðŸ˜±",label:"emotion.terror",zone:"red",body:["whole"],strategies:["emotion.strat.safe_person","emotion.strat.safe_space"]},{id:"shutdown",emoji:"ðŸ§Š",label:"emotion.shutdown",zone:"red",body:["whole"],strategies:["emotion.strat.wait","emotion.strat.comfort_item","emotion.strat.no_demands"]}],H={green:"#27AE60",yellow:"#F1C40F",orange:"#E67E22",red:"#E74C3C"},me={green:"emotion.zone.green",yellow:"emotion.zone.yellow",orange:"emotion.zone.orange",red:"emotion.zone.red"},Ee=["head","face","chest","stomach","arms","hands","legs","whole"];let k=$(null),be=$(de([])),N=$(de([])),ae=$(!1),K=$(""),Y=$(!1),Q=$(null),ue=$(de([])),se=$(0),re=$(0),W=$(""),T=$(!1);He(()=>{Se()});async function Se(){const a=he(we);if(a){const s=await dt(a,"emotion-map");s?.diary&&u(N,s.diary,!0)}}async function Oe(){const a=he(we);a&&await ct(a,"emotion-map",{diary:e(N)})}function $e(a){u(k,a,!0),u(be,a.body,!0),V(r()(a.label))}function Ce(){e(k)&&(u(N,[{emotion:e(k).id,time:new Date().toISOString(),note:e(K)},...e(N)].slice(0,50),!0),u(K,""),Oe(),V(r()("emotion.logged")))}function Ae(a){return B.filter(s=>s.zone===a)}function Ne(){u(Y,!0),u(se,0),u(re,0),_e()}function _e(){u(T,!1),u(W,"");const a=B[Math.floor(Math.random()*B.length)];u(Q,a,!0);const v=B.filter(d=>d.id!==a.id).sort(()=>Math.random()-.5).slice(0,3);u(ue,[...v,a].sort(()=>Math.random()-.5),!0)}function Le(a){e(T)||(u(T,!0),ze(re),a.id===e(Q).id?(ze(se),u(W,"âœ… "+r()("pecs.great")),V(r()("pecs.great"))):(u(W,"âŒ "+r()(e(Q).label)),V(r()("pecs.try_again")+" "+r()(e(Q).label))))}function Me(){u(Y,!1)}function Re(){if(e(N).length===0)return;const a="Time,Emotion,Zone,Note",s=e(N).map(d=>{const p=B.find(q=>q.id===d.emotion),h=p?p.zone:"",j=(d.note||"").replace(/"/g,'""');return`"${d.time}","${d.emotion}","${h}","${j}"`}),v=[a,...s].join(`
`);pe(v,"emotion-diary.csv","text/csv")}function De(){if(e(N).length===0)return;const a=e(N).map(s=>{const v=B.find(d=>d.id===s.emotion);return{time:s.time,emotion:s.emotion,zone:v?.zone,note:s.note}});pe(JSON.stringify(a,null,2),"emotion-diary.json","application/json")}function pe(a,s,v){const d=new Blob([a],{type:v}),p=URL.createObjectURL(d),h=document.createElement("a");h.href=p,h.download=s,h.click(),URL.revokeObjectURL(p)}var ie=St(),ne=o(ie),le=o(ne),ve=n(le,2),Pe=o(ve,!0);t(ve);var ee=n(ve,2),Qe=o(ee,!0);t(ee);var Be=n(ee,2);t(ne);var Te=n(ne,2);{var Ue=a=>{var s=pt(),v=o(s),d=o(v);t(v);var p=n(v,2);{var h=j=>{var q=_t(),m=ot(q),l=o(m,!0);t(m);var c=n(m,2),f=o(c,!0);t(c);var S=n(c,2);I(S,21,()=>e(ue),J,(_,b)=>{var w=mt();let A;var E=o(w,!0);t(w),y(D=>{A=ye(w,1,"quiz-btn svelte-z58b2e",null,A,{correct:e(T)&&e(b).id===e(Q).id,wrong:e(T)&&e(b).id!==e(Q).id}),w.disabled=e(T),i(E,D)},[()=>r()(e(b).label)]),M("click",w,()=>Le(e(b))),z(_,w)}),t(S);var C=n(S,2);{var L=_=>{var b=bt(),w=o(b,!0);t(b),y(()=>i(w,e(W))),z(_,b)};F(C,_=>{e(W)&&_(L)})}var R=n(C,2);{var X=_=>{var b=ut(),w=o(b,!0);t(b),y(A=>i(w,A),[()=>r()("calm.next")]),M("click",b,_e),z(_,b)};F(R,_=>{e(T)&&_(X)})}y(_=>{i(l,e(Q).emoji),i(f,_)},[()=>r()("emotion.quiz_what")]),z(j,q)};F(p,j=>{e(Q)&&j(h)})}t(s),y(j=>i(d,`${j??""}: ${e(se)??""} / ${e(re)??""}`),[()=>r()("pecs.correct")]),ce(3,s,()=>ge),z(a,s)},Ze=a=>{var s=yt(),v=o(s),d=o(v);t(v);var p=n(v,2);I(p,17,()=>e(N),J,(m,l)=>{const c=tt(()=>B.find(E=>E.id===e(l).emotion));var f=zt(),S=o(f),C=o(S,!0);t(S);var L=n(S,2),R=o(L),X=o(R,!0);t(R);var _=n(R,2),b=o(_,!0);t(_);var w=n(_,2);{var A=E=>{var D=ht(),P=o(D,!0);t(D),y(()=>i(P,e(l).note)),z(E,D)};F(w,E=>{e(l).note&&E(A)})}t(L),t(f),y((E,D)=>{i(C,e(c)?.emoji||"â“"),i(X,E),i(b,D)},[()=>e(c)?r()(e(c).label):e(l).emotion,()=>new Date(e(l).time).toLocaleString()]),z(m,f)});var h=n(p,2);{var j=m=>{var l=gt(),c=o(l,!0);t(l),y(f=>i(c,f),[()=>r()("emotion.no_entries")]),z(m,l)},q=m=>{var l=ft(),c=o(l),f=n(c,2);t(l),M("click",c,Re),M("click",f,De),z(m,l)};F(h,m=>{e(N).length===0?m(j):m(q,!1)})}t(s),y(m=>i(d,`ðŸ““ ${m??""}`),[()=>r()("emotion.diary")]),ce(3,s,()=>at,()=>({x:300})),z(a,s)},Fe=a=>{var s=kt(),v=o(s),d=o(v),p=o(d,!0);t(d);var h=n(d,2),j=o(h,!0);t(h);var q=n(h,2),m=o(q,!0);t(q),t(v);var l=n(v,2),c=o(l),f=o(c,!0);t(c);var S=n(c,2);I(S,21,()=>Ee,J,(P,x)=>{var O=wt();let U;var Z=o(O),G=o(Z,!0);t(Z);var te=n(Z,2),Je=o(te,!0);t(te),t(O),y((Ve,Ye)=>{U=ye(O,1,"body-part svelte-z58b2e",null,U,Ve),oe(O,`--zc: ${H[e(k).zone]??""}`),i(G,e(x)==="head"?"ðŸ§ ":e(x)==="face"?"ðŸ˜¶":e(x)==="chest"?"ðŸ’—":e(x)==="stomach"?"ðŸ«ƒ":e(x)==="arms"?"ðŸ’ª":e(x)==="hands"?"âœ‹":e(x)==="legs"?"ðŸ¦µ":"ðŸ§"),i(Je,Ye)},[()=>({highlighted:e(be).includes(e(x))}),()=>r()("emotion.body."+e(x))]),z(P,O)}),t(S),t(l);var C=n(l,2),L=o(C),R=o(L);t(L);var X=n(L,2);I(X,17,()=>e(k).strategies,J,(P,x)=>{var O=xt(),U=o(O),Z=o(U,!0);t(U),t(O),y(G=>i(Z,G),[()=>r()(e(x))]),M("click",O,()=>V(r()(e(x)))),z(P,O)}),t(C);var _=n(C,2),b=o(_),w=o(b,!0);t(b);var A=n(b,2);rt(A);var E=n(A,2),D=o(E,!0);t(E),t(_),t(s),y((P,x,O,U,Z,G,te)=>{oe(v,`background: ${H[e(k).zone]??""}20`),i(p,e(k).emoji),i(j,P),oe(q,`background: ${H[e(k).zone]??""}; color: white`),i(m,x),i(f,O),i(R,`ðŸ’¡ ${U??""}`),i(w,Z),fe(A,"placeholder",G),i(D,te)},[()=>r()(e(k).label),()=>r()(me[e(k).zone]),()=>r()("emotion.where_feel"),()=>r()("emotion.strategies"),()=>r()("emotion.log_feeling"),()=>r()("emotion.note_placeholder"),()=>r()("emotion.log_btn")]),it(A,()=>e(K),P=>u(K,P)),M("click",E,Ce),ce(3,s,()=>ge),z(a,s)},Ie=a=>{var s=Et();I(s,20,()=>["green","yellow","orange","red"],J,(v,d)=>{var p=qt(),h=o(p),j=o(h,!0);t(h);var q=n(h,2);I(q,21,()=>Ae(d),J,(m,l)=>{var c=jt(),f=o(c),S=o(f,!0);t(f);var C=n(f,2),L=o(C,!0);t(C),t(c),y(R=>{i(S,e(l).emoji),i(L,R)},[()=>r()(e(l).label)]),M("click",c,()=>$e(e(l))),Xe("focus",c,()=>V(r()(e(l).label))),z(m,c)}),t(q),t(p),y(m=>{oe(p,`--zc: ${H[d]??""}`),i(j,m)},[()=>r()(me[d])]),z(v,p)}),t(s),z(a,s)};F(Te,a=>{e(Y)?a(Ue):e(ae)?a(Ze,1):e(k)?a(Fe,2):a(Ie,!1)})}et(2),t(ie),y((a,s)=>{fe(le,"aria-label",a),i(Pe,s),i(Qe,e(Y)?"ðŸ—ºï¸":"ðŸŽ¯")},[()=>r()("app.back"),()=>r()("emotion.title")]),M("click",le,()=>e(k)?u(k,null):vt("/")),M("click",ee,()=>e(Y)?Me():Ne()),M("click",Be,()=>{u(ae,!e(ae))}),z(xe,ie),Ke(),qe()}We(["click"]);export{Ut as component};
