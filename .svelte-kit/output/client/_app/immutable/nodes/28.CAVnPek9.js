import{d as Te,a as b,b as q,s as f,f as k}from"../chunks/5jrULABA.js";import{S as De,T as C,U as Ee,V as Pe,$ as te,Y as l,W as y,X as Ae,d as e,_ as r,Z as n,a0 as o,a3 as Ce}from"../chunks/Bu7XKhG-.js";import{i as I}from"../chunks/64S6HLbC.js";import{e as G,i as H}from"../chunks/D91HFo5I.js";import{t as se,f as ae}from"../chunks/BufHwZ1v.js";import{s as J,t as Ie,a as oe,r as re}from"../chunks/tnJ21aC2.js";import{s as Me}from"../chunks/DvixMhaI.js";import{s as Be}from"../chunks/jfaHFQEH.js";import{b as ie}from"../chunks/BHAKTja7.js";import{s as Fe,a as Le}from"../chunks/Cvp8QKtV.js";import{g as Ve}from"../chunks/BAFRKenw.js";import{a as We,b as Xe}from"../chunks/BeKFXwpI.js";import{a as ve}from"../chunks/BXvIZ4AA.js";var Ye=k('<span class="progress-badge svelte-1qrd85o"> </span>'),Ze=k('<div class="schedule-card svelte-1qrd85o"><button class="schedule-btn svelte-1qrd85o"><span class="sched-name"> </span> <span class="sched-count svelte-1qrd85o"> </span></button> <button class="del-btn svelte-1qrd85o">âœ•</button></div>'),ze=k('<h2 class="section-title svelte-1qrd85o"> </h2> <div class="schedule-list svelte-1qrd85o"></div>',1),Ge=k('<button class="tpl-card svelte-1qrd85o"><span class="tpl-emoji svelte-1qrd85o"> </span> <span class="tpl-name svelte-1qrd85o"> </span></button>'),He=k('<div class="home-page svelte-1qrd85o"><!> <h2 class="section-title svelte-1qrd85o"> </h2> <div class="template-grid svelte-1qrd85o"></div></div>'),Je=k('<button class="del-btn sm svelte-1qrd85o">âœ•</button>'),Ke=k('<div><button class="step-check svelte-1qrd85o"> </button> <span class="step-emoji svelte-1qrd85o"> </span> <span class="step-text svelte-1qrd85o"> </span> <button class="step-speak svelte-1qrd85o">ðŸ”Š</button> <!></div>'),Ne=k('<div class="add-step-row svelte-1qrd85o"><input type="text" class="emoji-input svelte-1qrd85o" maxlength="4"/> <input type="text" class="svelte-1qrd85o"/> <button class="add-btn svelte-1qrd85o">+</button></div>'),Oe=k('<div class="schedule-page svelte-1qrd85o"><div class="progress-bar svelte-1qrd85o"><div class="progress-fill svelte-1qrd85o"></div></div> <div class="step-list svelte-1qrd85o"></div> <!> <div class="sched-actions svelte-1qrd85o"><button class="action-btn svelte-1qrd85o"> </button> <button class="action-btn svelte-1qrd85o"> </button></div></div>'),Qe=k('<div class="vs-page svelte-1qrd85o"><header class="app-header svelte-1qrd85o"><button class="back-btn svelte-1qrd85o"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M15 18l-6-6 6-6"></path></svg></button> <h1 class="svelte-1qrd85o"> </h1> <!></header> <!> <footer class="credit svelte-1qrd85o"> </footer></div>');function ct(ne,de){De(de,!0);const u=()=>Le(Ie,"$t",le),[le,pe]=Fe(),ce=[{name:"vs.template.morning",key:"morning",steps:[{emoji:"ðŸŒ…",text:"vs.step.wake_up"},{emoji:"ðŸš¿",text:"vs.step.shower"},{emoji:"ðŸ‘•",text:"vs.step.get_dressed"},{emoji:"ðŸ³",text:"vs.step.breakfast"},{emoji:"ðŸ¦·",text:"vs.step.brush_teeth"},{emoji:"ðŸŽ’",text:"vs.step.pack_bag"},{emoji:"ðŸ‘‹",text:"vs.step.go"}]},{name:"vs.template.evening",key:"evening",steps:[{emoji:"ðŸ ",text:"vs.step.come_home"},{emoji:"ðŸ½ï¸",text:"vs.step.dinner"},{emoji:"ðŸ›",text:"vs.step.bath"},{emoji:"ðŸ¦·",text:"vs.step.brush_teeth"},{emoji:"ðŸ“–",text:"vs.step.read"},{emoji:"ðŸ›ï¸",text:"vs.step.bed"}]},{name:"vs.template.school",key:"school",steps:[{emoji:"ðŸ«",text:"vs.step.arrive"},{emoji:"ðŸ“š",text:"vs.step.lesson"},{emoji:"â˜•",text:"vs.step.break_time"},{emoji:"ðŸ“š",text:"vs.step.lesson"},{emoji:"ðŸ½ï¸",text:"vs.step.lunch"},{emoji:"ðŸ“š",text:"vs.step.lesson"},{emoji:"ðŸ ",text:"vs.step.go_home"}]}];let d=C(Ee([])),s=C(null),S=C(!1),D=C(""),L=C("ðŸ“Œ");Pe(()=>{ue()});async function ue(){const t=te(ve);if(t){const a=await We(t,"visual-support");a?.schedules&&l(d,a.schedules,!0)}}async function U(){const t=te(ve);t&&await Xe(t,"visual-support",{schedules:e(d)})}function me(t){const a={id:crypto.randomUUID(),name:u()(t.name),steps:t.steps.map(i=>({id:crypto.randomUUID(),emoji:i.emoji,text:u()(i.text),done:!1}))};l(d,[...e(d),a],!0),l(s,a,!0),U()}function _e(t){if(!e(s))return;e(s).steps=e(s).steps.map(i=>i.id===t?{...i,done:!i.done}:i);const a=e(s).steps.find(i=>i.id===t);a&&oe(a.done?`${a.text} â€” ${u()("vs.done")}!`:a.text),l(d,e(d).map(i=>i.id===e(s).id?e(s):i),!0),U()}function fe(){e(s)&&(e(s).steps=e(s).steps.map(t=>({...t,done:!1})),l(d,e(d).map(t=>t.id===e(s).id?e(s):t),!0),U())}function he(t){l(d,e(d).filter(a=>a.id!==t),!0),e(s)?.id===t&&l(s,null),U()}function K(){!e(s)||!e(D).trim()||(e(s).steps=[...e(s).steps,{id:crypto.randomUUID(),emoji:e(L),text:e(D).trim(),done:!1}],l(d,e(d).map(t=>t.id===e(s).id?e(s):t),!0),l(D,""),U())}function be(t){e(s)&&(e(s).steps=e(s).steps.filter(a=>a.id!==t),l(d,e(d).map(a=>a.id===e(s).id?e(s):a),!0),U())}function N(){return e(s)?.steps.filter(t=>t.done).length||0}function xe(){e(s)?(l(s,null),l(S,!1)):Ve("/")}var V=Qe(),W=r(V),X=r(W),Y=n(X,2),ge=r(Y,!0);o(Y);var qe=n(Y,2);{var ke=t=>{var a=Ye(),i=r(a);o(a),y(E=>f(i,`${E??""}/${e(s).steps.length??""}`),[N]),q(t,a)};I(qe,t=>{e(s)&&t(ke)})}o(W);var O=n(W,2);{var je=t=>{var a=He(),i=r(a);{var E=x=>{var h=ze(),g=Ce(h),j=r(g,!0);o(g);var T=n(g,2);G(T,21,()=>e(d),H,(m,v)=>{var _=Ze(),p=r(_),w=r(p),c=r(w,!0);o(w);var F=n(w,2),P=r(F);o(F),o(p);var Z=n(p,2);o(_),y(A=>{f(c,e(v).name),f(P,`${e(v).steps.length??""} ${A??""}`)},[()=>u()("vs.steps")]),b("click",p,()=>l(s,e(v),!0)),b("click",Z,()=>he(e(v).id)),q(m,_)}),o(T),y(m=>f(j,m),[()=>u()("vs.my_schedules")]),q(x,h)};I(i,x=>{e(d).length>0&&x(E)})}var $=n(i,2),M=r($,!0);o($);var B=n($,2);G(B,21,()=>ce,H,(x,h)=>{var g=Ge(),j=r(g),T=r(j,!0);o(j);var m=n(j,2),v=r(m,!0);o(m),o(g),y(_=>{f(T,e(h).steps[0].emoji),f(v,_)},[()=>u()(e(h).name)]),b("click",g,()=>me(e(h))),q(x,g)}),o(B),o(a),y(x=>f(M,x),[()=>u()("vs.templates")]),se(3,a,()=>ae),q(t,a)},ye=t=>{var a=Oe(),i=r(a),E=r(i);o(i);var $=n(i,2);G($,21,()=>e(s).steps,H,(m,v,_)=>{var p=Ke();let w;var c=r(p),F=r(c,!0);o(c);var P=n(c,2),Z=r(P,!0);o(P);var A=n(P,2),$e=r(A,!0);o(A);var R=n(A,2),Se=n(R,2);{var Ue=z=>{var ee=Je();b("click",ee,()=>be(e(v).id)),q(z,ee)};I(Se,z=>{e(S)&&z(Ue)})}o(p),y(()=>{w=Me(p,1,"step-row svelte-1qrd85o",null,w,{done:e(v).done,current:!e(v).done&&(_===0||e(s).steps[_-1].done)}),J(c,"aria-label",e(v).done?"Undo":"Complete"),f(F,e(v).done?"âœ…":"â¬œ"),f(Z,e(v).emoji),f($e,e(v).text)}),b("click",c,()=>_e(e(v).id)),b("click",R,()=>oe(e(v).text)),q(m,p)}),o($);var M=n($,2);{var B=m=>{var v=Ne(),_=r(v);re(_);var p=n(_,2);re(p);var w=n(p,2);o(v),y(c=>J(p,"placeholder",c),[()=>u()("vs.add_step")]),ie(_,()=>e(L),c=>l(L,c)),b("keydown",p,c=>{c.key==="Enter"&&K()}),ie(p,()=>e(D),c=>l(D,c)),b("click",w,K),q(m,v)};I(M,m=>{e(S)&&m(B)})}var x=n(M,2),h=r(x),g=r(h,!0);o(h);var j=n(h,2),T=r(j);o(j),o(x),o(a),y((m,v,_)=>{Be(E,`width: ${m??""}%`),f(g,v),f(T,`ðŸ”„ ${_??""}`)},[()=>e(s).steps.length>0?N()/e(s).steps.length*100:0,()=>e(S)?"âœ“ "+u()("vs.done_editing"):"âœï¸ "+u()("vs.edit"),()=>u()("vs.reset")]),b("click",h,()=>l(S,!e(S))),b("click",j,fe),se(3,a,()=>ae),q(t,a)};I(O,t=>{e(s)?t(ye,!1):t(je)})}var Q=n(O,2),we=r(Q,!0);o(Q),o(V),y((t,a,i)=>{J(X,"aria-label",t),f(ge,a),f(we,i)},[()=>u()("app.back"),()=>e(s)?e(s).name:u()("vs.title"),()=>u()("vs.credit")]),b("click",X,xe),q(ne,V),Ae(),pe()}Te(["click","keydown"]);export{ct as component};
