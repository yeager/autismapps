import{D as d}from"./BgUQPdXI.js";const t=new d("AutismApps");t.version(3).stores({boards:"++id, name, category, createdAt",schedules:"++id, name, date, createdAt",settings:"++id, &key",profiles:"++id, name, createdAt",appProgress:"++id, profileId, appId, [profileId+appId]",goldStars:"++id, profileId, appId, earnedAt",achievements:"++id, profileId, achievementKey",rewardGoals:"++id, profileId, type, completed",diplomas:"++id, profileId, achievementKey, earnedAt"});t.version(1).stores({boards:"++id, name, category, createdAt",schedules:"++id, name, date, createdAt",settings:"++id, &key"});t.version(2).stores({boards:"++id, name, category, createdAt",schedules:"++id, name, date, createdAt",settings:"++id, &key",profiles:"++id, name, createdAt",appProgress:"++id, profileId, appId, [profileId+appId]"});async function p(e){return e.updatedAt=new Date,e.createdAt||(e.createdAt=new Date),await t.boards.put(e)}async function u(){return await t.boards.orderBy("updatedAt").reverse().toArray()}async function f(e){await t.boards.delete(e)}async function l(e){return e.createdAt||(e.createdAt=new Date),await t.schedules.put(e)}async function y(){return await t.schedules.orderBy("createdAt").reverse().toArray()}async function A(e){await t.schedules.delete(e)}async function i(e){const a=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",a);return Array.from(new Uint8Array(r)).map(s=>s.toString(16).padStart(2,"0")).join("")}async function w(e,a,r){const s=new Date,n={name:e,avatar:a,pinHash:r?await i(r):void 0,settings:{},createdAt:s,updatedAt:s};return await t.profiles.put(n)}async function g(){return await t.profiles.orderBy("name").toArray()}async function h(e){return await t.profiles.get(e)}async function m(e,a){const r=await t.profiles.get(e);return r?.pinHash?r.pinHash===await i(a):!0}async function I(e,a){return(await t.appProgress.where("[profileId+appId]").equals([e,a]).first())?.data??null}async function v(e,a,r){const s=await t.appProgress.where("[profileId+appId]").equals([e,a]).first();s?await t.appProgress.update(s.id,{data:r,updatedAt:new Date}):await t.appProgress.put({profileId:e,appId:a,data:r,updatedAt:new Date})}export{I as a,v as b,t as c,f as d,y as e,l as f,u as g,A as h,g as i,w as j,h as k,p as s,m as v};
