import{b as u}from"./TeHBZhWf.js";import{aq as d,w as i}from"./5-o2xn5F.js";import{c as r}from"./B5a8mNDb.js";import{a as c}from"./CCIDKU4D.js";const S=[{key:"first_star",labelKey:"rewards.achievement.first_star",descKey:"rewards.achievement.first_star.desc",icon:"â­",condition:{type:"stars",count:1}},{key:"five_stars",labelKey:"rewards.achievement.five_stars",descKey:"rewards.achievement.five_stars.desc",icon:"ğŸŒŸ",condition:{type:"stars",count:5}},{key:"ten_stars",labelKey:"rewards.achievement.ten_stars",descKey:"rewards.achievement.ten_stars.desc",icon:"âœ¨",condition:{type:"stars",count:10}},{key:"twenty_five_stars",labelKey:"rewards.achievement.twenty_five_stars",descKey:"rewards.achievement.twenty_five_stars.desc",icon:"ğŸ’«",condition:{type:"stars",count:25}},{key:"fifty_stars",labelKey:"rewards.achievement.fifty_stars",descKey:"rewards.achievement.fifty_stars.desc",icon:"ğŸ†",condition:{type:"stars",count:50}},{key:"five_minutes",labelKey:"rewards.achievement.five_minutes",descKey:"rewards.achievement.five_minutes.desc",icon:"â°",condition:{type:"time",count:5}},{key:"fifteen_minutes",labelKey:"rewards.achievement.fifteen_minutes",descKey:"rewards.achievement.fifteen_minutes.desc",icon:"ğŸ•",condition:{type:"time",count:15}},{key:"thirty_minutes",labelKey:"rewards.achievement.thirty_minutes",descKey:"rewards.achievement.thirty_minutes.desc",icon:"ğŸ¯",condition:{type:"time",count:30}}],p=i([]),h=i([]),f=i([]),y=i([]),m=i(l()),v=i(0),A=i(null);function l(){return{enabled:!0,perApp:{},praiseEnabled:!0,diplomasEnabled:!0}}function _(){const e=d(c),t=e?`rewards-settings-${e}`:"rewards-settings";try{const s=localStorage.getItem(t);if(s)return{...l(),...JSON.parse(s)}}catch{}return l()}function E(e){const t=d(c),s=t?`rewards-settings-${t}`:"rewards-settings";localStorage.setItem(s,JSON.stringify(e)),m.set(e)}async function b(){const e=d(c);if(!e||!u)return;m.set(_());const[t,s,n,a]=await Promise.all([r.table("goldStars").where("profileId").equals(e).toArray(),r.table("achievements").where("profileId").equals(e).toArray(),r.table("rewardGoals").where("profileId").equals(e).toArray(),r.table("diplomas").where("profileId").equals(e).toArray()]);p.set(t),h.set(s),f.set(n),y.set(a),v.set(t.length)}async function q(e,t,s,n){const a=d(c);if(!a)throw new Error("No active profile");const o={profileId:a,type:e,target:t,current:0,rewardText:s,appId:n,completed:!1,createdAt:new Date};return o.id=await r.table("rewardGoals").add(o),f.update(w=>[...w,o]),o}async function D(e){await r.table("rewardGoals").delete(e),f.update(t=>t.filter(s=>s.id!==e))}async function G(e,t,s){const n=d(c);if(!n)throw new Error("No active profile");const a={profileId:n,childName:e,achievementKey:t,appId:s,earnedAt:new Date};return a.id=await r.table("diplomas").add(a),y.update(o=>[...o,a]),a}c.subscribe(e=>{e&&b()});export{S as A,p as a,D as b,G as c,y as d,h as e,q as f,f as g,A as h,b as l,m as r,E as s,v as t};
