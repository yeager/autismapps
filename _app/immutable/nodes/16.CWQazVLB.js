import{d as ut,a as K,b as y,s as c,f}from"../chunks/Rl5oAaZp.js";import{ag as xt,ao as M,b as bt,ap as gt,aq as H,s as d,an as J,ah as b,ai as kt,a as t,aj as s,ak as i,al as r,at as wt}from"../chunks/5-o2xn5F.js";import{i as E}from"../chunks/CV8532PG.js";import{e as N,i as Q}from"../chunks/CWjGmADL.js";import{t as R,f as V}from"../chunks/CYPR1nOs.js";import{s as X}from"../chunks/mnwxxtgv.js";import{s as jt}from"../chunks/tEQK-CCT.js";import{b as $t}from"../chunks/Ch1I3Fei.js";import{s as Dt,a as Kt}from"../chunks/1mwIFy_z.js";import{g as Mt}from"../chunks/C7HAlxDp.js";import{W as Et}from"../chunks/BIf6fDbj.js";import{t as It}from"../chunks/D-IBFiEI.js";import{s as Y}from"../chunks/TeHBZhWf.js";import{a as Pt,b as At}from"../chunks/B5a8mNDb.js";import{a as Z}from"../chunks/CCIDKU4D.js";var Ot=f('<button class="add-btn svelte-4vhtx9"> </button>'),St=f('<button><span class="mood-emoji svelte-4vhtx9"> </span> <span class="mood-label svelte-4vhtx9"> </span></button>'),Ut=f('<textarea rows="4" class="svelte-4vhtx9"></textarea> <button class="save-btn svelte-4vhtx9"> </button>',1),Wt=f('<div class="new-entry svelte-4vhtx9"><h2 class="svelte-4vhtx9"> </h2> <div class="mood-grid svelte-4vhtx9"></div> <!></div>'),qt=f('<p class="entry-text svelte-4vhtx9"> </p>'),Bt=f('<div class="entry-card svelte-4vhtx9"><div class="entry-header svelte-4vhtx9"><span class="entry-emoji svelte-4vhtx9"> </span> <span class="entry-mood svelte-4vhtx9"> </span> <span class="entry-date svelte-4vhtx9"> </span> <button class="del-btn svelte-4vhtx9">âœ•</button></div> <!></div>'),Ct=f('<p class="empty svelte-4vhtx9"> </p>'),Lt=f('<div class="entry-list svelte-4vhtx9"><!> <!></div>'),Tt=f('<!> <div class="diary-page svelte-4vhtx9"><header class="app-header svelte-4vhtx9"><button class="back-btn svelte-4vhtx9"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M15 18l-6-6 6-6"></path></svg></button> <h1 class="svelte-4vhtx9"> </h1> <!></header> <!> <footer class="credit svelte-4vhtx9"> </footer></div>',1);function re(tt,et){xt(et,!0);const p=()=>Kt(It,"$t",at),[at,rt]=Dt(),st=[{emoji:"ðŸ˜Š",key:"diary.mood.happy"},{emoji:"ðŸ˜",key:"diary.mood.okay"},{emoji:"ðŸ˜¢",key:"diary.mood.sad"},{emoji:"ðŸ˜¡",key:"diary.mood.angry"},{emoji:"ðŸ˜°",key:"diary.mood.worried"},{emoji:"ðŸ˜´",key:"diary.mood.tired"},{emoji:"ðŸ¤©",key:"diary.mood.excited"},{emoji:"ðŸ¤’",key:"diary.mood.sick"}];let m=M(bt([])),w=M("list"),j=M(""),I=M(""),P=M("");gt(()=>{ot()});async function ot(){const e=H(Z);if(e){const a=await Pt(e,"diary");a?.entries&&d(m,a.entries,!0)}}async function C(){const e=H(Z);e&&await At(e,"diary",{entries:t(m)})}function it(e){d(j,p()(e.key),!0),d(I,e.emoji,!0),Y(t(j))}function vt(){if(!t(j))return;const e={id:crypto.randomUUID(),date:new Date().toLocaleDateString(),mood:t(j),text:t(P),emoji:t(I)};d(m,[e,...t(m)],!0),t(m).length>100&&d(m,t(m).slice(0,100),!0),C(),Y(p()("diary.saved")),d(j,""),d(I,""),d(P,""),d(w,"list")}function lt(e){d(m,t(m).filter(a=>a.id!==e),!0),C()}var L=Tt(),T=J(L);Et(T,{appId:"diary",titleKey:"app.diary",purposeKey:"welcome.diary.purpose",howKey:"welcome.diary.how",goalKey:"welcome.diary.goal",icon:"ðŸ“”"});var z=i(T,2),A=s(z),O=s(A),S=i(O,2),dt=s(S,!0);r(S);var nt=i(S,2);{var ct=e=>{var a=Ot(),h=s(a);r(a),b($=>c(h,`+ ${$??""}`),[()=>p()("diary.new")]),K("click",a,()=>d(w,"new")),y(e,a)};E(nt,e=>{t(w)==="list"&&e(ct)})}r(A);var F=i(A,2);{var pt=e=>{var a=Wt(),h=s(a),$=s(h,!0);r(h);var D=i(h,2);N(D,21,()=>st,Q,(v,l)=>{var o=St();let u;var _=s(o),k=s(_,!0);r(_);var x=i(_,2),U=s(x,!0);r(x),r(o),b(W=>{u=jt(o,1,"mood-btn svelte-4vhtx9",null,u,{active:t(I)===t(l).emoji}),c(k,t(l).emoji),c(U,W)},[()=>p()(t(l).key)]),K("click",o,()=>it(t(l))),y(v,o)}),r(D);var g=i(D,2);{var n=v=>{var l=Ut(),o=J(l);wt(o);var u=i(o,2),_=s(u);r(u),b((k,x)=>{X(o,"placeholder",k),c(_,`ðŸ’¾ ${x??""}`)},[()=>p()("diary.what_happened"),()=>p()("diary.save")]),$t(o,()=>t(P),k=>d(P,k)),K("click",u,vt),y(v,l)};E(g,v=>{t(j)&&v(n)})}r(a),b(v=>c($,v),[()=>p()("diary.how_today")]),R(3,a,()=>V),y(e,a)},mt=e=>{var a=Lt(),h=s(a);N(h,17,()=>t(m),Q,(g,n)=>{var v=Bt(),l=s(v),o=s(l),u=s(o,!0);r(o);var _=i(o,2),k=s(_,!0);r(_);var x=i(_,2),U=s(x,!0);r(x);var W=i(x,2);r(l);var _t=i(l,2);{var yt=q=>{var B=qt(),ft=s(B,!0);r(B),b(()=>c(ft,t(n).text)),y(q,B)};E(_t,q=>{t(n).text&&q(yt)})}r(v),b(()=>{c(u,t(n).emoji),c(k,t(n).mood),c(U,t(n).date)}),K("click",W,()=>lt(t(n).id)),y(g,v)});var $=i(h,2);{var D=g=>{var n=Ct(),v=s(n,!0);r(n),b(l=>c(v,l),[()=>p()("diary.empty")]),y(g,n)};E($,g=>{t(m).length===0&&g(D)})}r(a),R(3,a,()=>V),y(e,a)};E(F,e=>{t(w)==="new"?e(pt):e(mt,!1)})}var G=i(F,2),ht=s(G,!0);r(G),r(z),b((e,a,h)=>{X(O,"aria-label",e),c(dt,a),c(ht,h)},[()=>p()("app.back"),()=>p()("diary.title"),()=>p()("diary.credit")]),K("click",O,()=>t(w)==="list"?Mt("/"):d(w,"list")),y(tt,L),kt(),rt()}ut(["click"]);export{re as component};
