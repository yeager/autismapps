import{d as He,a as L,b as g,s as n,f as z,e as Xe}from"../chunks/Rl5oAaZp.js";import{ag as et,ao as C,b as ve,ap as tt,aq as ze,s as u,an as fe,ah as y,ai as ot,a as e,aj as o,ak as i,al as t,am as at,as as st,ar as ye}from"../chunks/5-o2xn5F.js";import{i as T}from"../chunks/CV8532PG.js";import{e as U,i as Z}from"../chunks/CWjGmADL.js";import{t as de,f as we,a as rt}from"../chunks/CYPR1nOs.js";import{s as xe,r as it}from"../chunks/mnwxxtgv.js";import{s as ke}from"../chunks/tEQK-CCT.js";import{s as oe}from"../chunks/CttGtDdq.js";import{b as nt}from"../chunks/Ch1I3Fei.js";import{s as lt,a as vt}from"../chunks/1mwIFy_z.js";import{g as dt}from"../chunks/C7HAlxDp.js";import{W as ct}from"../chunks/BIf6fDbj.js";import{t as mt}from"../chunks/D-IBFiEI.js";import{s as J}from"../chunks/TeHBZhWf.js";import{a as bt,b as ut}from"../chunks/B5a8mNDb.js";import{a as je}from"../chunks/CCIDKU4D.js";var pt=z("<button> </button>"),_t=z('<p class="quiz-feedback svelte-z58b2e"> </p>'),ht=z('<button class="calm-btn svelte-z58b2e" style="margin-top: 16px"> </button>'),gt=z('<div class="quiz-emoji svelte-z58b2e"> </div> <p class="quiz-prompt svelte-z58b2e"> </p> <div class="quiz-choices svelte-z58b2e"></div> <!> <!>',1),zt=z('<div class="quiz-area svelte-z58b2e"><div class="quiz-score svelte-z58b2e"> </div> <!></div>'),ft=z('<p class="diary-note svelte-z58b2e"> </p>'),yt=z('<div class="diary-entry svelte-z58b2e"><span class="diary-emoji svelte-z58b2e"> </span> <div><strong> </strong> <span class="diary-time svelte-z58b2e"> </span> <!></div></div>'),wt=z('<p class="empty svelte-z58b2e"> </p>'),xt=z('<div class="export-btns svelte-z58b2e"><button class="export-btn svelte-z58b2e">ðŸ“Š CSV</button> <button class="export-btn svelte-z58b2e">ðŸ“‹ JSON</button></div>'),kt=z('<div class="diary-panel svelte-z58b2e"><h2 class="svelte-z58b2e"> </h2> <!> <!></div>'),jt=z('<div><span class="bp-emoji svelte-z58b2e"> </span> <span class="bp-label svelte-z58b2e"> </span></div>'),qt=z('<button class="strategy-card svelte-z58b2e"><span> </span></button>'),Et=z('<div class="emotion-detail svelte-z58b2e"><div class="detail-header svelte-z58b2e"><span class="detail-emoji svelte-z58b2e"> </span> <h2 class="svelte-z58b2e"> </h2> <span class="zone-badge svelte-z58b2e"> </span></div> <div class="body-map svelte-z58b2e"><h3 class="svelte-z58b2e"> </h3> <div class="body-parts svelte-z58b2e"></div></div> <div class="strategies svelte-z58b2e"><h3 class="svelte-z58b2e"> </h3> <!></div> <div class="log-section svelte-z58b2e"><h3 class="svelte-z58b2e"> </h3> <input type="text" class="note-input svelte-z58b2e"/> <button class="log-btn svelte-z58b2e"> </button></div></div>'),St=z('<button class="emotion-btn svelte-z58b2e"><span class="em-emoji svelte-z58b2e"> </span> <span class="em-label svelte-z58b2e"> </span></button>'),Ot=z('<div class="zone svelte-z58b2e"><h3 class="zone-header svelte-z58b2e"> </h3> <div class="zone-emotions svelte-z58b2e"></div></div>'),Ct=z('<div class="zones svelte-z58b2e"></div>'),$t=z(`<!> <div class="emotion-page svelte-z58b2e"><header class="app-header svelte-z58b2e"><button class="back-btn svelte-z58b2e"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M15 18l-6-6 6-6"></path></svg></button> <h1 class="svelte-z58b2e"> </h1> <button class="icon-btn svelte-z58b2e" aria-label="Quiz"> </button> <button class="icon-btn svelte-z58b2e">ðŸ““</button></header> <!> <footer class="credit svelte-z58b2e">Emotion zone concept inspired by evidence-based self-regulation frameworks.
    Pictograms: <a href="https://arasaac.org" target="_blank" rel="noopener" class="svelte-z58b2e">ARASAAC</a> â€” CC BY-NC-SA 3.0</footer></div>`,1);function Vt(qe,Ee){et(Ee,!0);const r=()=>vt(mt,"$t",Se),[Se,Oe]=lt(),B=[{id:"happy",emoji:"ðŸ˜Š",label:"emotion.happy",zone:"green",body:["chest","face"],strategies:["emotion.strat.share","emotion.strat.smile"]},{id:"calm",emoji:"ðŸ˜Œ",label:"emotion.calm",zone:"green",body:["chest"],strategies:["emotion.strat.breathe","emotion.strat.enjoy"]},{id:"focused",emoji:"ðŸŽ¯",label:"emotion.focused",zone:"green",body:["head"],strategies:["emotion.strat.keep_going"]},{id:"proud",emoji:"ðŸ’ª",label:"emotion.proud",zone:"green",body:["chest","arms"],strategies:["emotion.strat.share","emotion.strat.celebrate"]},{id:"frustrated",emoji:"ðŸ˜¤",label:"emotion.frustrated",zone:"yellow",body:["head","hands"],strategies:["emotion.strat.break","emotion.strat.ask_help"]},{id:"worried",emoji:"ðŸ˜°",label:"emotion.worried",zone:"yellow",body:["stomach","chest"],strategies:["emotion.strat.breathe","emotion.strat.talk"]},{id:"excited",emoji:"ðŸ¤©",label:"emotion.excited",zone:"yellow",body:["whole"],strategies:["emotion.strat.breathe","emotion.strat.move"]},{id:"silly",emoji:"ðŸ¤ª",label:"emotion.silly",zone:"yellow",body:["whole"],strategies:["emotion.strat.calm_body","emotion.strat.breathe"]},{id:"angry",emoji:"ðŸ˜ ",label:"emotion.angry",zone:"orange",body:["head","hands","chest"],strategies:["emotion.strat.count","emotion.strat.walk_away","emotion.strat.squeeze"]},{id:"scared",emoji:"ðŸ˜¨",label:"emotion.scared",zone:"orange",body:["stomach","chest","legs"],strategies:["emotion.strat.safe_person","emotion.strat.breathe","emotion.strat.grounding"]},{id:"anxious",emoji:"ðŸ˜¥",label:"emotion.anxious",zone:"orange",body:["stomach","chest"],strategies:["emotion.strat.breathe","emotion.strat.grounding","emotion.strat.talk"]},{id:"overwhelmed",emoji:"ðŸ¤¯",label:"emotion.overwhelmed",zone:"orange",body:["head","whole"],strategies:["emotion.strat.quiet_place","emotion.strat.break","emotion.strat.headphones"]},{id:"meltdown",emoji:"ðŸŒ‹",label:"emotion.meltdown",zone:"red",body:["whole"],strategies:["emotion.strat.safe_space","emotion.strat.wait","emotion.strat.heavy_blanket"]},{id:"rage",emoji:"ðŸ”¥",label:"emotion.rage",zone:"red",body:["whole"],strategies:["emotion.strat.safe_space","emotion.strat.cool_down"]},{id:"terror",emoji:"ðŸ˜±",label:"emotion.terror",zone:"red",body:["whole"],strategies:["emotion.strat.safe_person","emotion.strat.safe_space"]},{id:"shutdown",emoji:"ðŸ§Š",label:"emotion.shutdown",zone:"red",body:["whole"],strategies:["emotion.strat.wait","emotion.strat.comfort_item","emotion.strat.no_demands"]}],H={green:"#27AE60",yellow:"#F1C40F",orange:"#E67E22",red:"#E74C3C"},ce={green:"emotion.zone.green",yellow:"emotion.zone.yellow",orange:"emotion.zone.orange",red:"emotion.zone.red"},Ce=["head","face","chest","stomach","arms","hands","legs","whole"];let k=C(null),me=C(ve([])),M=C(ve([])),ae=C(!1),X=C(""),V=C(!1),Q=C(null),be=C(ve([])),se=C(0),re=C(0),W=C(""),F=C(!1);tt(()=>{$e()});async function $e(){const a=ze(je);if(a){const s=await bt(a,"emotion-map");s?.diary&&u(M,s.diary,!0)}}async function Ae(){const a=ze(je);a&&await ut(a,"emotion-map",{diary:e(M)})}function Me(a){u(k,a,!0),u(me,a.body,!0),J(r()(a.label))}function Ne(){e(k)&&(u(M,[{emotion:e(k).id,time:new Date().toISOString(),note:e(X)},...e(M)].slice(0,50),!0),u(X,""),Ae(),J(r()("emotion.logged")))}function Le(a){return B.filter(s=>s.zone===a)}function De(){u(V,!0),u(se,0),u(re,0),ue()}function ue(){u(F,!1),u(W,"");const a=B[Math.floor(Math.random()*B.length)];u(Q,a,!0);const v=B.filter(d=>d.id!==a.id).sort(()=>Math.random()-.5).slice(0,3);u(be,[...v,a].sort(()=>Math.random()-.5),!0)}function Re(a){e(F)||(u(F,!0),ye(re),a.id===e(Q).id?(ye(se),u(W,"âœ… "+r()("pecs.great")),J(r()("pecs.great"))):(u(W,"âŒ "+r()(e(Q).label)),J(r()("pecs.try_again")+" "+r()(e(Q).label))))}function Pe(){u(V,!1)}function Qe(){if(e(M).length===0)return;const a="Time,Emotion,Zone,Note",s=e(M).map(d=>{const _=B.find(q=>q.id===d.emotion),h=_?_.zone:"",j=(d.note||"").replace(/"/g,'""');return`"${d.time}","${d.emotion}","${h}","${j}"`}),v=[a,...s].join(`
`);pe(v,"emotion-diary.csv","text/csv")}function Be(){if(e(M).length===0)return;const a=e(M).map(s=>{const v=B.find(d=>d.id===s.emotion);return{time:s.time,emotion:s.emotion,zone:v?.zone,note:s.note}});pe(JSON.stringify(a,null,2),"emotion-diary.json","application/json")}function pe(a,s,v){const d=new Blob([a],{type:v}),_=URL.createObjectURL(d),h=document.createElement("a");h.href=_,h.download=s,h.click(),URL.revokeObjectURL(_)}var _e=$t(),he=fe(_e);ct(he,{appId:"emotion-map",titleKey:"app.emotion_map",purposeKey:"welcome.emotionMap.purpose",howKey:"welcome.emotionMap.how",goalKey:"welcome.emotionMap.goal",icon:"ðŸ—ºï¸"});var ge=i(he,2),ie=o(ge),ne=o(ie),le=i(ne,2),Fe=o(le,!0);t(le);var ee=i(le,2),Ie=o(ee,!0);t(ee);var Ke=i(ee,2);t(ie);var Te=i(ie,2);{var Ue=a=>{var s=zt(),v=o(s),d=o(v);t(v);var _=i(v,2);{var h=j=>{var q=gt(),m=fe(q),l=o(m,!0);t(m);var c=i(m,2),f=o(c,!0);t(c);var S=i(c,2);U(S,21,()=>e(be),Z,(p,b)=>{var w=pt();let A;var E=o(w,!0);t(w),y(R=>{A=ke(w,1,"quiz-btn svelte-z58b2e",null,A,{correct:e(F)&&e(b).id===e(Q).id,wrong:e(F)&&e(b).id!==e(Q).id}),w.disabled=e(F),n(E,R)},[()=>r()(e(b).label)]),L("click",w,()=>Re(e(b))),g(p,w)}),t(S);var $=i(S,2);{var N=p=>{var b=_t(),w=o(b,!0);t(b),y(()=>n(w,e(W))),g(p,b)};T($,p=>{e(W)&&p(N)})}var D=i($,2);{var Y=p=>{var b=ht(),w=o(b,!0);t(b),y(A=>n(w,A),[()=>r()("calm.next")]),L("click",b,ue),g(p,b)};T(D,p=>{e(F)&&p(Y)})}y(p=>{n(l,e(Q).emoji),n(f,p)},[()=>r()("emotion.quiz_what")]),g(j,q)};T(_,j=>{e(Q)&&j(h)})}t(s),y(j=>n(d,`${j??""}: ${e(se)??""} / ${e(re)??""}`),[()=>r()("pecs.correct")]),de(3,s,()=>we),g(a,s)},Ze=a=>{var s=kt(),v=o(s),d=o(v);t(v);var _=i(v,2);U(_,17,()=>e(M),Z,(m,l)=>{const c=st(()=>B.find(E=>E.id===e(l).emotion));var f=yt(),S=o(f),$=o(S,!0);t(S);var N=i(S,2),D=o(N),Y=o(D,!0);t(D);var p=i(D,2),b=o(p,!0);t(p);var w=i(p,2);{var A=E=>{var R=ft(),P=o(R,!0);t(R),y(()=>n(P,e(l).note)),g(E,R)};T(w,E=>{e(l).note&&E(A)})}t(N),t(f),y((E,R)=>{n($,e(c)?.emoji||"â“"),n(Y,E),n(b,R)},[()=>e(c)?r()(e(c).label):e(l).emotion,()=>new Date(e(l).time).toLocaleString()]),g(m,f)});var h=i(_,2);{var j=m=>{var l=wt(),c=o(l,!0);t(l),y(f=>n(c,f),[()=>r()("emotion.no_entries")]),g(m,l)},q=m=>{var l=xt(),c=o(l),f=i(c,2);t(l),L("click",c,Qe),L("click",f,Be),g(m,l)};T(h,m=>{e(M).length===0?m(j):m(q,!1)})}t(s),y(m=>n(d,`ðŸ““ ${m??""}`),[()=>r()("emotion.diary")]),de(3,s,()=>rt,()=>({x:300})),g(a,s)},Je=a=>{var s=Et(),v=o(s),d=o(v),_=o(d,!0);t(d);var h=i(d,2),j=o(h,!0);t(h);var q=i(h,2),m=o(q,!0);t(q),t(v);var l=i(v,2),c=o(l),f=o(c,!0);t(c);var S=i(c,2);U(S,21,()=>Ce,Z,(P,x)=>{var O=jt();let I;var K=o(O),G=o(K,!0);t(K);var te=i(K,2),We=o(te,!0);t(te),t(O),y((Ye,Ge)=>{I=ke(O,1,"body-part svelte-z58b2e",null,I,Ye),oe(O,`--zc: ${H[e(k).zone]??""}`),n(G,e(x)==="head"?"ðŸ§ ":e(x)==="face"?"ðŸ˜¶":e(x)==="chest"?"ðŸ’—":e(x)==="stomach"?"ðŸ«ƒ":e(x)==="arms"?"ðŸ’ª":e(x)==="hands"?"âœ‹":e(x)==="legs"?"ðŸ¦µ":"ðŸ§"),n(We,Ge)},[()=>({highlighted:e(me).includes(e(x))}),()=>r()("emotion.body."+e(x))]),g(P,O)}),t(S),t(l);var $=i(l,2),N=o($),D=o(N);t(N);var Y=i(N,2);U(Y,17,()=>e(k).strategies,Z,(P,x)=>{var O=qt(),I=o(O),K=o(I,!0);t(I),t(O),y(G=>n(K,G),[()=>r()(e(x))]),L("click",O,()=>J(r()(e(x)))),g(P,O)}),t($);var p=i($,2),b=o(p),w=o(b,!0);t(b);var A=i(b,2);it(A);var E=i(A,2),R=o(E,!0);t(E),t(p),t(s),y((P,x,O,I,K,G,te)=>{oe(v,`background: ${H[e(k).zone]??""}20`),n(_,e(k).emoji),n(j,P),oe(q,`background: ${H[e(k).zone]??""}; color: white`),n(m,x),n(f,O),n(D,`ðŸ’¡ ${I??""}`),n(w,K),xe(A,"placeholder",G),n(R,te)},[()=>r()(e(k).label),()=>r()(ce[e(k).zone]),()=>r()("emotion.where_feel"),()=>r()("emotion.strategies"),()=>r()("emotion.log_feeling"),()=>r()("emotion.note_placeholder"),()=>r()("emotion.log_btn")]),nt(A,()=>e(X),P=>u(X,P)),L("click",E,Ne),de(3,s,()=>we),g(a,s)},Ve=a=>{var s=Ct();U(s,20,()=>["green","yellow","orange","red"],Z,(v,d)=>{var _=Ot(),h=o(_),j=o(h,!0);t(h);var q=i(h,2);U(q,21,()=>Le(d),Z,(m,l)=>{var c=St(),f=o(c),S=o(f,!0);t(f);var $=i(f,2),N=o($,!0);t($),t(c),y(D=>{n(S,e(l).emoji),n(N,D)},[()=>r()(e(l).label)]),L("click",c,()=>Me(e(l))),Xe("focus",c,()=>J(r()(e(l).label))),g(m,c)}),t(q),t(_),y(m=>{oe(_,`--zc: ${H[d]??""}`),n(j,m)},[()=>r()(ce[d])]),g(v,_)}),t(s),g(a,s)};T(Te,a=>{e(V)?a(Ue):e(ae)?a(Ze,1):e(k)?a(Je,2):a(Ve,!1)})}at(2),t(ge),y((a,s)=>{xe(ne,"aria-label",a),n(Fe,s),n(Ie,e(V)?"ðŸ—ºï¸":"ðŸŽ¯")},[()=>r()("app.back"),()=>r()("emotion.title")]),L("click",ne,()=>e(k)?u(k,null):dt("/")),L("click",ee,()=>e(V)?Pe():De()),L("click",Ke,()=>{u(ae,!e(ae))}),g(qe,_e),ot(),Oe()}He(["click"]);export{Vt as component};
