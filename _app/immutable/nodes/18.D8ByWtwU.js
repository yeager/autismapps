import{d as ue,a as z,b as h,s as i,f as b}from"../chunks/Rl5oAaZp.js";import{ag as _e,ao as A,b as he,ap as fe,aq as G,s as f,an as ye,ah as y,ai as be,aj as s,ak as l,al as a,a as e,as as J}from"../chunks/5-o2xn5F.js";import{i as B}from"../chunks/CV8532PG.js";import{e as N,i as O}from"../chunks/CWjGmADL.js";import{t as xe,f as $e}from"../chunks/CYPR1nOs.js";import{s as Q}from"../chunks/mnwxxtgv.js";import{s as ke}from"../chunks/tEQK-CCT.js";import{s as $}from"../chunks/CttGtDdq.js";import{s as we,a as je}from"../chunks/1mwIFy_z.js";import{g as Le}from"../chunks/C7HAlxDp.js";import{W as Ce}from"../chunks/BIf6fDbj.js";import{t as Ee}from"../chunks/D-IBFiEI.js";import{s as De}from"../chunks/TeHBZhWf.js";import{a as Ke,b as Me}from"../chunks/B5a8mNDb.js";import{a as R}from"../chunks/CCIDKU4D.js";var Ie=b('<button><span class="lvl-emoji svelte-v8t122"> </span> <span class="lvl-num svelte-v8t122"> </span></button>'),Pe=b('<div class="thermo-fill svelte-v8t122"></div>'),Se=b('<div class="state-card svelte-v8t122"><span class="state-emoji svelte-v8t122"> </span> <h2 class="svelte-v8t122"> </h2> <div class="strategies svelte-v8t122"><h3 class="svelte-v8t122"> </h3> <p class="svelte-v8t122"> </p></div></div>'),Ae=b('<div class="history-dot svelte-v8t122"><span class="dot-emoji svelte-v8t122"> </span> <span class="dot-time svelte-v8t122"> </span></div>'),Be=b('<div class="history svelte-v8t122"><h3 class="svelte-v8t122"> </h3> <div class="history-row svelte-v8t122"></div></div>'),Fe=b('<!> <div class="energy-page svelte-v8t122"><header class="app-header svelte-v8t122"><button class="back-btn svelte-v8t122"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M15 18l-6-6 6-6"></path></svg></button> <h1 class="svelte-v8t122"> </h1></header> <div class="content svelte-v8t122"><p class="instruction svelte-v8t122"> </p> <div class="meter-area svelte-v8t122"><div class="thermometer svelte-v8t122"><div class="thermo-track svelte-v8t122"></div> <!></div> <!></div> <!></div> <footer class="credit svelte-v8t122"> </footer></div>',1);function Ze(U,X){_e(X,!0);const c=()=>je(Ee,"$t",Y),[Y,Z]=we(),k=[{level:1,emoji:"ðŸ˜´",color:"#3498DB",label:"energy.level.1",strategies:"energy.strat.1"},{level:2,emoji:"ðŸ˜Š",color:"#2ECC71",label:"energy.level.2",strategies:"energy.strat.2"},{level:3,emoji:"ðŸ˜„",color:"#F1C40F",label:"energy.level.3",strategies:"energy.strat.3"},{level:4,emoji:"ðŸ˜¤",color:"#E67E22",label:"energy.level.4",strategies:"energy.strat.4"},{level:5,emoji:"ðŸ¤¯",color:"#E74C3C",label:"energy.level.5",strategies:"energy.strat.5"}];let d=A(null),p=A(he([])),F=A(!1);fe(()=>{ee()});async function ee(){const t=G(R);if(t){const r=await Ke(t,"energy-meter");r&&(f(p,r.history||[],!0),f(d,r.currentLevel||null,!0))}}async function te(){const t=G(R);t&&await Me(t,"energy-meter",{history:e(p),currentLevel:e(d)})}function re(t){f(d,t,!0),f(F,!0);const r=k[t-1];De(`${c()(r.label)}`),f(p,[...e(p),{level:t,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}],!0),e(p).length>20&&f(p,e(p).slice(-20),!0),te()}function C(t){return k[t-1]||k[2]}function ae(t){return t/5*100}var W=Fe(),q=ye(W);Ce(q,{appId:"energy-meter",titleKey:"app.energy_meter",purposeKey:"welcome.energyMeter.purpose",howKey:"welcome.energyMeter.how",goalKey:"welcome.energyMeter.goal",icon:"ðŸ”‹"});var H=l(q,2),E=s(H),D=s(E),T=l(D,2),se=s(T,!0);a(T),a(E);var w=l(E,2),K=s(w),oe=s(K,!0);a(K);var M=l(K,2),I=s(M),P=s(I);N(P,21,()=>k.slice().reverse(),O,(t,r)=>{var o=Ie();let v;var u=s(o),n=s(u,!0);a(u);var m=l(u,2),_=s(m,!0);a(m),a(o),y(()=>{v=ke(o,1,"thermo-level svelte-v8t122",null,v,{active:e(d)===e(r).level}),$(o,`--lvl-color: ${e(r).color??""}`),i(n,e(r).emoji),i(_,e(r).level)}),z("click",o,()=>re(e(r).level)),h(t,o)}),a(P);var le=l(P,2);{var ve=t=>{var r=Pe();y((o,v)=>$(r,`height: ${o??""}%; background: ${v??""}`),[()=>ae(e(d)),()=>C(e(d)).color]),h(t,r)};B(le,t=>{e(d)&&t(ve)})}a(I);var ie=l(I,2);{var ne=t=>{const r=J(()=>C(e(d)));var o=Se(),v=s(o),u=s(v,!0);a(v);var n=l(v,2),m=s(n,!0);a(n);var _=l(n,2),g=s(_),x=s(g,!0);a(g);var j=l(g,2),L=s(j,!0);a(j),a(_),a(o),y((S,me,ge)=>{$(o,`border-color: ${e(r).color??""}`),i(u,e(r).emoji),$(n,`color: ${e(r).color??""}`),i(m,S),i(x,me),i(L,ge)},[()=>c()(e(r).label),()=>c()("energy.strategies"),()=>c()(e(r).strategies)]),h(t,o)};B(ie,t=>{e(d)&&e(F)&&t(ne)})}a(M);var ce=l(M,2);{var de=t=>{var r=Be(),o=s(r),v=s(o,!0);a(o);var u=l(o,2);N(u,21,()=>e(p),O,(n,m)=>{const _=J(()=>C(e(m).level));var g=Ae(),x=s(g),j=s(x,!0);a(x);var L=l(x,2),S=s(L,!0);a(L),a(g),y(()=>{$(g,`background: ${e(_).color??""}`),Q(g,"title",`${e(m).time??""}: ${e(m).level??""}`),i(j,e(_).emoji),i(S,e(m).time)}),h(n,g)}),a(u),a(r),y(n=>i(v,n),[()=>c()("energy.today")]),h(t,r)};B(ce,t=>{e(p).length>0&&t(de)})}a(w);var V=l(w,2),pe=s(V,!0);a(V),a(H),y((t,r,o,v)=>{Q(D,"aria-label",t),i(se,r),i(oe,o),i(pe,v)},[()=>c()("app.back"),()=>c()("energy.title"),()=>c()("energy.how_feeling"),()=>c()("energy.credit")]),z("click",D,()=>Le("/")),xe(3,w,()=>$e),h(U,W),be(),Z()}ue(["click"]);export{Ze as component};
