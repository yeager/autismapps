import{d as ce,a as _,b as k,s as u,f as $,t as Y}from"../chunks/Rl5oAaZp.js";import{ag as ue,ao as M,b as wt,ap as de,aq as Tt,s as v,an as $t,ah as b,ai as me,a as t,aj as s,ak as i,al as r,ar as Bt}from"../chunks/5-o2xn5F.js";import{i as O}from"../chunks/CV8532PG.js";import{e as Ct,i as Pt}from"../chunks/CWjGmADL.js";import{t as ot,f as vt}from"../chunks/CYPR1nOs.js";import{s as Z,r as nt}from"../chunks/mnwxxtgv.js";import{s as tt}from"../chunks/tEQK-CCT.js";import{s as pe}from"../chunks/CttGtDdq.js";import{b as lt}from"../chunks/Ch1I3Fei.js";import{s as fe,a as _e}from"../chunks/1mwIFy_z.js";import{g as ke}from"../chunks/C7HAlxDp.js";import{W as be}from"../chunks/BIf6fDbj.js";import{t as he}from"../chunks/D-IBFiEI.js";import{s as J}from"../chunks/TeHBZhWf.js";import{a as ge,b as xe}from"../chunks/B5a8mNDb.js";import{a as It}from"../chunks/CCIDKU4D.js";var ye=$('<button class="ctrl-btn work svelte-h83m8v"> </button> <button class="ctrl-btn break-btn svelte-h83m8v"> </button>',1),we=$('<button class="ctrl-btn stop svelte-h83m8v"> </button>'),Te=$('<div class="quick-park svelte-h83m8v"><input type="text" class="svelte-h83m8v"/> <button class="park-btn svelte-h83m8v">ðŸ’­</button></div>'),$e=$('<div class="timer-page svelte-h83m8v"><div class="current-task svelte-h83m8v"><span class="task-label svelte-h83m8v"> </span> <span class="task-name svelte-h83m8v"> </span></div> <div class="timer-ring svelte-h83m8v"><div class="timer-inner svelte-h83m8v"><span class="timer-time svelte-h83m8v"> </span> <span class="timer-state svelte-h83m8v"><!></span></div></div> <div class="timer-controls svelte-h83m8v"><!></div> <!></div>'),Be=$('<div><button class="check-btn svelte-h83m8v"> </button> <span class="task-text svelte-h83m8v"> </span> <button class="del-btn svelte-h83m8v" aria-label="Remove">âœ•</button></div>'),Ce=$('<p class="empty svelte-h83m8v"> </p>'),Pe=$('<div class="tasks-page svelte-h83m8v"><div class="add-row svelte-h83m8v"><input type="text" class="svelte-h83m8v"/> <button class="add-btn svelte-h83m8v">+</button></div> <div class="task-list svelte-h83m8v"><!> <!></div></div>'),Ie=$('<div class="parked-item svelte-h83m8v"><span class="svelte-h83m8v"> </span> <button class="del-btn svelte-h83m8v" aria-label="Remove">âœ•</button></div>'),Ae=$('<p class="empty svelte-h83m8v"> </p>'),Ee=$('<div class="parked-page svelte-h83m8v"><p class="parked-desc svelte-h83m8v"> </p> <div class="add-row svelte-h83m8v"><input type="text" class="svelte-h83m8v"/> <button class="add-btn svelte-h83m8v">+</button></div> <div class="parked-list svelte-h83m8v"><!> <!></div></div>'),Me=$('<!> <div class="focus-page svelte-h83m8v"><header class="app-header svelte-h83m8v"><button class="back-btn svelte-h83m8v"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M15 18l-6-6 6-6"></path></svg></button> <h1 class="svelte-h83m8v"> </h1> <span class="pomo-badge svelte-h83m8v"> </span></header> <nav class="tab-bar svelte-h83m8v"><button> </button> <button> </button> <button> </button></nav> <!> <footer class="credit svelte-h83m8v"> </footer></div>',1);function Qe(At,Et){ue(Et,!0);const o=()=>_e(he,"$t",Mt),[Mt,St]=fe();let it=25,ct=5,ut=15,qt=4,C=M("timer"),m=M("idle"),q=M(0),N=M(null),R=M(0),w=M(wt([])),z=M(""),S=M(wt([])),D=M("");de(()=>{Dt()});async function Dt(){const e=Tt(It);if(e){const a=await ge(e,"focus-buddy");a&&(v(w,a.tasks||[],!0),v(S,a.parked||[],!0),v(R,a.pomodoroCount||0,!0))}}async function U(){const e=Tt(It);e&&await xe(e,"focus-buddy",{tasks:t(w),parked:t(S),pomodoroCount:t(R)})}function Kt(e){const a=Math.floor(e/60),p=e%60;return`${a.toString().padStart(2,"0")}:${p.toString().padStart(2,"0")}`}function Wt(){Q(),v(m,"work"),v(q,it*60),dt(),J(o()("focus.work_start"))}function Lt(){Q();const e=t(R)>0&&t(R)%qt===0;v(m,e?"longbreak":"break",!0),v(q,(e?ut:ct)*60),dt(),J(e?o()("focus.long_break"):o()("focus.break_start"))}function dt(){v(N,setInterval(()=>{Bt(q,-1),t(q)<=0&&(Q(),Ut())},1e3),!0)}function Q(){t(N)&&(clearInterval(t(N)),v(N,null))}function Rt(){Q(),v(m,"idle"),v(q,0)}function Ut(){try{const e=new AudioContext,a=e.createOscillator();a.frequency.value=800,a.connect(e.destination),a.start(),setTimeout(()=>{a.stop(),e.close()},300)}catch{}t(m)==="work"?(Bt(R),J(o()("focus.work_done")),U(),v(m,"idle")):(J(o()("focus.break_done")),v(m,"idle"))}function jt(){if(t(m)==="idle")return 0;const e=t(m)==="work"?it*60:t(m)==="longbreak"?ut*60:ct*60;return e>0?(e-t(q))/e*100:0}function mt(){t(z).trim()&&(v(w,[...t(w),{id:crypto.randomUUID(),text:t(z).trim(),done:!1}],!0),v(z,""),U())}function Ot(e){v(w,t(w).map(a=>a.id===e?{...a,done:!a.done}:a),!0),U()}function zt(e){v(w,t(w).filter(a=>a.id!==e),!0),U()}function V(){t(D).trim()&&(v(S,[...t(S),t(D).trim()],!0),v(D,""),U(),J(o()("focus.thought_parked")))}function Ft(e){v(S,t(S).filter((a,p)=>p!==e),!0),U()}function Gt(){const e=t(w).filter(a=>!a.done);return e.length>0?e[0].text:o()("focus.no_tasks")}function Ht(){return t(m)==="work"?"#E74C3C":t(m)==="break"||t(m)==="longbreak"?"#27AE60":"#3498DB"}var pt=Me(),ft=$t(pt);be(ft,{appId:"focus-buddy",titleKey:"app.focus_buddy",purposeKey:"welcome.focusBuddy.purpose",howKey:"welcome.focusBuddy.how",goalKey:"welcome.focusBuddy.goal",icon:"ðŸŽ¯"});var _t=i(ft,2),et=s(_t),at=s(et),st=i(at,2),Jt=s(st,!0);r(st);var kt=i(st,2),Nt=s(kt);r(kt),r(et);var rt=i(et,2),F=s(rt);let bt;var Qt=s(F);r(F);var G=i(F,2);let ht;var Vt=s(G);r(G);var X=i(G,2);let gt;var Xt=s(X);r(X),r(rt);var xt=i(rt,2);{var Yt=e=>{var a=$e(),p=s(a),g=s(p),P=s(g);r(g);var x=i(g,2),j=s(x,!0);r(x),r(p);var I=i(p,2),K=s(I),f=s(K),y=s(f,!0);r(f);var d=i(f,2),h=s(d);{var B=n=>{var l=Y();b(c=>u(l,c),[()=>o()("focus.focus_time")]),k(n,l)},A=n=>{var l=Y();b(c=>u(l,c),[()=>o()("focus.break_time")]),k(n,l)},E=n=>{var l=Y();b(c=>u(l,c),[()=>o()("focus.long_break_time")]),k(n,l)},H=n=>{var l=Y();b(c=>u(l,c),[()=>o()("focus.ready")]),k(n,l)};O(h,n=>{t(m)==="work"?n(B):t(m)==="break"?n(A,1):t(m)==="longbreak"?n(E,2):n(H,!1)})}r(d),r(K),r(I);var W=i(I,2),ae=s(W);{var se=n=>{var l=ye(),c=$t(l),L=s(c);r(c);var T=i(c,2),ne=s(T);r(T),b((le,ie)=>{u(L,`â–¶ï¸ ${le??""}`),u(ne,`â˜• ${ie??""}`)},[()=>o()("focus.start_work"),()=>o()("focus.start_break")]),_("click",c,Wt),_("click",T,Lt),k(n,l)},re=n=>{var l=we(),c=s(l);r(l),b(L=>u(c,`â¹ï¸ ${L??""}`),[()=>o()("focus.stop")]),_("click",l,Rt),k(n,l)};O(ae,n=>{t(m)==="idle"?n(se):n(re,!1)})}r(W);var oe=i(W,2);{var ve=n=>{var l=Te(),c=s(l);nt(c);var L=i(c,2);r(l),b(T=>Z(c,"placeholder",T),[()=>o()("focus.quick_thought")]),_("keydown",c,T=>{T.key==="Enter"&&V()}),lt(c,()=>t(D),T=>v(D,T)),_("click",L,V),k(n,l)};O(oe,n=>{t(m)==="work"&&n(ve)})}r(a),b((n,l,c,L,T)=>{u(P,`${n??""}:`),u(j,l),pe(I,`--progress: ${c??""}; --color: ${L??""}`),u(y,T)},[()=>o()("focus.working_on"),Gt,jt,Ht,()=>Kt(t(q))]),ot(3,a,()=>vt),k(e,a)},Zt=e=>{var a=Pe(),p=s(a),g=s(p);nt(g);var P=i(g,2);r(p);var x=i(p,2),j=s(x);Ct(j,17,()=>t(w),Pt,(f,y)=>{var d=Be();let h;var B=s(d),A=s(B,!0);r(B);var E=i(B,2),H=s(E,!0);r(E);var W=i(E,2);r(d),b(()=>{h=tt(d,1,"task-item svelte-h83m8v",null,h,{done:t(y).done}),u(A,t(y).done?"âœ…":"â¬œ"),u(H,t(y).text)}),_("click",B,()=>Ot(t(y).id)),_("click",W,()=>zt(t(y).id)),k(f,d)});var I=i(j,2);{var K=f=>{var y=Ce(),d=s(y,!0);r(y),b(h=>u(d,h),[()=>o()("focus.no_tasks_yet")]),k(f,y)};O(I,f=>{t(w).length===0&&f(K)})}r(x),r(a),b(f=>Z(g,"placeholder",f),[()=>o()("focus.add_task")]),_("keydown",g,f=>{f.key==="Enter"&&mt()}),lt(g,()=>t(z),f=>v(z,f)),_("click",P,mt),ot(3,a,()=>vt),k(e,a)},te=e=>{var a=Ee(),p=s(a),g=s(p,!0);r(p);var P=i(p,2),x=s(P);nt(x);var j=i(x,2);r(P);var I=i(P,2),K=s(I);Ct(K,17,()=>t(S),Pt,(d,h,B)=>{var A=Ie(),E=s(A),H=s(E);r(E);var W=i(E,2);r(A),b(()=>u(H,`ðŸ’­ ${t(h)??""}`)),_("click",W,()=>Ft(B)),k(d,A)});var f=i(K,2);{var y=d=>{var h=Ae(),B=s(h,!0);r(h),b(A=>u(B,A),[()=>o()("focus.no_parked")]),k(d,h)};O(f,d=>{t(S).length===0&&d(y)})}r(I),r(a),b((d,h)=>{u(g,d),Z(x,"placeholder",h)},[()=>o()("focus.parked_desc"),()=>o()("focus.add_thought")]),_("keydown",x,d=>{d.key==="Enter"&&V()}),lt(x,()=>t(D),d=>v(D,d)),_("click",j,V),ot(3,a,()=>vt),k(e,a)};O(xt,e=>{t(C)==="timer"?e(Yt):t(C)==="tasks"?e(Zt,1):t(C)==="parked"&&e(te,2)})}var yt=i(xt,2),ee=s(yt,!0);r(yt),r(_t),b((e,a,p,g,P,x)=>{Z(at,"aria-label",e),u(Jt,a),u(Nt,`ðŸ… ${t(R)??""}`),bt=tt(F,1,"tab svelte-h83m8v",null,bt,{active:t(C)==="timer"}),u(Qt,`â±ï¸ ${p??""}`),ht=tt(G,1,"tab svelte-h83m8v",null,ht,{active:t(C)==="tasks"}),u(Vt,`ðŸ“‹ ${g??""}`),gt=tt(X,1,"tab svelte-h83m8v",null,gt,{active:t(C)==="parked"}),u(Xt,`ðŸ’­ ${P??""}`),u(ee,x)},[()=>o()("app.back"),()=>o()("focus.title"),()=>o()("focus.timer"),()=>o()("focus.tasks"),()=>o()("focus.parked"),()=>o()("focus.credit")]),_("click",at,()=>ke("/")),_("click",F,()=>v(C,"timer")),_("click",G,()=>v(C,"tasks")),_("click",X,()=>v(C,"parked")),k(At,pt),me(),St()}ce(["click","keydown"]);export{Qe as component};
