import{d as xt,a as c,b as h,s as j,f as x,e as le,c as qe}from"../chunks/Rl5oAaZp.js";import{ag as St,ao as k,b as ne,ap as It,an as We,ah as $,a as e,ai as $t,s as a,aj as n,ak as l,al as r,as as Fe,aq as Re,ar as Le}from"../chunks/5-o2xn5F.js";import{i as N}from"../chunks/CV8532PG.js";import{e as oe,i as ve}from"../chunks/CWjGmADL.js";import{s as C,r as be}from"../chunks/mnwxxtgv.js";import{s as Dt}from"../chunks/tEQK-CCT.js";import{s as Ot}from"../chunks/CttGtDdq.js";import{b as he}from"../chunks/Ch1I3Fei.js";import{s as Bt,a as Et}from"../chunks/1mwIFy_z.js";import{t as Tt,l as Kt}from"../chunks/D-IBFiEI.js";import{W as Mt}from"../chunks/BIf6fDbj.js";import{s as F,a as Nt}from"../chunks/TeHBZhWf.js";import{s as Ct}from"../chunks/gbT3kRQG.js";import{e as Ut,f as Wt,h as Ft}from"../chunks/B5a8mNDb.js";var Rt=x('<div class="saved-item svelte-1j0fvg2"><button class="saved-btn svelte-1j0fvg2"> </button> <button class="delete-btn svelte-1j0fvg2">‚úï</button></div>'),Lt=x('<p class="muted svelte-1j0fvg2">No schedules yet</p>'),qt=x('<div class="panel svelte-1j0fvg2"><h3 class="svelte-1j0fvg2"> </h3> <!></div>'),zt=x('<button class="picto-item svelte-1j0fvg2"><img width="60" height="60" loading="lazy" class="svelte-1j0fvg2"/> <span class="svelte-1j0fvg2"> </span></button>'),At=x('<div class="picto-results svelte-1j0fvg2"></div>'),Ht=x('<div class="search-area svelte-1j0fvg2"><p class="search-label svelte-1j0fvg2"> </p> <div class="search-row svelte-1j0fvg2"><input type="search" class="svelte-1j0fvg2"/> <button class="btn primary svelte-1j0fvg2"> </button> <button class="btn svelte-1j0fvg2">‚úï</button></div> <!> <div class="search-row svelte-1j0fvg2"><input type="text" placeholder="Or type activity name..." class="svelte-1j0fvg2"/> <button class="btn svelte-1j0fvg2">‚ûï</button></div></div>'),Pt=x('<button class="btn timer-btn svelte-1j0fvg2">‚àí</button> <button class="btn timer-btn svelte-1j0fvg2">+</button> <button class="btn primary svelte-1j0fvg2">‚ñ∂</button>',1),Qt=x('<button class="btn danger svelte-1j0fvg2">‚è∏</button>'),Gt=x('<span class="now-badge svelte-1j0fvg2"> </span>'),Jt=qe('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svelte-1j0fvg2"><path d="M20 6L9 17l-5-5" class="svelte-1j0fvg2"></path></svg>'),Vt=qe('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--border)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1j0fvg2"><circle cx="12" cy="12" r="10" class="svelte-1j0fvg2"></circle></svg>'),Xt=x('<img width="56" height="56" class="item-picto svelte-1j0fvg2"/>'),Yt=x('<span class="item-time svelte-1j0fvg2"> </span>'),Zt=x('<div draggable="true" role="listitem"><!> <span class="drag-handle no-print svelte-1j0fvg2" aria-hidden="true">‚†ø</span> <button class="check-btn svelte-1j0fvg2"><!></button> <!> <span class="item-label svelte-1j0fvg2" role="button" tabindex="0"> </span> <!> <div class="item-actions no-print svelte-1j0fvg2"><button class="icon-btn svelte-1j0fvg2" aria-label="Speak">üîä</button> <button class="icon-btn svelte-1j0fvg2" aria-label="Set as now">üìç</button> <button class="icon-btn danger svelte-1j0fvg2" aria-label="Remove">‚úï</button></div></div>'),ea=x('<p class="empty-section svelte-1j0fvg2"> </p>'),ta=x('<div class="section svelte-1j0fvg2"><div class="section-header svelte-1j0fvg2"><span class="section-emoji svelte-1j0fvg2"> </span> <h3 class="svelte-1j0fvg2"> </h3> <button class="add-btn no-print svelte-1j0fvg2"> </button></div> <div class="items-list svelte-1j0fvg2"></div></div>'),aa=x('<!> <div class="schedule-app svelte-1j0fvg2"><div class="schedule-toolbar no-print svelte-1j0fvg2"><h2 class="svelte-1j0fvg2"> </h2> <div class="toolbar-row svelte-1j0fvg2"><input type="text" class="name-input svelte-1j0fvg2"/> <button class="btn primary svelte-1j0fvg2"> </button> <button class="btn svelte-1j0fvg2"> </button> <button class="btn svelte-1j0fvg2"> </button></div> <!> <!> <div class="timer-section svelte-1j0fvg2"><span class="timer-label svelte-1j0fvg2">‚è±Ô∏è</span> <span class="timer-display svelte-1j0fvg2"> </span> <!> <button class="btn svelte-1j0fvg2">‚Üª</button></div></div> <div class="schedule-sections svelte-1j0fvg2"></div></div>',1);function _a(ze,Ae){St(Ae,!0);const m=()=>Et(Tt,"$t",He),[He,Pe]=Bt();let G=k(""),d=k(ne([])),U=k(""),R=k(ne([])),J=k(!1),S=k(null),je=k(ne([])),V=k(!1),X=k(-1),I=k(null),L=k(null),z=k(ne(new Set)),E=k(5),A=k(0),Y=k(!1),Z=k(null);const ke=[{key:"morning",emoji:"üåÖ"},{key:"afternoon",emoji:"‚òÄÔ∏è"},{key:"evening",emoji:"üåô"}];function ye(t){return e(d).filter(s=>s.section===t)}async function we(){if(!e(U).trim())return;a(J,!0);const t=Re(Kt);a(R,await Ct(e(U),t),!0),a(J,!1)}function Qe(t){if(!e(S))return;const s=Re(Nt),i={index:e(d).length,pictogramId:t.id,pictogramUrl:s?t.urlBW:t.url,label:t.keyword,completed:!1,section:e(S)};a(d,[...e(d),i],!0),F(t.keyword),a(S,null),a(U,""),a(R,[],!0)}function xe(t,s){if(!s.trim())return;const i={index:e(d).length,label:s.trim(),completed:!1,section:t};a(d,[...e(d),i],!0),F(s)}function Ge(t){if(t.completed=!t.completed,a(d,[...e(d)],!0),t.completed){const s=e(d).indexOf(t);a(z,new Set([...e(z),s]),!0),setTimeout(()=>{a(z,new Set([...e(z)].filter(i=>i!==s)),!0)},600),F(m()("schedule.done"))}}function Je(t){a(d,e(d).filter(s=>s!==t),!0)}function ie(t){F(t.label)}function Ve(t){a(X,t,!0);const s=e(d)[t];s&&F(m()("schedule.now")+": "+s.label)}function Xe(){const t=new Date().getHours();let s="morning";t>=12&&t<17?s="afternoon":t>=17&&(s="evening");const u=ye(s).find(_=>!_.completed);u&&a(X,e(d).indexOf(u),!0)}function Ye(t){a(I,t,!0)}function Ze(t,s){t.preventDefault(),a(L,s,!0)}function et(t,s){if(t.preventDefault(),!e(I)||e(I)===s){a(I,null),a(L,null);return}if(e(I).section!==s.section){a(I,null),a(L,null);return}const i=e(I).section,u=e(d).filter(y=>y.section===i);e(d).filter(y=>y.section!==i);const _=u.indexOf(e(I)),p=u.indexOf(s);_!==-1&&p!==-1&&(u.splice(_,1),u.splice(p,0,e(I)));const f=[];for(const y of ke)y.key===i?f.push(...u):f.push(...e(d).filter(D=>D.section===y.key));a(d,f,!0),a(I,null),a(L,null)}function tt(){a(I,null),a(L,null)}function at(){e(Y)||(a(Y,!0),a(Z,setInterval(()=>{e(A)>0?Le(A,-1):e(E)>0?(Le(E,-1),a(A,59)):(ce(),F(m()("schedule.done")))},1e3),!0))}function ce(){a(Y,!1),e(Z)&&(clearInterval(e(Z)),a(Z,null))}function st(){ce(),a(E,5),a(A,0)}async function rt(){const t={name:e(G)||m()("schedule.today"),date:new Date().toISOString().split("T")[0],items:[...e(d)],createdAt:new Date};await Wt(t),F(m()("board.save")),await ee()}async function ee(){a(je,await Ut(),!0)}function lt(t){a(G,t.name,!0),a(d,[...t.items],!0),a(V,!1),Xe()}async function nt(t){await Ft(t),await ee()}function ot(){window.print()}let T=k("");It(()=>{ee()});var Se=aa(),Ie=We(Se);Mt(Ie,{appId:"picture-schedule",titleKey:"app.picture_schedule",purposeKey:"welcome.pictureSchedule.purpose",howKey:"welcome.pictureSchedule.how",goalKey:"welcome.pictureSchedule.goal",icon:"üñºÔ∏è"});var $e=l(Ie,2),ue=n($e),de=n(ue),vt=n(de,!0);r(de);var fe=l(de,2),te=n(fe);be(te);var ae=l(te,2),it=n(ae);r(ae);var se=l(ae,2),ct=n(se);r(se);var pe=l(se,2),ut=n(pe);r(pe),r(fe);var De=l(fe,2);{var dt=t=>{var s=qt(),i=n(s),u=n(i,!0);r(i);var _=l(i,2);oe(_,17,()=>e(je),ve,(p,f)=>{var y=Rt(),D=n(y),K=n(D);r(D);var H=l(D,2);r(y),$(()=>j(K,`${e(f).name??""} ‚Äî ${e(f).date??""}`)),c("click",D,()=>lt(e(f))),c("click",H,()=>e(f).id&&nt(e(f).id)),h(p,y)},p=>{var f=Lt();h(p,f)}),r(s),$(p=>j(u,p),[()=>m()("schedule.my_schedules")]),h(t,s)};N(De,t=>{e(V)&&t(dt)})}var Oe=l(De,2);{var ft=t=>{var s=Ht(),i=n(s),u=n(i);r(i);var _=l(i,2),p=n(_);be(p);var f=l(p,2),y=n(f,!0);r(f);var D=l(f,2);r(_);var K=l(_,2);{var H=g=>{var w=At();oe(w,21,()=>e(R),ve,(q,M)=>{var W=zt(),B=n(W),re=l(B,2),me=n(re,!0);r(re),r(W),$(()=>{C(W,"title",e(M).keyword),C(B,"src",e(M).url),C(B,"alt",e(M).keyword),j(me,e(M).keyword)}),c("click",W,()=>Qe(e(M))),h(q,W)}),r(w),h(g,w)};N(K,g=>{e(R).length>0&&g(H)})}var P=l(K,2),O=n(P);be(O);var o=l(O,2);r(P),r(s),$((g,w,q)=>{j(u,`${g??""} ‚Äî ${w??""}`),C(p,"placeholder",q),f.disabled=e(J),j(y,e(J)?"...":"üîç")},[()=>m()("schedule.add_activity"),()=>m()(`schedule.${e(S)}`),()=>m()("board.search_pictograms")]),c("keydown",p,g=>{g.key==="Enter"&&we()}),he(p,()=>e(U),g=>a(U,g)),c("click",f,we),c("click",D,()=>{a(S,null),a(R,[],!0),a(U,"")}),c("keydown",O,g=>{g.key==="Enter"&&e(T).trim()&&e(S)&&(xe(e(S),e(T)),a(T,""),a(S,null))}),he(O,()=>e(T),g=>a(T,g)),c("click",o,()=>{e(T).trim()&&e(S)&&(xe(e(S),e(T)),a(T,""),a(S,null))}),h(t,s)};N(Oe,t=>{e(S)&&t(ft)})}var Be=l(Oe,2),ge=l(n(Be),2),pt=n(ge);r(ge);var Ee=l(ge,2);{var gt=t=>{var s=Pt(),i=We(s),u=l(i,2),_=l(u,2);c("click",i,()=>{a(E,Math.max(1,e(E)-1),!0)}),c("click",u,()=>{a(E,Math.min(60,e(E)+1),!0)}),c("click",_,at),h(t,s)},mt=t=>{var s=Qt();c("click",s,ce),h(t,s)};N(Ee,t=>{e(Y)?t(mt,!1):t(gt)})}var _t=l(Ee,2);r(Be),r(ue);var Te=l(ue,2);oe(Te,21,()=>ke,ve,(t,s)=>{const i=Fe(()=>ye(e(s).key));var u=ta(),_=n(u),p=n(_),f=n(p,!0);r(p);var y=l(p,2),D=n(y,!0);r(y);var K=l(y,2),H=n(K);r(K),r(_);var P=l(_,2);oe(P,21,()=>e(i),ve,(O,o)=>{const g=Fe(()=>e(d).indexOf(e(o)));var w=Zt();let q;var M=n(w);{var W=v=>{var b=Gt(),_e=n(b,!0);r(b),$(wt=>j(_e,wt),[()=>m()("schedule.now")]),h(v,b)};N(M,v=>{e(g)===e(X)&&v(W)})}var B=l(M,4),re=n(B);{var me=v=>{var b=Jt();h(v,b)},bt=v=>{var b=Vt();h(v,b)};N(re,v=>{e(o).completed?v(me):v(bt,!1)})}r(B);var Ke=l(B,2);{var ht=v=>{var b=Xt();$(()=>{C(b,"src",e(o).pictogramUrl),C(b,"alt",e(o).label)}),h(v,b)};N(Ke,v=>{e(o).pictogramUrl&&v(ht)})}var Q=l(Ke,2),jt=n(Q,!0);r(Q);var Me=l(Q,2);{var kt=v=>{var b=Yt(),_e=n(b,!0);r(b),$(()=>j(_e,e(o).time)),h(v,b)};N(Me,v=>{e(o).time&&v(kt)})}var Ne=l(Me,2),Ce=n(Ne),Ue=l(Ce,2),yt=l(Ue,2);r(Ne),r(w),$((v,b)=>{q=Dt(w,1,"schedule-item svelte-1j0fvg2",null,q,v),C(B,"aria-label",b),j(jt,e(o).label)},[()=>({completed:e(o).completed,"is-now":e(g)===e(X),"drag-over":e(L)===e(o),"just-completed":e(z).has(e(g))}),()=>e(o).completed?m()("schedule.done"):"Mark done"]),le("dragstart",w,()=>Ye(e(o))),le("dragover",w,v=>Ze(v,e(o))),le("drop",w,v=>et(v,e(o))),le("dragend",w,tt),c("click",B,()=>Ge(e(o))),c("click",Q,()=>ie(e(o))),c("keydown",Q,v=>{v.key==="Enter"&&ie(e(o))}),c("click",Ce,()=>ie(e(o))),c("click",Ue,()=>Ve(e(g))),c("click",yt,()=>Je(e(o))),h(O,w)},O=>{var o=ea(),g=n(o,!0);r(o),$(w=>j(g,w),[()=>m()("schedule.add_activity")]),h(O,o)}),r(P),r(u),$((O,o)=>{Ot(u,`--section-color: ${e(s).key==="morning"?"#F59E0B":e(s).key==="afternoon"?"#3B82F6":"#8B5CF6"}`),j(f,e(s).emoji),j(D,O),j(H,`+ ${o??""}`)},[()=>m()(`schedule.${e(s).key}`),()=>m()("schedule.add_activity")]),c("click",K,()=>{a(S,e(s).key,!0),a(R,[],!0),a(U,"")}),h(t,u)}),r(Te),r($e),$((t,s,i,u,_,p,f)=>{j(vt,t),C(te,"placeholder",s),j(it,`üíæ ${i??""}`),j(ct,`üñ®Ô∏è ${u??""}`),j(ut,`üìÇ ${_??""}`),j(pt,`${p??""}:${f??""}`)},[()=>m()("schedule.title"),()=>m()("schedule.today"),()=>m()("board.save"),()=>m()("schedule.print"),()=>m()("schedule.my_schedules"),()=>String(e(E)).padStart(2,"0"),()=>String(e(A)).padStart(2,"0")]),he(te,()=>e(G),t=>a(G,t)),c("click",ae,rt),c("click",se,ot),c("click",pe,()=>{a(V,!e(V)),ee()}),c("click",_t,st),h(ze,Se),$t(),Pe()}xt(["click","keydown"]);export{_a as component};
