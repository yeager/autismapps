import{d as va,a as S,b as m,s as v,f as _}from"../chunks/Rl5oAaZp.js";import{ag as ca,ao as w,b as pa,ap as da,aq as j,s as p,an as ga,ah as f,ai as ha,a as t,ak as l,as as ma,aj as s,al as r,am as fa,ar as _a}from"../chunks/5-o2xn5F.js";import{i as B}from"../chunks/CV8532PG.js";import{e as G,i as N}from"../chunks/CWjGmADL.js";import{t as O,f as Y}from"../chunks/CYPR1nOs.js";import{s as ua}from"../chunks/tEQK-CCT.js";import{s as wa}from"../chunks/CttGtDdq.js";import{s as qa,a as ba}from"../chunks/1mwIFy_z.js";import{g as ya}from"../chunks/C7HAlxDp.js";import{W as ka}from"../chunks/BIf6fDbj.js";import{t as Ca}from"../chunks/D-IBFiEI.js";import{s as z}from"../chunks/TeHBZhWf.js";import{a as xa,b as $a}from"../chunks/B5a8mNDb.js";import{a as F}from"../chunks/CCIDKU4D.js";var Aa=_("<span> </span>"),Sa=_('<button class="goal-btn svelte-18nq81g"><span class="goal-icon svelte-18nq81g"> </span> <span class="goal-text svelte-18nq81g"> </span></button>'),Ka=_('<button class="reset-btn svelte-18nq81g"> </button>'),Pa=_('<div class="celebration svelte-18nq81g"><span class="big svelte-18nq81g">ğŸ‰ğŸ†ğŸ‰</span> <p class="svelte-18nq81g"> </p></div>'),Ra=_('<!> <div class="app svelte-18nq81g"><header class="hdr svelte-18nq81g"><button class="back svelte-18nq81g">â†</button> <h1 class="svelte-18nq81g"> </h1> <span class="star-count svelte-18nq81g"> </span></header> <main class="cnt svelte-18nq81g"><div class="progress-bar svelte-18nq81g"><div class="fill svelte-18nq81g"></div> <span class="progress-text svelte-18nq81g"> </span></div> <div class="star-display svelte-18nq81g"></div> <h2 class="svelte-18nq81g"> </h2> <div class="goals svelte-18nq81g"></div> <!> <!></main> <footer class="cr svelte-18nq81g"><p class="svelte-18nq81g">Autismappar Â· CC BY-NC-SA 4.0</p></footer></div>',1);function Fa(H,J){ca(J,!0);const c=()=>ba(Ca,"$t",Q),[Q,U]=qa(),V=[{icon:"ğŸ§¹",key:"rewardChart.goal.tidy"},{icon:"ğŸª¥",key:"rewardChart.goal.brush"},{icon:"ğŸ“š",key:"rewardChart.goal.homework"},{icon:"ğŸ¥—",key:"rewardChart.goal.eat"},{icon:"ğŸ‘•",key:"rewardChart.goal.dress"},{icon:"ğŸ˜Š",key:"rewardChart.goal.kind"}];let i=w(0),d=w(10),h=w(pa([])),q=w(!1);da(()=>{const a=j(F);a&&xa(a,"reward-chart").then(e=>{e&&(p(i,e.stars||0,!0),p(d,e.goal||10,!0),p(h,e.history||[],!0))})});function K(){const a=j(F);a&&$a(a,"reward-chart",{stars:t(i),goal:t(d),history:t(h)})}function X(a){_a(i),p(h,[...t(h),{reason:c()(a.key),time:new Date().toLocaleString(),icon:a.icon}],!0),z(`${a.icon} ${c()(a.key)}! â­`),t(i)>=t(d)&&(p(q,!0),z(c()("rewardChart.goalReached")),setTimeout(()=>{p(q,!1)},4e3)),K()}function Z(){p(i,0),p(h,[],!0),K()}let P=ma(()=>Math.min(100,t(i)/t(d)*100));var R=Ra(),D=ga(R);ka(D,{appId:"reward-chart",titleKey:"app.reward_chart",purposeKey:"welcome.rewardChart.purpose",howKey:"welcome.rewardChart.how",goalKey:"welcome.rewardChart.goal",icon:"â­"});var b=l(D,2),y=s(b),E=s(y),k=l(E,2),aa=s(k);r(k);var I=l(k,2),ea=s(I);r(I),r(y);var L=l(y,2),C=s(L),M=s(C),T=l(M,2),ta=s(T);r(T),r(C);var x=l(C,2);G(x,21,()=>Array(t(d)),N,(a,e,o)=>{var n=Aa();let g;var u=s(n,!0);r(n),f(()=>{g=ua(n,1,"star svelte-18nq81g",null,g,{earned:o<t(i)}),v(u,o<t(i)?"â­":"â˜†")}),m(a,n)}),r(x);var $=l(x,2),ra=s($,!0);r($);var A=l($,2);G(A,21,()=>V,N,(a,e)=>{var o=Sa(),n=s(o),g=s(n,!0);r(n);var u=l(n,2),la=s(u,!0);r(u),r(o),f(ia=>{v(g,t(e).icon),v(la,ia)},[()=>c()(t(e).key)]),S("click",o,()=>X(t(e))),m(a,o)}),r(A);var W=l(A,2);{var sa=a=>{var e=Ka(),o=s(e);r(e),f(n=>v(o,`ğŸ”„ ${n??""}`),[()=>c()("rewardChart.newChart")]),S("click",e,Z),m(a,e)};B(W,a=>{t(i)>=t(d)&&a(sa)})}var oa=l(W,2);{var na=a=>{var e=Pa(),o=l(s(e),2),n=s(o,!0);r(o),r(e),f(g=>v(n,g),[()=>c()("rewardChart.goalReached")]),O(1,e,()=>Y),m(a,e)};B(oa,a=>{t(q)&&a(na)})}r(L),fa(2),r(b),f((a,e,o)=>{v(aa,`â­ ${a??""}`),v(ea,`${t(i)??""}/${t(d)??""}`),wa(M,`width: ${t(P)??""}%`),v(ta,`${e??""}%`),v(ra,o)},[()=>c()("rewardChart.title"),()=>Math.round(t(P)),()=>c()("rewardChart.earnStar")]),S("click",E,()=>ya("/")),O(1,b,()=>Y),m(H,R),ha(),U()}va(["click"]);export{Fa as component};
