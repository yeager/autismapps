import{d as wt,a as _,b as m,s as v,f,e as xt}from"../chunks/Rl5oAaZp.js";import{ag as Et,ao as q,b as me,ap as Bt,an as Ct,ah as k,a as e,ai as $t,s as i,ak as c,aj as o,aq as X,al as s}from"../chunks/5-o2xn5F.js";import{i as K}from"../chunks/CV8532PG.js";import{e as I,i as A}from"../chunks/CWjGmADL.js";import{s as E,r as Y}from"../chunks/mnwxxtgv.js";import{s as fe}from"../chunks/tEQK-CCT.js";import{s as N}from"../chunks/CttGtDdq.js";import{b as Z}from"../chunks/Ch1I3Fei.js";import{s as St,a as Kt}from"../chunks/1mwIFy_z.js";import{t as Tt,l as We}from"../chunks/D-IBFiEI.js";import{W as It}from"../chunks/BIf6fDbj.js";import{s as ge,a as ze}from"../chunks/TeHBZhWf.js";import{s as Fe}from"../chunks/gbT3kRQG.js";import{g as At,s as Pt,d as Dt}from"../chunks/B5a8mNDb.js";var Lt=f("<button> </button>"),Ut=f("<button></button>"),Wt=f('<button class="picto-item svelte-16y2cqy"><img width="60" height="60" loading="lazy" class="svelte-16y2cqy"/> <span class="svelte-16y2cqy"> </span></button>'),zt=f('<div class="picto-results svelte-16y2cqy"></div>'),Ft=f('<p class="no-results svelte-16y2cqy"> </p>'),Ht=f('<button class="template-item svelte-16y2cqy"><span class="template-dot svelte-16y2cqy"></span> </button>'),Mt=f('<div class="panel svelte-16y2cqy"><h3 class="svelte-16y2cqy"> </h3> <!></div>'),Nt=f('<div class="saved-board-item svelte-16y2cqy"><button class="saved-board-btn svelte-16y2cqy"><span class="template-dot svelte-16y2cqy"></span> </button> <button class="delete-btn svelte-16y2cqy">âœ•</button></div>'),Ot=f('<p class="no-results svelte-16y2cqy">No saved boards yet</p>'),Gt=f('<div class="panel svelte-16y2cqy"><h3 class="svelte-16y2cqy"> </h3> <!></div>'),Rt=f('<div class="board-center svelte-16y2cqy"><span class="center-label svelte-16y2cqy"> </span></div>'),jt=f('<img loading="lazy" class="svelte-16y2cqy"/>'),Qt=f('<input class="label-edit svelte-16y2cqy" type="text"/>'),Jt=f('<span class="cell-label svelte-16y2cqy"> </span>'),Vt=f('<span class="cell-placeholder svelte-16y2cqy">+</span>'),Xt=f('<span class="cell-clear svelte-16y2cqy" role="button" tabindex="0">âœ•</span>'),Yt=f("<button><!> <!> <!></button>"),Zt=f('<!> <div class="board-builder svelte-16y2cqy"><div class="builder-sidebar svelte-16y2cqy"><div class="toolbar svelte-16y2cqy"><h2 class="svelte-16y2cqy"> </h2> <div class="field svelte-16y2cqy"><label for="board-name" class="svelte-16y2cqy"> </label> <input id="board-name" type="text" placeholder="My Board" class="svelte-16y2cqy"/></div> <div class="field svelte-16y2cqy"><label for="center-title" class="svelte-16y2cqy"> </label> <input id="center-title" type="text" class="svelte-16y2cqy"/></div> <div class="field svelte-16y2cqy"><span id="grid-size-label"> </span> <div class="grid-options svelte-16y2cqy"></div></div> <div class="field svelte-16y2cqy"><span id="cat-color-label"> </span> <div class="color-options svelte-16y2cqy"></div></div> <div class="field svelte-16y2cqy"><label for="picto-search" class="svelte-16y2cqy"> </label> <div class="search-input svelte-16y2cqy"><input id="picto-search" type="search" class="svelte-16y2cqy"/> <button class="search-go svelte-16y2cqy"> </button></div></div> <!> <div class="actions svelte-16y2cqy"><button class="btn primary svelte-16y2cqy"> </button> <button class="btn svelte-16y2cqy"> </button> <button class="btn svelte-16y2cqy"> </button> <button class="btn svelte-16y2cqy"> </button> <button class="btn svelte-16y2cqy"> </button></div> <!> <!></div></div> <div class="builder-main svelte-16y2cqy"><div class="board-grid svelte-16y2cqy"><!> <!></div></div></div>',1);function pa(He,Me){Et(Me,!0);const u=()=>Kt(Tt,"$t",Ne),[Ne,Oe]=St();let $=q(4),P=q(""),S=q(""),T=q("#E67E22"),h=q(me(te(4))),D=q(""),ee=q(me([])),L=q(!1),B=q(null),he=q(me([])),U=q(!1),W=q(!1),z=q(null),O=q("");const Ge=[3,4,5,6],Re=["#E67E22","#3498DB","#27AE60","#9B59B6","#F1C40F","#E74C3C","#1ABC9C","#E91E63"];function te(t){return Array.from({length:t*t},(a,r)=>({index:r,label:"",isEmpty:!0}))}function je(t){i($,t,!0),i(h,te(t),!0)}async function qe(){if(!e(D).trim())return;i(L,!0);const t=X(We);i(ee,await Fe(e(D),t),!0),i(L,!1)}function Qe(t){i(B,t,!0),e(h)[t].isEmpty||ge(e(h)[t].label)}function Je(t){if(e(B)===null){const l=e(h).findIndex(n=>n.isEmpty);if(l===-1)return;i(B,l,!0)}const a=X(ze);e(h)[e(B)]={index:e(B),pictogramId:t.id,pictogramUrl:a?t.urlBW:t.url,label:t.keyword,isEmpty:!1},ge(t.keyword);const r=e(h).findIndex((l,n)=>n>e(B)&&l.isEmpty);i(B,r>=0?r:null,!0)}function ke(t){e(h)[t]={index:t,label:"",isEmpty:!0}}function Ve(t){i(z,t,!0),i(O,e(h)[t].label,!0)}function we(){e(z)!==null&&(e(h)[e(z)].label=e(O),i(z,null))}async function Xe(){const t={name:e(P)||"Untitled",category:"custom",gridSize:e($),cells:[...e(h)],centerTitle:e(S),categoryColor:e(T),createdAt:new Date,updatedAt:new Date};await Pt(t),ge(u()("board.save")),await G()}async function G(){i(he,await At(),!0)}function Ye(t){i(P,t.name,!0),i($,t.gridSize,!0),i(h,t.cells,!0),i(S,t.centerTitle||"",!0),i(T,t.categoryColor,!0),i(U,!1)}async function Ze(t){await Dt(t),await G()}function xe(){window.print()}function et(){xe()}const tt=[{name:"Home",titleKey:"Home",color:"#E67E22",keywords:["cook","wash","clean","sleep","eat","drink","sit","play","read","shower","dress","toilet","brush teeth","watch tv","rest","help"]},{name:"School",titleKey:"School",color:"#3498DB",keywords:["read","write","draw","sing","count","play","eat","drink","listen","speak","work","rest","gym","computer","friend","teacher"]},{name:"Food",titleKey:"Food",color:"#27AE60",keywords:["water","milk","juice","bread","apple","banana","rice","pasta","chicken","fish","egg","cheese","yogurt","cookie","ice cream","soup"]},{name:"Emotions",titleKey:"Emotions",color:"#9B59B6",keywords:["happy","sad","angry","scared","tired","hungry","thirsty","pain","love","surprise","calm","excited","worried","proud","shy","bored"]},{name:"Hygiene",titleKey:"Hygiene",color:"#1ABC9C",keywords:["shower","bath","brush teeth","wash hands","soap","towel","toilet","comb","deodorant","toothbrush","toothpaste","shampoo","mirror","nail","tissue","clean"]}];async function at(t){i($,4),i(P,t.name,!0),i(S,t.titleKey,!0),i(T,t.color,!0),i(h,te(4),!0);const a=X(We);for(let r=0;r<Math.min(t.keywords.length,16);r++){const l=await Fe(t.keywords[r],a);if(l.length>0){const n=X(ze);e(h)[r]={index:r,pictogramId:l[0].id,pictogramUrl:n?l[0].urlBW:l[0].url,label:l[0].keyword,isEmpty:!1}}}i(W,!1)}Bt(()=>{G()});var Ee=Zt(),Be=Ct(Ee);It(Be,{appId:"board-builder",titleKey:"app.board_builder",purposeKey:"welcome.boardBuilder.purpose",howKey:"welcome.boardBuilder.how",goalKey:"welcome.boardBuilder.goal",icon:"ðŸ§©"});var Ce=c(Be,2),ae=o(Ce),$e=o(ae),re=o($e),rt=o(re,!0);s(re);var se=c(re,2),le=o(se),st=o(le,!0);s(le);var Se=c(le,2);Y(Se),s(se);var oe=c(se,2),ie=o(oe),lt=o(ie,!0);s(ie);var Ke=c(ie,2);Y(Ke),s(oe);var ce=c(oe,2),ne=o(ce),ot=o(ne,!0);s(ne);var Te=c(ne,2);I(Te,21,()=>Ge,A,(t,a)=>{var r=Lt();let l;var n=o(r);s(r),k(()=>{l=fe(r,1,"grid-option svelte-16y2cqy",null,l,{active:e($)===e(a)}),v(n,`${e(a)??""}Ã—${e(a)??""}`)}),_("click",r,()=>je(e(a))),m(t,r)}),s(Te),s(ce);var ve=c(ce,2),de=o(ve),it=o(de,!0);s(de);var Ie=c(de,2);I(Ie,21,()=>Re,A,(t,a)=>{var r=Ut();let l;k(()=>{l=fe(r,1,"color-dot svelte-16y2cqy",null,l,{active:e(T)===e(a)}),N(r,`background: ${e(a)??""}`),E(r,"aria-label",e(a))}),_("click",r,()=>i(T,e(a),!0)),m(t,r)}),s(Ie),s(ve);var ye=c(ve,2),ue=o(ye),ct=o(ue,!0);s(ue);var Ae=c(ue,2),F=o(Ae);Y(F);var R=c(F,2),nt=o(R,!0);s(R),s(Ae),s(ye);var Pe=c(ye,2);{var vt=t=>{var a=zt();I(a,21,()=>e(ee),A,(r,l)=>{var n=Wt(),p=o(n),b=c(p,2),g=o(b,!0);s(b),s(n),k(()=>{E(n,"title",e(l).keyword),E(p,"src",e(l).url),E(p,"alt",e(l).keyword),v(g,e(l).keyword)}),_("click",n,()=>Je(e(l))),m(r,n)}),s(a),m(t,a)},dt=t=>{var a=Ft(),r=o(a,!0);s(a),k(l=>v(r,l),[()=>u()("board.no_results")]),m(t,a)};K(Pe,t=>{e(ee).length>0?t(vt):e(D)&&!e(L)&&t(dt,1)})}var pe=c(Pe,2),j=o(pe),yt=o(j);s(j);var Q=c(j,2),ut=o(Q);s(Q);var J=c(Q,2),pt=o(J);s(J);var V=c(J,2),bt=o(V);s(V);var be=c(V,2),_t=o(be);s(be),s(pe);var De=c(pe,2);{var mt=t=>{var a=Mt(),r=o(a),l=o(r,!0);s(r);var n=c(r,2);I(n,17,()=>tt,A,(p,b)=>{var g=Ht(),x=o(g),C=c(x);s(g),k(()=>{N(x,`background: ${e(b).color??""}`),v(C,` ${e(b).name??""}`)}),_("click",g,()=>at(e(b))),m(p,g)}),s(a),k(p=>v(l,p),[()=>u()("board.templates")]),m(t,a)};K(De,t=>{e(W)&&t(mt)})}var ft=c(De,2);{var gt=t=>{var a=Gt(),r=o(a),l=o(r,!0);s(r);var n=c(r,2);I(n,17,()=>e(he),A,(p,b)=>{var g=Nt(),x=o(g),C=o(x),H=c(C);s(x);var M=c(x,2);s(g),k(()=>{N(C,`background: ${e(b).categoryColor??""}`),v(H,` ${e(b).name??""}`)}),_("click",x,()=>Ye(e(b))),_("click",M,()=>e(b).id&&Ze(e(b).id)),m(p,g)},p=>{var b=Ot();m(p,b)}),s(a),k(p=>v(l,p),[()=>u()("board.my_boards")]),m(t,a)};K(ft,t=>{e(U)&&t(gt)})}s($e),s(ae);var Le=c(ae,2),_e=o(Le),Ue=o(_e);{var ht=t=>{var a=Rt(),r=o(a),l=o(r,!0);s(r),s(a),k(()=>{N(a,`grid-column: span ${e($)??""};`),v(l,e(S))}),m(t,a)};K(Ue,t=>{e(S)&&t(ht)})}var qt=c(Ue,2);I(qt,17,()=>e(h),A,(t,a,r)=>{var l=Yt();let n;var p=o(l);{var b=y=>{var d=jt();k(()=>{E(d,"src",e(a).pictogramUrl),E(d,"alt",e(a).label)}),m(y,d)};K(p,y=>{!e(a).isEmpty&&e(a).pictogramUrl&&y(b)})}var g=c(p,2);{var x=y=>{var d=Qt();Y(d),xt("blur",d,we),_("keydown",d,w=>{w.key==="Enter"&&we()}),Z(d,()=>e(O),w=>i(O,w)),m(y,d)},C=y=>{var d=Jt(),w=o(d,!0);s(d),k(()=>v(w,e(a).label)),m(y,d)},H=y=>{var d=Vt();m(y,d)};K(g,y=>{e(z)===r?y(x):e(a).isEmpty?y(H,!1):y(C,1)})}var M=c(g,2);{var kt=y=>{var d=Xt();k(w=>E(d,"aria-label",w),[()=>u()("board.clear_cell")]),_("click",d,w=>{w.stopPropagation(),ke(r)}),_("keydown",d,w=>{(w.key==="Enter"||w.key===" ")&&(w.stopPropagation(),ke(r))}),m(y,d)};K(M,y=>{e(a).isEmpty||y(kt)})}s(l),k(y=>{n=fe(l,1,"board-cell svelte-16y2cqy",null,n,{selected:e(B)===r,empty:e(a).isEmpty}),E(l,"aria-label",y)},[()=>e(a).isEmpty?u()("board.tap_to_add"):e(a).label]),_("click",l,()=>Qe(r)),_("dblclick",l,()=>!e(a).isEmpty&&Ve(r)),m(t,l)}),s(_e),s(Le),s(Ce),k((t,a,r,l,n,p,b,g,x,C,H,M)=>{v(rt,t),v(st,a),v(lt,r),v(ot,l),v(it,n),v(ct,p),E(F,"placeholder",b),R.disabled=e(L),v(nt,e(L)?"...":"ðŸ”"),v(yt,`ðŸ’¾ ${g??""}`),v(ut,`ðŸ–¨ï¸ ${x??""}`),v(pt,`ðŸ“· ${C??""}`),v(bt,`ðŸ“‹ ${H??""}`),v(_t,`ðŸ“‚ ${M??""}`),N(_e,`--grid-size: ${e($)??""}; --board-color: ${e(T)??""}`)},[()=>u()("board.title"),()=>u()("board.board_name"),()=>u()("board.center_title"),()=>u()("board.grid_size"),()=>u()("board.category_color"),()=>u()("board.search_pictograms"),()=>u()("board.search_pictograms"),()=>u()("board.save"),()=>u()("board.print"),()=>u()("board.export_png"),()=>u()("board.templates"),()=>u()("board.my_boards")]),Z(Se,()=>e(P),t=>i(P,t)),Z(Ke,()=>e(S),t=>i(S,t)),_("keydown",F,t=>{t.key==="Enter"&&qe()}),Z(F,()=>e(D),t=>i(D,t)),_("click",R,qe),_("click",j,Xe),_("click",Q,xe),_("click",J,et),_("click",V,()=>{i(W,!e(W)),i(U,!1)}),_("click",be,()=>{i(U,!e(U)),i(W,!1),G()}),m(He,Ee),$t(),Oe()}wt(["click","keydown","dblclick"]);export{pa as component};
