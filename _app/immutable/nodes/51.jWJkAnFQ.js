import{d as Wt,a as p,b,s as S,f}from"../chunks/Rl5oAaZp.js";import{ag as Nt,ao as C,b as rt,an as it,ah as _,a as t,ai as Ot,aj as i,s as d,ak as n,aq as nt,al as o,at as Ut,am as Jt,as as Dt}from"../chunks/5-o2xn5F.js";import{i as K}from"../chunks/CV8532PG.js";import{e as V,i as X}from"../chunks/CWjGmADL.js";import{t as Lt,f as Rt}from"../chunks/CYPR1nOs.js";import{s as T}from"../chunks/mnwxxtgv.js";import{s as Z}from"../chunks/tEQK-CCT.js";import{s as q}from"../chunks/CttGtDdq.js";import{b as Mt}from"../chunks/Ch1I3Fei.js";import{s as Vt,a as Xt}from"../chunks/1mwIFy_z.js";import{g as Zt}from"../chunks/C7HAlxDp.js";import{W as qt}from"../chunks/BIf6fDbj.js";import{t as Bt,l as ct}from"../chunks/D-IBFiEI.js";import{s as Ft}from"../chunks/TeHBZhWf.js";import{s as vt}from"../chunks/gbT3kRQG.js";var Yt=f('<button class="speak-btn svelte-1jdytt4">ğŸ”Š</button> <button class="save-btn svelte-1jdytt4">ğŸ’¾</button> <button class="clear-btn svelte-1jdytt4">âœ•</button>',1),Gt=f('<button class="example-btn svelte-1jdytt4"> </button>'),Ht=f('<section class="examples svelte-1jdytt4"><h2 class="svelte-1jdytt4"> </h2> <div class="example-list svelte-1jdytt4"></div></section>'),Qt=f('<div class="picto-placeholder svelte-1jdytt4">â³</div>'),te=f('<img loading="lazy" class="svelte-1jdytt4"/>'),ee=f('<div class="picto-placeholder empty svelte-1jdytt4"></div>'),ae=f('<div class="symbol-word svelte-1jdytt4"><!> <span class="word-label svelte-1jdytt4"> </span></div>'),se=f('<section class="symbol-display svelte-1jdytt4"><div class="symbol-words svelte-1jdytt4"></div></section>'),oe=f('<div class="saved-row svelte-1jdytt4"><button class="saved-text svelte-1jdytt4"> </button> <button class="del-btn svelte-1jdytt4">ğŸ—‘ï¸</button></div>'),le=f('<section class="saved"><h2 class="svelte-1jdytt4"> </h2> <!></section>'),re=f('<!> <div class="app svelte-1jdytt4"><header class="hdr svelte-1jdytt4"><button class="back svelte-1jdytt4">â†</button> <h1 class="svelte-1jdytt4"> </h1> <div class="size-btns svelte-1jdytt4"><button>A</button> <button style="font-size:1.1em">A</button> <button style="font-size:1.3em">A</button></div></header> <main class="cnt svelte-1jdytt4"><section class="input-area svelte-1jdytt4"><textarea rows="3" class="svelte-1jdytt4"></textarea> <div class="input-actions svelte-1jdytt4"><button class="go-btn svelte-1jdytt4"> </button> <!></div></section> <!> <!> <!></main> <footer class="cr svelte-1jdytt4"><p>Widgit-inspirerat Â· ARASAAC (CC BY-NC-SA) Â· Autismappar</p></footer></div>',1);function je(dt,mt){Nt(mt,!0);const j=()=>Xt(Bt,"$t",pt),[pt,ut]=Vt();let g=C(""),c=C(rt([])),E=C(!1),k=C(rt(yt())),m=C("medium");const bt={small:"0.9em",medium:"1.1em",large:"1.4em"},A={small:40,medium:56,large:72},ft=new Set(["a","an","the","is","are","was","were","am","be","been","and","or","but","in","on","at","to","for","of","with","by","from","as","it","this","that","en","ett","den","det","och","eller","men","i","pÃ¥","till","fÃ¶r","av","med","frÃ¥n","som","Ã¤r","var","har","hade"]);function yt(){try{const e=localStorage.getItem("symbol-texts");return e?JSON.parse(e):[]}catch{return[]}}function B(){localStorage.setItem("symbol-texts",JSON.stringify(t(k)))}async function W(){if(!t(g).trim())return;d(E,!0);const e=t(g).trim().split(/\s+/),s=nt(ct);d(c,e.map(a=>({word:a,pictogramUrl:"",loading:!0})),!0),await Promise.all(t(c).map(async(a,r)=>{const l=a.word.replace(/[.,!?;:]/g,"").toLowerCase();if(ft.has(l)||l.length<=1){t(c)[r]={...a,loading:!1};return}try{const v=await vt(l,s);if(v.length>0)t(c)[r]={...a,pictogramUrl:v[0].url,loading:!1};else if(s==="sv"){const y=await vt(l,"en");t(c)[r]={...a,pictogramUrl:y[0]?.url||"",loading:!1}}else t(c)[r]={...a,loading:!1}}catch{t(c)[r]={...a,loading:!1}}})),d(E,!1)}function _t(){Ft(t(c).map(e=>e.word).join(" "))}function gt(){t(c).length>0&&(d(k,[{text:t(g),words:[...t(c)]},...t(k).slice(0,19)],!0),B())}function ht(e){d(g,e.text,!0),d(c,[...e.words],!0)}function xt(e){d(k,t(k).filter((s,a)=>a!==e),!0),B()}function jt(){d(g,""),d(c,[],!0)}const kt=["Jag vill Ã¤ta frukost","Vi ska gÃ¥ till parken","Jag kÃ¤nner mig glad idag"],wt=["I want to eat breakfast","We are going to the park","I feel happy today"];function St(e){d(g,e,!0),W()}const Tt=Dt(()=>nt(ct)==="sv"?kt:wt);var F=re(),Y=it(F);qt(Y,{appId:"symbol-text",titleKey:"app.symbol_text",purposeKey:"welcome.symbolText.purpose",howKey:"welcome.symbolText.how",goalKey:"welcome.symbolText.goal",icon:"ğŸ”¤"});var N=n(Y,2),O=i(N),U=i(O),J=n(U,2),At=i(J);o(J);var G=n(J,2),D=i(G);let H;var L=n(D,2);let Q;var tt=n(L,2);let et;o(G),o(O);var at=n(O,2),R=i(at),I=i(R);Ut(I);var st=n(I,2),z=i(st),$t=i(z);o(z);var Et=n(z,2);{var It=e=>{var s=Yt(),a=it(s),r=n(a,2),l=n(r,2);p("click",a,_t),p("click",r,gt),p("click",l,jt),b(e,s)};K(Et,e=>{t(c).length>0&&e(It)})}o(st),o(R);var ot=n(R,2);{var zt=e=>{var s=Ht(),a=i(s),r=i(a,!0);o(a);var l=n(a,2);V(l,21,()=>t(Tt),X,(v,y)=>{var x=Gt(),w=i(x);o(x),_(()=>S(w,`"${t(y)??""}"`)),p("click",x,()=>St(t(y))),b(v,x)}),o(l),o(s),_(v=>S(r,v),[()=>j()("symbolText.examples")]),b(e,s)};K(ot,e=>{t(c).length===0&&!t(E)&&e(zt)})}var lt=n(ot,2);{var Ct=e=>{var s=se(),a=i(s);V(a,21,()=>t(c),X,(r,l)=>{var v=ae(),y=i(v);{var x=h=>{var u=Qt();_(()=>q(u,`width:${A[t(m)]??""}px;height:${A[t(m)]??""}px`)),b(h,u)},w=h=>{var u=te();_(()=>{T(u,"src",t(l).pictogramUrl),T(u,"alt",t(l).word),T(u,"width",A[t(m)]),T(u,"height",A[t(m)])}),b(h,u)},$=h=>{var u=ee();_(()=>q(u,`width:${A[t(m)]??""}px;height:${A[t(m)]??""}px`)),b(h,u)};K(y,h=>{t(l).loading?h(x):t(l).pictogramUrl?h(w,1):h($,!1)})}var P=n(y,2),M=i(P,!0);o(P),o(v),_(()=>S(M,t(l).word)),b(r,v)}),o(a),o(s),_(r=>{T(s,"aria-label",r),q(a,`font-size: ${bt[t(m)]??""}`)},[()=>j()("symbolText.result")]),b(e,s)};K(lt,e=>{t(c).length>0&&e(Ct)})}var Kt=n(lt,2);{var Pt=e=>{var s=le(),a=i(s),r=i(a,!0);o(a);var l=n(a,2);V(l,17,()=>t(k),X,(v,y,x)=>{var w=oe(),$=i(w),P=i($,!0);o($);var M=n($,2);o(w),_(()=>S(P,t(y).text)),p("click",$,()=>ht(t(y))),p("click",M,()=>xt(x)),b(v,w)}),o(s),_(v=>S(r,v),[()=>j()("symbolText.saved")]),b(e,s)};K(Kt,e=>{t(k).length>0&&e(Pt)})}o(at),Jt(2),o(N),_((e,s,a,r,l)=>{T(U,"aria-label",e),S(At,`ğŸ”¤ ${s??""}`),H=Z(D,1,"svelte-1jdytt4",null,H,{active:t(m)==="small"}),Q=Z(L,1,"svelte-1jdytt4",null,Q,{active:t(m)==="medium"}),et=Z(tt,1,"svelte-1jdytt4",null,et,{active:t(m)==="large"}),T(I,"placeholder",a),z.disabled=r,S($t,`${t(E)?"â³":"âœ¨"} ${l??""}`)},[()=>j()("app.back"),()=>j()("symbolText.title"),()=>j()("symbolText.placeholder"),()=>t(E)||!t(g).trim(),()=>j()("symbolText.convert")]),p("click",U,()=>Zt("/")),p("click",D,()=>d(m,"small")),p("click",L,()=>d(m,"medium")),p("click",tt,()=>d(m,"large")),p("keydown",I,e=>{e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),W())}),Mt(I,()=>t(g),e=>d(g,e)),p("click",z,W),Lt(1,N,()=>Rt),b(dt,F),Ot(),ut()}Wt(["click","keydown"]);export{je as component};
