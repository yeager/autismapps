import{d as Ke,a as b,b as q,s as f,f as k}from"../chunks/Rl5oAaZp.js";import{ag as Pe,ao as T,b as Te,ap as Ae,aq as ae,s as d,an as oe,ah as y,ai as Ce,a as e,aj as r,ak as l,al as o}from"../chunks/5-o2xn5F.js";import{i as A}from"../chunks/CV8532PG.js";import{e as J,i as N}from"../chunks/CWjGmADL.js";import{t as re,f as ie}from"../chunks/CYPR1nOs.js";import{s as O,r as ve}from"../chunks/mnwxxtgv.js";import{s as Me}from"../chunks/tEQK-CCT.js";import{s as Be}from"../chunks/CttGtDdq.js";import{b as le}from"../chunks/Ch1I3Fei.js";import{s as We,a as Fe}from"../chunks/1mwIFy_z.js";import{g as Le}from"../chunks/C7HAlxDp.js";import{W as ze}from"../chunks/BIf6fDbj.js";import{t as Ge}from"../chunks/D-IBFiEI.js";import{s as ne}from"../chunks/TeHBZhWf.js";import{a as He,b as Je}from"../chunks/B5a8mNDb.js";import{a as de}from"../chunks/CCIDKU4D.js";var Ne=k('<span class="progress-badge svelte-1qrd85o"> </span>'),Oe=k('<div class="schedule-card svelte-1qrd85o"><button class="schedule-btn svelte-1qrd85o"><span class="sched-name"> </span> <span class="sched-count svelte-1qrd85o"> </span></button> <button class="del-btn svelte-1qrd85o">âœ•</button></div>'),Qe=k('<h2 class="section-title svelte-1qrd85o"> </h2> <div class="schedule-list svelte-1qrd85o"></div>',1),Re=k('<button class="tpl-card svelte-1qrd85o"><span class="tpl-emoji svelte-1qrd85o"> </span> <span class="tpl-name svelte-1qrd85o"> </span></button>'),Ve=k('<div class="home-page svelte-1qrd85o"><!> <h2 class="section-title svelte-1qrd85o"> </h2> <div class="template-grid svelte-1qrd85o"></div></div>'),Xe=k('<button class="del-btn sm svelte-1qrd85o">âœ•</button>'),Ye=k('<div><button class="step-check svelte-1qrd85o"> </button> <span class="step-emoji svelte-1qrd85o"> </span> <span class="step-text svelte-1qrd85o"> </span> <button class="step-speak svelte-1qrd85o">ðŸ”Š</button> <!></div>'),Ze=k('<div class="add-step-row svelte-1qrd85o"><input type="text" class="emoji-input svelte-1qrd85o" maxlength="4"/> <input type="text" class="svelte-1qrd85o"/> <button class="add-btn svelte-1qrd85o">+</button></div>'),et=k('<div class="schedule-page svelte-1qrd85o"><div class="progress-bar svelte-1qrd85o"><div class="progress-fill svelte-1qrd85o"></div></div> <div class="step-list svelte-1qrd85o"></div> <!> <div class="sched-actions svelte-1qrd85o"><button class="action-btn svelte-1qrd85o"> </button> <button class="action-btn svelte-1qrd85o"> </button></div></div>'),tt=k('<!> <div class="vs-page svelte-1qrd85o"><header class="app-header svelte-1qrd85o"><button class="back-btn svelte-1qrd85o"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M15 18l-6-6 6-6"></path></svg></button> <h1 class="svelte-1qrd85o"> </h1> <!></header> <!> <footer class="credit svelte-1qrd85o"> </footer></div>',1);function bt(pe,ce){Pe(ce,!0);const u=()=>Fe(Ge,"$t",ue),[ue,me]=We(),_e=[{name:"vs.template.morning",key:"morning",steps:[{emoji:"ðŸŒ…",text:"vs.step.wake_up"},{emoji:"ðŸš¿",text:"vs.step.shower"},{emoji:"ðŸ‘•",text:"vs.step.get_dressed"},{emoji:"ðŸ³",text:"vs.step.breakfast"},{emoji:"ðŸ¦·",text:"vs.step.brush_teeth"},{emoji:"ðŸŽ’",text:"vs.step.pack_bag"},{emoji:"ðŸ‘‹",text:"vs.step.go"}]},{name:"vs.template.evening",key:"evening",steps:[{emoji:"ðŸ ",text:"vs.step.come_home"},{emoji:"ðŸ½ï¸",text:"vs.step.dinner"},{emoji:"ðŸ›",text:"vs.step.bath"},{emoji:"ðŸ¦·",text:"vs.step.brush_teeth"},{emoji:"ðŸ“–",text:"vs.step.read"},{emoji:"ðŸ›ï¸",text:"vs.step.bed"}]},{name:"vs.template.school",key:"school",steps:[{emoji:"ðŸ«",text:"vs.step.arrive"},{emoji:"ðŸ“š",text:"vs.step.lesson"},{emoji:"â˜•",text:"vs.step.break_time"},{emoji:"ðŸ“š",text:"vs.step.lesson"},{emoji:"ðŸ½ï¸",text:"vs.step.lunch"},{emoji:"ðŸ“š",text:"vs.step.lesson"},{emoji:"ðŸ ",text:"vs.step.go_home"}]}];let n=T(Te([])),s=T(null),S=T(!1),E=T(""),W=T("ðŸ“Œ");Ae(()=>{fe()});async function fe(){const t=ae(de);if(t){const a=await He(t,"visual-support");a?.schedules&&d(n,a.schedules,!0)}}async function U(){const t=ae(de);t&&await Je(t,"visual-support",{schedules:e(n)})}function he(t){const a={id:crypto.randomUUID(),name:u()(t.name),steps:t.steps.map(i=>({id:crypto.randomUUID(),emoji:i.emoji,text:u()(i.text),done:!1}))};d(n,[...e(n),a],!0),d(s,a,!0),U()}function be(t){if(!e(s))return;e(s).steps=e(s).steps.map(i=>i.id===t?{...i,done:!i.done}:i);const a=e(s).steps.find(i=>i.id===t);a&&ne(a.done?`${a.text} â€” ${u()("vs.done")}!`:a.text),d(n,e(n).map(i=>i.id===e(s).id?e(s):i),!0),U()}function xe(){e(s)&&(e(s).steps=e(s).steps.map(t=>({...t,done:!1})),d(n,e(n).map(t=>t.id===e(s).id?e(s):t),!0),U())}function ge(t){d(n,e(n).filter(a=>a.id!==t),!0),e(s)?.id===t&&d(s,null),U()}function Q(){!e(s)||!e(E).trim()||(e(s).steps=[...e(s).steps,{id:crypto.randomUUID(),emoji:e(W),text:e(E).trim(),done:!1}],d(n,e(n).map(t=>t.id===e(s).id?e(s):t),!0),d(E,""),U())}function qe(t){e(s)&&(e(s).steps=e(s).steps.filter(a=>a.id!==t),d(n,e(n).map(a=>a.id===e(s).id?e(s):a),!0),U())}function R(){return e(s)?.steps.filter(t=>t.done).length||0}function ke(){e(s)?(d(s,null),d(S,!1)):Le("/")}var V=tt(),X=oe(V);ze(X,{appId:"visual-support",titleKey:"app.visual_support",purposeKey:"welcome.visualSupport.purpose",howKey:"welcome.visualSupport.how",goalKey:"welcome.visualSupport.goal",icon:"ðŸ“¸"});var Y=l(X,2),F=r(Y),L=r(F),z=l(L,2),je=r(z,!0);o(z);var ye=l(z,2);{var we=t=>{var a=Ne(),i=r(a);o(a),y(I=>f(i,`${I??""}/${e(s).steps.length??""}`),[R]),q(t,a)};A(ye,t=>{e(s)&&t(we)})}o(F);var Z=l(F,2);{var $e=t=>{var a=Ve(),i=r(a);{var I=x=>{var h=Qe(),g=oe(h),j=r(g,!0);o(g);var D=l(g,2);J(D,21,()=>e(n),N,(m,v)=>{var _=Oe(),p=r(_),w=r(p),c=r(w,!0);o(w);var B=l(w,2),K=r(B);o(B),o(p);var G=l(p,2);o(_),y(P=>{f(c,e(v).name),f(K,`${e(v).steps.length??""} ${P??""}`)},[()=>u()("vs.steps")]),b("click",p,()=>d(s,e(v),!0)),b("click",G,()=>ge(e(v).id)),q(m,_)}),o(D),y(m=>f(j,m),[()=>u()("vs.my_schedules")]),q(x,h)};A(i,x=>{e(n).length>0&&x(I)})}var $=l(i,2),C=r($,!0);o($);var M=l($,2);J(M,21,()=>_e,N,(x,h)=>{var g=Re(),j=r(g),D=r(j,!0);o(j);var m=l(j,2),v=r(m,!0);o(m),o(g),y(_=>{f(D,e(h).steps[0].emoji),f(v,_)},[()=>u()(e(h).name)]),b("click",g,()=>he(e(h))),q(x,g)}),o(M),o(a),y(x=>f(C,x),[()=>u()("vs.templates")]),re(3,a,()=>ie),q(t,a)},Se=t=>{var a=et(),i=r(a),I=r(i);o(i);var $=l(i,2);J($,21,()=>e(s).steps,N,(m,v,_)=>{var p=Ye();let w;var c=r(p),B=r(c,!0);o(c);var K=l(c,2),G=r(K,!0);o(K);var P=l(K,2),De=r(P,!0);o(P);var te=l(P,2),Ee=l(te,2);{var Ie=H=>{var se=Xe();b("click",se,()=>qe(e(v).id)),q(H,se)};A(Ee,H=>{e(S)&&H(Ie)})}o(p),y(()=>{w=Me(p,1,"step-row svelte-1qrd85o",null,w,{done:e(v).done,current:!e(v).done&&(_===0||e(s).steps[_-1].done)}),O(c,"aria-label",e(v).done?"Undo":"Complete"),f(B,e(v).done?"âœ…":"â¬œ"),f(G,e(v).emoji),f(De,e(v).text)}),b("click",c,()=>be(e(v).id)),b("click",te,()=>ne(e(v).text)),q(m,p)}),o($);var C=l($,2);{var M=m=>{var v=Ze(),_=r(v);ve(_);var p=l(_,2);ve(p);var w=l(p,2);o(v),y(c=>O(p,"placeholder",c),[()=>u()("vs.add_step")]),le(_,()=>e(W),c=>d(W,c)),b("keydown",p,c=>{c.key==="Enter"&&Q()}),le(p,()=>e(E),c=>d(E,c)),b("click",w,Q),q(m,v)};A(C,m=>{e(S)&&m(M)})}var x=l(C,2),h=r(x),g=r(h,!0);o(h);var j=l(h,2),D=r(j);o(j),o(x),o(a),y((m,v,_)=>{Be(I,`width: ${m??""}%`),f(g,v),f(D,`ðŸ”„ ${_??""}`)},[()=>e(s).steps.length>0?R()/e(s).steps.length*100:0,()=>e(S)?"âœ“ "+u()("vs.done_editing"):"âœï¸ "+u()("vs.edit"),()=>u()("vs.reset")]),b("click",h,()=>d(S,!e(S))),b("click",j,xe),re(3,a,()=>ie),q(t,a)};A(Z,t=>{e(s)?t(Se,!1):t($e)})}var ee=l(Z,2),Ue=r(ee,!0);o(ee),o(Y),y((t,a,i)=>{O(L,"aria-label",t),f(je,a),f(Ue,i)},[()=>u()("app.back"),()=>e(s)?e(s).name:u()("vs.title"),()=>u()("vs.credit")]),b("click",L,ke),q(pe,V),Ce(),me()}Ke(["click","keydown"]);export{bt as component};
