import{d as se,a as g,b as _,s as u,f as h}from"../chunks/Rl5oAaZp.js";import{ag as re,an as G,ah as b,ai as ne,a as t,ao as k,ak as l,aj as r,as as Q,s as o,al as s,am as le,ar as z,aq as jt}from"../chunks/5-o2xn5F.js";import{i as q}from"../chunks/CV8532PG.js";import{e as ie,i as oe}from"../chunks/CWjGmADL.js";import{s as y,r as nt}from"../chunks/mnwxxtgv.js";import{s as xt}from"../chunks/tEQK-CCT.js";import{a as ve,b as kt}from"../chunks/Ch1I3Fei.js";import{s as ce,a as me}from"../chunks/1mwIFy_z.js";import{g as ue}from"../chunks/C7HAlxDp.js";import{W as pe}from"../chunks/BIf6fDbj.js";import{t as de,l as yt}from"../chunks/D-IBFiEI.js";import{s as W}from"../chunks/TeHBZhWf.js";import{s as wt}from"../chunks/gbT3kRQG.js";var fe=h('<img width="80" height="80" class="svelte-lj4nnm"/> <span> </span>',1),_e=h('<img width="80" height="80" class="svelte-lj4nnm"/> <span> </span>',1),be=h('<div class="first-then svelte-lj4nnm"><div class="ft-card first svelte-lj4nnm"><span class="ft-label svelte-lj4nnm"> </span> <!></div> <span class="ft-arrow svelte-lj4nnm">‚Üí</span> <div class="ft-card then svelte-lj4nnm"><span class="ft-label svelte-lj4nnm"> </span> <!></div></div>'),he=h('<span class="done-emoji svelte-lj4nnm">üéâ</span> <span class="done-text svelte-lj4nnm"> </span>',1),ge=h('<span class="time-text svelte-lj4nnm"> </span>'),je=h('<span class="time-text svelte-lj4nnm"> </span>'),xe=h("<button> </button>"),ke=h('<div class="ft-search svelte-lj4nnm"><div class="ft-field svelte-lj4nnm"><span class="svelte-lj4nnm"> </span> <input type="text" class="svelte-lj4nnm"/> <button class="svelte-lj4nnm">üîç</button></div> <div class="ft-field svelte-lj4nnm"><span class="svelte-lj4nnm"> </span> <input type="text" class="svelte-lj4nnm"/> <button class="svelte-lj4nnm">üîç</button></div></div>'),ye=h('<div class="presets svelte-lj4nnm"></div> <label class="ft-toggle svelte-lj4nnm"><input type="checkbox" class="svelte-lj4nnm"/> <span> </span></label> <!> <button class="start-btn svelte-lj4nnm"> </button>',1),we=h('<button class="pause-btn svelte-lj4nnm"> </button>'),Te=h('<div class="paused-actions svelte-lj4nnm"><button class="start-btn svelte-lj4nnm"> </button> <button class="reset-btn svelte-lj4nnm"> </button></div>'),Ae=h('<button class="start-btn svelte-lj4nnm"> </button>'),Ce=h('<!> <div><header class="app-header svelte-lj4nnm"><button class="back-btn svelte-lj4nnm"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M15 18l-6-6 6-6"></path></svg></button> <h1 class="svelte-lj4nnm"> </h1> <div class="header-actions svelte-lj4nnm"><span class="star-count svelte-lj4nnm"> </span> <button class="icon-btn svelte-lj4nnm">‚õ∂</button></div></header> <div class="timer-body svelte-lj4nnm"><!> <div class="timer-circle svelte-lj4nnm"><svg viewBox="0 0 300 300" class="timer-svg svelte-lj4nnm"><circle cx="150" cy="150" r="140" fill="none" stroke="var(--border)" stroke-width="12" opacity="0.3"></circle><circle cx="150" cy="150" r="140" fill="none" stroke-width="12" stroke-linecap="round" transform="rotate(-90 150 150)" class="progress-ring svelte-lj4nnm"></circle></svg> <div class="timer-display svelte-lj4nnm"><!></div></div> <!></div> <footer class="credit svelte-lj4nnm">Pictograms: <a href="https://arasaac.org" target="_blank" rel="noopener" class="svelte-lj4nnm">ARASAAC</a> ‚Äî CC BY-NC-SA 3.0</footer></div>',1);function Ge(Tt,At){re(At,!0);const v=()=>me(de,"$t",Ct),[Ct,Et]=ce();let S=k(5),d=k(0),w=k(!1),E=k(!1),C=null,D=k(0),H=k(!1),N=k(!1),K=k(""),M=k(""),$=k(null),F=k(null);const It=[1,2,5,10,15,30],J=Q(()=>t(S)>0?1-t(d)/(t(S)*60):0),St=Q(()=>t(J)<.5?"#27AE60":t(J)<.8?"#F1C40F":"#E74C3C"),$t=Q(()=>Math.floor(t(d)/60)),Ft=Q(()=>t(d)%60),lt=2*Math.PI*140,Pt=Q(()=>lt*(1-t(J)));function qt(){o(d,t(S)*60),o(w,!0),o(E,!1),W(v()("timer.start")),C=setInterval(()=>{z(d,-1),t(d)<=0&&(o(d,0),o(w,!1),o(E,!0),clearInterval(C),ot(),vt(),z(D),W(v()("timer.done")))},1e3)}function Kt(){o(w,!1),C&&clearInterval(C),W(v()("timer.pause"))}function Mt(){o(w,!0),C=setInterval(()=>{z(d,-1),t(d)<=0&&(o(d,0),o(w,!1),o(E,!0),clearInterval(C),ot(),vt(),z(D),W(v()("timer.done")))},1e3)}function it(){o(w,!1),o(E,!1),o(d,0),C&&clearInterval(C)}function ot(){try{const e=new AudioContext,a=e.createOscillator(),n=e.createGain();a.connect(n),n.connect(e.destination),a.frequency.value=523,a.type="sine",n.gain.setValueAtTime(.3,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+1.5),a.start(),a.stop(e.currentTime+1.5),setTimeout(()=>{const i=e.createOscillator(),m=e.createGain();i.connect(m),m.connect(e.destination),i.frequency.value=659,i.type="sine",m.gain.setValueAtTime(.3,e.currentTime),m.gain.exponentialRampToValueAtTime(.01,e.currentTime+1.5),i.start(),i.stop(e.currentTime+1.5)},300)}catch{}}function vt(){try{navigator.vibrate?.([200,100,200,100,400])}catch{}}async function ct(){if(!t(K).trim())return;const e=await wt(t(K),jt(yt));e[0]&&o($,{url:e[0].url,word:t(K)},!0)}async function mt(){if(!t(M).trim())return;const e=await wt(t(M),jt(yt));e[0]&&o(F,{url:e[0].url,word:t(M)},!0)}function Rt(){document.fullscreenElement?(document.exitFullscreen?.(),o(H,!1)):(document.documentElement.requestFullscreen?.(),o(H,!0))}var ut=Ce(),pt=G(ut);pe(pt,{appId:"visual-timer",titleKey:"app.visual_timer",purposeKey:"welcome.visualTimer.purpose",howKey:"welcome.visualTimer.how",goalKey:"welcome.visualTimer.goal",icon:"‚è≥"});var L=l(pt,2);let dt;var U=r(L),X=r(U),Z=l(X,2),Vt=r(Z,!0);s(Z);var ft=l(Z,2),Y=r(ft),Bt=r(Y);s(Y);var Ot=l(Y,2);s(ft),s(U);var _t=l(U,2),bt=r(_t);{var Gt=e=>{var a=be(),n=r(a),i=r(n),m=r(i,!0);s(i);var P=l(i,2);{var R=c=>{var p=fe(),f=G(p),T=l(f,2),x=r(T,!0);s(T),b(()=>{y(f,"src",t($).url),y(f,"alt",t($).word),u(x,t($).word)}),_(c,p)};q(P,c=>{t($)&&c(R)})}s(n);var I=l(n,4),V=r(I),B=r(V,!0);s(V);var st=l(V,2);{var j=c=>{var p=_e(),f=G(p),T=l(f,2),x=r(T,!0);s(T),b(()=>{y(f,"src",t(F).url),y(f,"alt",t(F).word),u(x,t(F).word)}),_(c,p)};q(st,c=>{t(F)&&c(j)})}s(I),s(a),b((c,p)=>{u(m,c),u(B,p)},[()=>v()("timer.first"),()=>v()("timer.then")]),_(e,a)};q(bt,e=>{t(N)&&(t($)||t(F))&&e(Gt)})}var tt=l(bt,2),et=r(tt),at=l(r(et));y(at,"stroke-dasharray",lt),s(et);var ht=l(et,2),Qt=r(ht);{var Wt=e=>{var a=he(),n=l(G(a),2),i=r(n,!0);s(n),b(m=>u(i,m),[()=>v()("timer.done")]),_(e,a)},Dt=e=>{var a=ge(),n=r(a);s(a),b((i,m)=>u(n,`${i??""}:${m??""}`),[()=>String(t($t)).padStart(2,"0"),()=>String(t(Ft)).padStart(2,"0")]),_(e,a)},Nt=e=>{var a=je(),n=r(a);s(a),b(()=>u(n,`${t(S)??""}:00`)),_(e,a)};q(Qt,e=>{t(E)?e(Wt):t(w)||t(d)>0?e(Dt,1):e(Nt,!1)})}s(ht),s(tt);var Yt=l(tt,2);{var zt=e=>{var a=ye(),n=G(a);ie(n,21,()=>It,oe,(j,c)=>{var p=xe();let f;var T=r(p);s(p),b(x=>{f=xt(p,1,"preset-btn svelte-lj4nnm",null,f,{active:t(S)===t(c)}),u(T,`${t(c)??""} ${x??""}`)},[()=>v()("timer.min")]),g("click",p,()=>{o(S,t(c),!0),W(t(c)+" "+v()("timer.minutes"))}),_(j,p)}),s(n);var i=l(n,2),m=r(i);nt(m);var P=l(m,2),R=r(P,!0);s(P),s(i);var I=l(i,2);{var V=j=>{var c=ke(),p=r(c),f=r(p),T=r(f);s(f);var x=l(f,2);nt(x);var Ut=l(x,2);s(p);var gt=l(p,2),rt=r(gt),Xt=r(rt);s(rt);var O=l(rt,2);nt(O);var Zt=l(O,2);s(gt),s(c),b((A,te,ee,ae)=>{u(T,`${A??""}:`),y(x,"placeholder",te),u(Xt,`${ee??""}:`),y(O,"placeholder",ae)},[()=>v()("timer.first"),()=>v()("board.search_pictograms"),()=>v()("timer.then"),()=>v()("board.search_pictograms")]),g("keydown",x,A=>{A.key==="Enter"&&ct()}),kt(x,()=>t(K),A=>o(K,A)),g("click",Ut,ct),g("keydown",O,A=>{A.key==="Enter"&&mt()}),kt(O,()=>t(M),A=>o(M,A)),g("click",Zt,mt),_(j,c)};q(I,j=>{t(N)&&j(V)})}var B=l(I,2),st=r(B,!0);s(B),b((j,c)=>{u(R,j),u(st,c)},[()=>v()("timer.first_then"),()=>v()("timer.start")]),ve(m,()=>t(N),j=>o(N,j)),g("click",B,qt),_(e,a)},Ht=e=>{var a=we(),n=r(a,!0);s(a),b(i=>u(n,i),[()=>v()("timer.pause")]),g("click",a,Kt),_(e,a)},Jt=e=>{var a=Te(),n=r(a),i=r(n,!0);s(n);var m=l(n,2),P=r(m,!0);s(m),s(a),b((R,I)=>{u(i,R),u(P,I)},[()=>v()("timer.resume"),()=>v()("timer.reset")]),g("click",n,Mt),g("click",m,it),_(e,a)},Lt=e=>{var a=Ae(),n=r(a,!0);s(a),b(i=>u(n,i),[()=>v()("timer.again")]),g("click",a,it),_(e,a)};q(Yt,e=>{!t(w)&&!t(E)&&t(d)===0?e(zt):t(w)?e(Ht,1):!t(w)&&t(d)>0?e(Jt,2):t(E)&&e(Lt,3)})}s(_t),le(2),s(L),b((e,a)=>{dt=xt(L,1,"timer-page svelte-lj4nnm",null,dt,{fullscreen:t(H)}),y(X,"aria-label",e),u(Vt,a),y(Y,"aria-label",`${t(D)??""} stars`),u(Bt,`‚≠ê ${t(D)??""}`),y(at,"stroke",t(St)),y(at,"stroke-dashoffset",t(Pt))},[()=>v()("app.back"),()=>v()("timer.title")]),g("click",X,()=>ue("/")),g("click",Ot,Rt),_(Tt,ut),ne(),Et()}se(["click","keydown"]);export{Ge as component};
