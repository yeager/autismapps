import{d as Ja,s as l,a as D,b as p,f as u,g as me}from"../chunks/Rl5oAaZp.js";import{ag as Oa,aj as e,ak as s,al as a,a as t,am as ue,ah as S,ai as Qa,as as va,ap as Va,s as K,ao as Q,an as qa}from"../chunks/5-o2xn5F.js";import{i as F}from"../chunks/CV8532PG.js";import{e as ua,i as be}from"../chunks/CWjGmADL.js";import{t as Ga,a as Pa}from"../chunks/CYPR1nOs.js";import{s as Ua,b as Ia,r as ia}from"../chunks/mnwxxtgv.js";import{s as U}from"../chunks/tEQK-CCT.js";import{s as he}from"../chunks/CttGtDdq.js";import{b as za}from"../chunks/Ch1I3Fei.js";import{b as ke}from"../chunks/DyKTEprm.js";import{a as j,s as Wa}from"../chunks/1mwIFy_z.js";import{t as Xa}from"../chunks/D-IBFiEI.js";import{s as Ba}from"../chunks/TeHBZhWf.js";import{g as ge}from"../chunks/C7HAlxDp.js";import{a as fe}from"../chunks/CCIDKU4D.js";import{k as we}from"../chunks/B5a8mNDb.js";import{A as Ya,l as xe,r as ye,t as $e,s as Aa,a as Se,c as Ee,d as De,b as Ke,g as Ge,e as Pe,f as Ie}from"../chunks/FoDH_54F.js";var Ae=u('<p class="diploma-desc svelte-4b4ne7"> </p>'),Me=u('<div class="diploma-wrapper svelte-4b4ne7"><div class="diploma svelte-4b4ne7"><div class="diploma-border svelte-4b4ne7"><div class="diploma-inner svelte-4b4ne7"><div class="diploma-stars-top svelte-4b4ne7">‚≠ê ‚≠ê ‚≠ê</div> <h1 class="diploma-title svelte-4b4ne7"> </h1> <p class="diploma-awarded svelte-4b4ne7"> </p> <p class="diploma-name svelte-4b4ne7"> </p> <div class="diploma-star-big svelte-4b4ne7">üåü</div> <p class="diploma-achievement svelte-4b4ne7"> </p> <!> <p class="diploma-date svelte-4b4ne7"> </p> <div class="diploma-stars-bottom svelte-4b4ne7">‚≠ê ‚≠ê ‚≠ê</div></div></div></div> <button class="print-btn no-print svelte-4b4ne7"> </button></div>');function Ne(ba,C){Oa(C,!0);const N=()=>j(Xa,"$t",ha),[ha,w]=Wa(),v=va(()=>Ya.find(P=>P.key===C.diploma.achievementKey)),oa=va(()=>new Date(C.diploma.earnedAt).toLocaleDateString("sv-SE",{year:"numeric",month:"long",day:"numeric"}));function da(){window.print()}var H=Me(),J=e(H),G=e(J),na=e(G),h=s(e(na),2),V=e(h,!0);a(h);var L=s(h,2),W=e(L,!0);a(L);var q=s(L,2),z=e(q,!0);a(q);var X=s(q,4),ka=e(X,!0);a(X);var ca=s(X,2);{var ga=P=>{var T=Ae(),Z=e(T,!0);a(T),S(O=>l(Z,O),[()=>N()(t(v).descKey)]),p(P,T)};F(ca,P=>{t(v)&&P(ga)})}var pa=s(ca,2),fa=e(pa,!0);a(pa),ue(2),a(na),a(G),a(J);var Y=s(J,2),wa=e(Y);a(Y),a(H),S((P,T,Z,O)=>{Ua(J,"id",`diploma-${C.diploma.id??""}`),l(V,P),l(W,T),l(z,C.diploma.childName),l(ka,Z),l(fa,t(oa)),l(wa,`üñ®Ô∏è ${O??""}`)},[()=>N()("rewards.diploma.title"),()=>N()("rewards.diploma.awarded_to"),()=>t(v)?N()(t(v).labelKey):C.diploma.achievementKey,()=>N()("rewards.diploma.print")]),D("click",Y,da),p(ba,H),Qa(),w()}Ja(["click"]);var Te=u('<p class="profile-greeting svelte-idkh17"> </p>'),je=u('<p class="empty-state svelte-idkh17"> </p>'),Ce=u('<li class="star-item svelte-idkh17"><span class="star-emoji svelte-idkh17">‚≠ê</span> <div class="star-info svelte-idkh17"><span class="star-app svelte-idkh17"> </span> <span class="star-date svelte-idkh17"> </span></div></li>'),Le=u('<ul class="star-list svelte-idkh17"></ul>'),Re=u('<div class="star-total svelte-idkh17"><span class="big-star-count svelte-idkh17"> </span> <span class="star-label svelte-idkh17"> </span></div> <!>',1),Fe=u('<button class="diploma-btn svelte-idkh17"> </button>'),He=u('<div><span class="ach-icon svelte-idkh17"> </span> <p class="ach-name svelte-idkh17"> </p> <p class="ach-desc svelte-idkh17"> </p> <!></div>'),Ve=u('<div class="achievements-grid svelte-idkh17"></div>'),qe=u('<p class="goal-done svelte-idkh17"> </p>'),ze=u('<div><div class="goal-header svelte-idkh17"><span class="goal-type svelte-idkh17"> </span> <span class="goal-text svelte-idkh17"> </span> <button class="goal-delete svelte-idkh17">‚úï</button></div> <div class="goal-progress svelte-idkh17"><div class="progress-bar svelte-idkh17"><div class="progress-fill svelte-idkh17"></div></div> <span class="progress-text svelte-idkh17"> </span></div> <!></div>'),Be=u('<div class="new-goal-form svelte-idkh17"><select class="svelte-idkh17"><option> </option><option> </option></select> <input type="number" min="1" max="100" class="svelte-idkh17"/> <input type="text" class="svelte-idkh17"/> <button class="btn-add svelte-idkh17"> </button> <button class="btn-cancel svelte-idkh17"> </button></div>'),Je=u('<button class="btn-new-goal svelte-idkh17"> </button>'),Oe=u('<div class="goals-section svelte-idkh17"><!> <!></div>'),Qe=u('<p class="empty-state svelte-idkh17"> </p>'),Ue=u('<div class="diplomas-list svelte-idkh17"></div>'),We=u('<div class="rewards-page svelte-idkh17"><h1 class="page-title svelte-idkh17"> </h1> <!> <section class="settings-section svelte-idkh17"><label class="toggle-row svelte-idkh17"><input type="checkbox" class="svelte-idkh17"/> <span> </span></label> <label class="toggle-row svelte-idkh17"><input type="checkbox" class="svelte-idkh17"/> <span> </span></label> <label class="toggle-row svelte-idkh17"><input type="checkbox" class="svelte-idkh17"/> <span> </span></label></section> <div class="tabs svelte-idkh17"><button> </button> <button> </button> <button> </button> <button> </button></div> <div class="tab-content svelte-idkh17"><!></div></div>');function mt(ba,C){Oa(C,!0);const N=()=>j(fe,"$activeProfileId",G),ha=()=>j(Pe,"$achievements",G),w=()=>j(ye,"$rewardsSettings",G),v=()=>j(Xa,"$t",G),oa=()=>j($e,"$totalStars",G),da=()=>j(Se,"$stars",G),H=()=>j(De,"$diplomas",G),J=()=>j(Ge,"$goals",G),[G,na]=Wa();let h=Q("stars"),V=Q(""),L=Q(!1),W=Q("stars"),q=Q(5),z=Q("");Va(()=>{N()||ge("/profiles")}),Va(()=>{N()&&(xe(),we(N()).then(r=>{r&&K(V,r.name,!0)}))});const X=va(()=>new Set(ha().map(r=>r.achievementKey)));function ka(){const r={...w(),enabled:!w().enabled};Aa(r)}function ca(){const r={...w(),praiseEnabled:!w().praiseEnabled};Aa(r)}function ga(){const r={...w(),diplomasEnabled:!w().diplomasEnabled};Aa(r)}async function pa(){t(z).trim()&&(await Ie(t(W),t(q),t(z).trim()),K(L,!1),K(z,""),Ba(v()("rewards.goal_created")))}async function fa(r){await Ke(r)}async function Y(r){t(V)&&(await Ee(t(V),r),Ba(v()("rewards.diploma.created")))}function wa(r){return Math.min(100,Math.round(r.current/r.target*100))}var P=We(),T=e(P),Z=e(T);a(T);var O=s(T,2);{var Za=r=>{var c=Te(),x=e(c,!0);a(c),S(_=>l(x,_),[()=>v()("rewards.greeting",{name:t(V)})]),p(r,c)};F(O,r=>{t(V)&&r(Za)})}var xa=s(O,2),ya=e(xa),_a=e(ya);ia(_a);var Ma=s(_a,2),ae=e(Ma,!0);a(Ma),a(ya);var $a=s(ya,2),aa=e($a);ia(aa);var Na=s(aa,2),ee=e(Na);a(Na),a($a);var Ta=s($a,2),ea=e(Ta);ia(ea);var ja=s(ea,2),te=e(ja);a(ja),a(Ta),a(xa);var Sa=s(xa,2),ta=e(Sa);let Ca;var se=e(ta);a(ta);var sa=s(ta,2);let La;var re=e(sa);a(sa);var ra=s(sa,2);let Ra;var le=e(ra);a(ra);var ma=s(ra,2);let Fa;var ie=e(ma);a(ma),a(Sa);var Ha=s(Sa,2),ve=e(Ha);{var oe=r=>{var c=Re(),x=qa(c),_=e(x),I=e(_,!0);a(_);var m=s(_,2),o=e(m,!0);a(m),a(x);var i=s(x,2);{var d=g=>{var n=je(),A=e(n,!0);a(n),S(y=>l(A,y),[()=>v()("rewards.no_stars_yet")]),p(g,n)},k=g=>{var n=Le();ua(n,5,()=>da().slice().reverse().slice(0,50),A=>A.id,(A,y)=>{var E=Ce(),M=s(e(E),2),b=e(M),f=e(b,!0);a(b);var R=s(b,2),$=e(R,!0);a(R),a(M),a(E),S(la=>{l(f,t(y).appId),l($,la)},[()=>new Date(t(y).earnedAt).toLocaleDateString("sv-SE")]),Ga(3,E,()=>Pa,()=>({x:-20,duration:300})),p(A,E)}),a(n),p(g,n)};F(i,g=>{da().length===0?g(d):g(k,!1)})}S(g=>{l(I,oa()),l(o,g)},[()=>v()("rewards.gold_stars")]),p(r,c)},de=r=>{var c=Ve();ua(c,21,()=>Ya,be,(x,_)=>{const I=va(()=>t(X).has(t(_).key));var m=He();let o;var i=e(m),d=e(i,!0);a(i);var k=s(i,2),g=e(k,!0);a(k);var n=s(k,2),A=e(n,!0);a(n);var y=s(n,2);{var E=b=>{var f=Fe(),R=e(f);a(f),S($=>l(R,`üìú ${$??""}`),[()=>v()("rewards.earn_diploma")]),D("click",f,()=>Y(t(_).key)),p(b,f)},M=va(()=>t(I)&&w().diplomasEnabled&&!H().some(b=>b.achievementKey===t(_).key));F(y,b=>{t(M)&&b(E)})}a(m),S((b,f)=>{o=U(m,1,"achievement-card svelte-idkh17",null,o,{locked:!t(I)}),l(d,t(I)?t(_).icon:"üîí"),l(g,b),l(A,f)},[()=>v()(t(_).labelKey),()=>v()(t(_).descKey)]),p(x,m)}),a(c),p(r,c)},ne=r=>{var c=Oe(),x=e(c);ua(x,1,J,o=>o.id,(o,i)=>{var d=ze();let k;var g=e(d),n=e(g),A=e(n,!0);a(n);var y=s(n,2),E=e(y,!0);a(y);var M=s(y,2);a(g);var b=s(g,2),f=e(b),R=e(f);a(f);var $=s(f,2),la=e($);a($),a(b);var Ea=s(b,2);{var Da=B=>{var Ka=qe(),pe=e(Ka);a(Ka),S(_e=>l(pe,`üéâ ${_e??""}`),[()=>v()("rewards.goal_completed")]),p(B,Ka)};F(Ea,B=>{t(i).completed&&B(Da)})}a(d),S(B=>{k=U(d,1,"goal-card svelte-idkh17",null,k,{completed:t(i).completed}),l(A,t(i).type==="stars"?"‚≠ê":"‚è∞"),l(E,t(i).rewardText),he(R,`width: ${B??""}%`),l(la,`${t(i).current??""} / ${t(i).target??""}`)},[()=>wa(t(i))]),D("click",M,()=>fa(t(i).id)),Ga(3,d,()=>Pa,()=>({y:20,duration:300})),p(o,d)});var _=s(x,2);{var I=o=>{var i=Be(),d=e(i),k=e(d),g=e(k,!0);a(k),k.value=k.__value="stars";var n=s(k),A=e(n,!0);a(n),n.value=n.__value="time",a(d);var y=s(d,2);ia(y);var E=s(y,2);ia(E);var M=s(E,2),b=e(M,!0);a(M);var f=s(M,2),R=e(f,!0);a(f),a(i),S(($,la,Ea,Da,B)=>{l(g,$),l(A,la),Ua(E,"placeholder",Ea),l(b,Da),l(R,B)},[()=>v()("rewards.goal_type.stars"),()=>v()("rewards.goal_type.time"),()=>v()("rewards.goal_reward_placeholder"),()=>v()("rewards.add_goal"),()=>v()("rewards.cancel")]),ke(d,()=>t(W),$=>K(W,$)),za(y,()=>t(q),$=>K(q,$)),za(E,()=>t(z),$=>K(z,$)),D("click",M,pa),D("click",f,()=>K(L,!1)),Ga(3,i,()=>Pa,()=>({y:20,duration:300})),p(o,i)},m=o=>{var i=Je(),d=e(i);a(i),S(k=>l(d,`‚ûï ${k??""}`),[()=>v()("rewards.new_goal")]),D("click",i,()=>K(L,!0)),p(o,i)};F(_,o=>{t(L)?o(I):o(m,!1)})}a(c),p(r,c)},ce=r=>{var c=me(),x=qa(c);{var _=m=>{var o=Qe(),i=e(o,!0);a(o),S(d=>l(i,d),[()=>v()("rewards.no_diplomas_yet")]),p(m,o)},I=m=>{var o=Ue();ua(o,5,H,i=>i.id,(i,d)=>{Ne(i,{get diploma(){return t(d)}})}),a(o),p(m,o)};F(x,m=>{H().length===0?m(_):m(I,!1)})}p(r,c)};F(ve,r=>{t(h)==="stars"?r(oe):t(h)==="achievements"?r(de,1):t(h)==="goals"?r(ne,2):t(h)==="diplomas"&&r(ce,3)})}a(Ha),a(P),S((r,c,x,_,I,m,o,i)=>{l(Z,`‚≠ê ${r??""}`),Ia(_a,w().enabled),l(ae,c),Ia(aa,w().praiseEnabled),aa.disabled=!w().enabled,l(ee,`üîä ${x??""}`),Ia(ea,w().diplomasEnabled),ea.disabled=!w().enabled,l(te,`üìú ${_??""}`),Ca=U(ta,1,"tab svelte-idkh17",null,Ca,{active:t(h)==="stars"}),l(se,`‚≠ê ${I??""} (${oa()??""})`),La=U(sa,1,"tab svelte-idkh17",null,La,{active:t(h)==="achievements"}),l(re,`üèÜ ${m??""}`),Ra=U(ra,1,"tab svelte-idkh17",null,Ra,{active:t(h)==="goals"}),l(le,`üéØ ${o??""}`),Fa=U(ma,1,"tab svelte-idkh17",null,Fa,{active:t(h)==="diplomas"}),l(ie,`üìú ${i??""}`)},[()=>v()("rewards.title"),()=>v()("rewards.settings.enabled"),()=>v()("rewards.settings.praise"),()=>v()("rewards.settings.diplomas"),()=>v()("rewards.tab.stars"),()=>v()("rewards.tab.achievements"),()=>v()("rewards.tab.goals"),()=>v()("rewards.tab.diplomas")]),D("change",_a,ka),D("change",aa,ca),D("change",ea,ga),D("click",ta,()=>K(h,"stars")),D("click",sa,()=>K(h,"achievements")),D("click",ra,()=>K(h,"goals")),D("click",ma,()=>K(h,"diplomas")),p(ba,P),Qa(),na()}Ja(["change","click"]);export{mt as component};
