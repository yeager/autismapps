import{d as zs,a as p,b as g,s as r,f as h,t as As}from"../chunks/Rl5oAaZp.js";import{ag as Bs,ao as I,b as oe,ap as Ds,s as R,ah as $,ai as Fs,a as l,ak as i,aj as e,al as t,as as Wt,an as ve}from"../chunks/5-o2xn5F.js";import{i as L}from"../chunks/CV8532PG.js";import{e as K,i as Q}from"../chunks/CWjGmADL.js";import{s as de,r as Is,a as Ps}from"../chunks/mnwxxtgv.js";import{s as y}from"../chunks/tEQK-CCT.js";import{s as Us,a as m,b as w}from"../chunks/1mwIFy_z.js";import{l as Ns,t as Hs,s as Os}from"../chunks/D-IBFiEI.js";import{g as zt,d as Cs,s as W,t as Gs,v as pe,e as ue,f as ge,p as _e,h as be,r as fe,a as me,i as qs,j as At,k as he,l as xe,m as ye}from"../chunks/TeHBZhWf.js";import{c as M}from"../chunks/B5a8mNDb.js";var Js=h('<span class="lang-soon svelte-1i19ct2">‚è≥</span>'),Xs=h('<button><span class="lang-flag svelte-1i19ct2"> </span> <span class="lang-name svelte-1i19ct2"> </span> <!></button>'),Zs=h('<span class="voice-check svelte-1i19ct2">‚úì</span>'),Ks=h('<span class="voice-dl svelte-1i19ct2">‚è≥</span>'),Qs=h('<button><span class="voice-name svelte-1i19ct2"> </span> <span class="voice-desc svelte-1i19ct2"> </span> <span class="voice-meta svelte-1i19ct2"> <!></span> <!> <!></button>'),Ys=h("<button> </button>"),ta=h("<button> </button>"),ea=h('<div class="setting setting-column svelte-1i19ct2"><span class="setting-label svelte-1i19ct2"> </span> <div class="slider-row svelte-1i19ct2"><span class="slider-label svelte-1i19ct2"> </span> <input type="range" min="0.3" max="1.5" step="0.1" class="speed-slider svelte-1i19ct2"/> <span class="slider-label svelte-1i19ct2"> </span></div> <span class="slider-value svelte-1i19ct2"> </span></div> <div class="setting svelte-1i19ct2"><span class="setting-label svelte-1i19ct2"> </span> <div class="setting-options svelte-1i19ct2"><button> </button></div></div> <div class="setting svelte-1i19ct2"><span class="setting-label svelte-1i19ct2"> </span> <div class="setting-options svelte-1i19ct2"><button> </button></div></div> <div class="setting svelte-1i19ct2"><span class="setting-label svelte-1i19ct2"> </span> <div class="setting-options svelte-1i19ct2"><button> </button></div></div> <div class="setting svelte-1i19ct2"><span class="setting-label svelte-1i19ct2"> </span> <div class="setting-options svelte-1i19ct2"><button> </button></div></div> <div class="setting svelte-1i19ct2"><span class="setting-label svelte-1i19ct2"> </span> <div class="setting-options svelte-1i19ct2"><button class="option-btn svelte-1i19ct2"> </button> <button class="option-btn svelte-1i19ct2"> </button></div></div> <div class="setting svelte-1i19ct2"><span class="setting-label svelte-1i19ct2"> </span> <div class="setting-options svelte-1i19ct2"><button class="option-btn danger svelte-1i19ct2"> </button></div></div>',1),sa=h('<div class="debug-row svelte-1i19ct2"><span class="debug-label svelte-1i19ct2">Senaste:</span> <span class="debug-value svelte-1i19ct2"> </span></div>'),aa=h('<div class="debug-row svelte-1i19ct2"><span class="debug-label svelte-1i19ct2">Fel:</span> <span class="debug-value err svelte-1i19ct2"> </span></div>'),ia=h('<button class="test-btn svelte-1i19ct2">üóëÔ∏è Rensa TTS-cache</button> <button class="test-btn svelte-1i19ct2">üì• Ladda ner r√∂ster</button>',1),na=h('<div class="settings-page svelte-1i19ct2"><h1 class="svelte-1i19ct2"> </h1> <div class="mode-toggle svelte-1i19ct2"><button> </button> <button> </button></div> <div class="settings-list svelte-1i19ct2"><div class="setting svelte-1i19ct2"><span class="setting-label svelte-1i19ct2"> </span> <div class="setting-options svelte-1i19ct2"></div></div> <div class="setting setting-column svelte-1i19ct2"><span class="setting-label svelte-1i19ct2"> </span> <p class="setting-hint svelte-1i19ct2"> <strong> </strong></p> <div class="voice-grid svelte-1i19ct2"></div> <button class="option-btn svelte-1i19ct2" style="margin-top: 8px"> </button></div> <div class="setting svelte-1i19ct2"><span class="setting-label svelte-1i19ct2"> </span> <div class="setting-options svelte-1i19ct2"></div></div> <div class="setting svelte-1i19ct2"><span class="setting-label svelte-1i19ct2"> </span> <div class="setting-options svelte-1i19ct2"></div></div> <!> <div class="section"><h2>üîç TTS Diagnostik</h2> <div class="debug-panel svelte-1i19ct2"><div class="debug-row svelte-1i19ct2"><span class="debug-label svelte-1i19ct2">Motor:</span> <span> </span></div> <div class="debug-row svelte-1i19ct2"><span class="debug-label svelte-1i19ct2">Piper status:</span> <span class="debug-value svelte-1i19ct2"> </span></div> <!> <!> <div class="debug-btns svelte-1i19ct2"><button class="test-btn svelte-1i19ct2">üîä Testa TTS</button> <!></div></div></div></div></div>');function ba(ke,Se){Bs(Se,!0);const c=()=>m(Hs,"$t",b),z=()=>m(Ns,"$locale",b),$e=()=>m(he,"$selectedVoiceSv",b),we=()=>m(xe,"$selectedVoiceEn",b),Y=()=>m(ye,"$ttsSpeed",b),Ee=()=>m(ue,"$textSize",b),Ve=()=>m(ge,"$theme",b),tt=()=>m(_e,"$phoneticEmphasis",b),et=()=>m(be,"$screenReaderEnabled",b),st=()=>m(fe,"$reducedMotion",b),at=()=>m(me,"$arasaacBW",b),_=()=>m(Gs,"$ttsStatus",b),[b,Re]=Us();let A=I(!1);const Le=[{code:"sv",label:"Svenska",flag:"üá∏üá™",ready:!0},{code:"en",label:"English",flag:"üá¨üáß",ready:!0},{code:"da",label:"Dansk",flag:"üá©üá∞",ready:!1},{code:"de",label:"Deutsch",flag:"üá©üá™",ready:!1},{code:"es",label:"Espa√±ol",flag:"üá™üá∏",ready:!1},{code:"fi",label:"Suomi",flag:"üá´üáÆ",ready:!1},{code:"fr",label:"Fran√ßais",flag:"üá´üá∑",ready:!1},{code:"it",label:"Italiano",flag:"üáÆüáπ",ready:!1},{code:"nb",label:"Norsk bokm√•l",flag:"üá≥üá¥",ready:!1},{code:"nl",label:"Nederlands",flag:"üá≥üá±",ready:!1},{code:"pl",label:"Polski",flag:"üáµüá±",ready:!1},{code:"pt_BR",label:"Portugu√™s (BR)",flag:"üáßüá∑",ready:!1}],Te=[{value:"normal",key:"settings.text_size.normal"},{value:"large",key:"settings.text_size.large"},{value:"extra-large",key:"settings.text_size.extra_large"}],Me=[{value:"light",key:"settings.theme.light"},{value:"dark",key:"settings.theme.dark"},{value:"high-contrast",key:"settings.theme.high_contrast"}];function je(s){Os(s),localStorage.setItem("locale",s),W(c()("settings.language"))}let P=I(oe([])),U=I(""),it=I("");Ds(()=>{zt().then(s=>R(P,s,!0)),R(U,Cs(),!0)});function We(){W(c()("app.title")+". "+c()("app.subtitle"))}let nt=I(oe([]));function Bt(){if(typeof speechSynthesis>"u")return;const s=z()==="sv"?"sv":"en",a=speechSynthesis.getVoices().filter(n=>n.lang.startsWith(s)).map((n,o)=>({id:`webspeech:${n.voiceURI}`,name:n.name.replace(/^Microsoft /,"").replace(/^Google /,""),lang:s,gender:"neutral",quality:n.localService?"high":"medium",sizeMb:0}));R(nt,a,!0)}typeof speechSynthesis<"u"&&(speechSynthesis.onvoiceschanged=Bt,Bt());function ze(){return l(U)==="piper"?pe(z()):l(nt).length>0?l(nt):pe(z())}function Ae(){return z()==="sv"?$e():we()}async function Be(s){s.lang==="sv"?w(he,s.id):w(xe,s.id),!s.id.startsWith("webspeech:")&&!l(P).includes(s.id)&&(R(it,s.id,!0),await At(s.lang),R(P,await zt(),!0),R(it,"")),W(s.lang==="sv"?"Hej, jag heter "+s.name:"Hello, my name is "+s.name)}function De(s){const a=parseFloat(s.target.value);w(ye,a)}function Fe(s){return s<=.5?c()("settings.tts_speed.slow"):s>=1?c()("settings.tts_speed.fast"):c()("settings.tts_speed.normal")}async function Ie(){confirm("Clear all data? This cannot be undone.")&&(await M.boards.clear(),await M.schedules.clear(),await M.settings.clear(),W(c()("settings.clear_data")))}async function Pe(){const s=await M.boards.toArray(),a=await M.schedules.toArray(),n=JSON.stringify({boards:s,schedules:a},null,2),o=new Blob([n],{type:"application/json"}),v=URL.createObjectURL(o),d=document.createElement("a");d.href=v,d.download="autismapps-data.json",d.click(),URL.revokeObjectURL(v)}function Ue(){const s=document.createElement("input");s.type="file",s.accept=".json",s.onchange=async()=>{const a=s.files?.[0];if(!a)return;const n=await a.text();try{const o=JSON.parse(n);if(o.boards)for(const v of o.boards)delete v.id,await M.boards.add(v);if(o.schedules)for(const v of o.schedules)delete v.id,await M.schedules.add(v);W(c()("settings.import_data"))}catch{alert("Invalid file")}},s.click()}var lt=na(),ct=e(lt),Ne=e(ct,!0);t(ct);var rt=i(ct,2),B=e(rt);let Dt;var He=e(B,!0);t(B);var N=i(B,2);let Ft;var Oe=e(N,!0);t(N),t(rt);var It=i(rt,2),ot=e(It),vt=e(ot),Ce=e(vt,!0);t(vt);var Pt=i(vt,2);K(Pt,21,()=>Le,Q,(s,a)=>{var n=Xs();let o;var v=e(n),d=e(v,!0);t(v);var f=i(v,2),S=e(f,!0);t(f);var x=i(f,2);{var E=T=>{var V=Js();g(T,V)};L(x,T=>{l(a).ready||T(E)})}t(n),$(()=>{o=y(n,1,"lang-btn svelte-1i19ct2",null,o,{active:z()===l(a).code,disabled:!l(a).ready}),n.disabled=!l(a).ready,de(n,"title",l(a).ready?l(a).label:`${l(a).label} ‚Äî coming soon`),r(d,l(a).flag),r(S,l(a).label)}),p("click",n,()=>je(l(a).code)),g(s,n)}),t(Pt),t(ot);var dt=i(ot,2),pt=e(dt),Ge=e(pt,!0);t(pt);var ut=i(pt,2),Ut=e(ut),Nt=i(Ut),qe=e(Nt,!0);t(Nt),t(ut);var gt=i(ut,2);K(gt,21,ze,Q,(s,a)=>{const n=Wt(()=>Ae()===l(a).id),o=Wt(()=>l(P).includes(l(a).id)),v=Wt(()=>l(it)===l(a).id);var d=Qs();let f;var S=e(d),x=e(S,!0);t(S);var E=i(S,2),T=e(E,!0);t(E);var V=i(E,2),H=e(V),D=i(H);{var F=u=>{var k=As();$(()=>r(k,`¬∑ ‚¨áÔ∏è ${l(a).sizeMb??""}MB`)),g(u,k)};L(D,u=>{!l(o)&&l(a).sizeMb>0&&u(F)})}t(V);var O=i(V,2);{var C=u=>{var k=Zs();g(u,k)};L(O,u=>{l(n)&&u(C)})}var j=i(O,2);{var G=u=>{var k=Ks();g(u,k)};L(j,u=>{l(v)&&u(G)})}t(d),$(()=>{f=y(d,1,"voice-card svelte-1i19ct2",null,f,{active:l(n),downloading:l(v)}),r(x,l(a).name),r(T,l(a).description||""),r(H,`${l(a).gender==="female"?"‚ôÄ":l(a).gender==="male"?"‚ôÇ":"‚ö¨"}
              ${l(a).quality??""} `)}),p("click",d,()=>Be(l(a))),g(s,d)}),t(gt);var _t=i(gt,2),Je=e(_t);t(_t),t(dt);var bt=i(dt,2),ft=e(bt),Xe=e(ft,!0);t(ft);var Ht=i(ft,2);K(Ht,21,()=>Te,Q,(s,a)=>{var n=Ys();let o;var v=e(n,!0);t(n),$(d=>{o=y(n,1,"option-btn svelte-1i19ct2",null,o,{active:Ee()===l(a).value}),r(v,d)},[()=>c()(l(a).key)]),p("click",n,()=>w(ue,l(a).value)),g(s,n)}),t(Ht),t(bt);var mt=i(bt,2),ht=e(mt),Ze=e(ht,!0);t(ht);var Ot=i(ht,2);K(Ot,21,()=>Me,Q,(s,a)=>{var n=ta();let o;var v=e(n,!0);t(n),$(d=>{o=y(n,1,"option-btn svelte-1i19ct2",null,o,{active:Ve()===l(a).value}),r(v,d)},[()=>c()(l(a).key)]),p("click",n,()=>w(ge,l(a).value)),g(s,n)}),t(Ot),t(mt);var Ct=i(mt,2);{var Ke=s=>{var a=ea(),n=ve(a),o=e(n),v=e(o,!0);t(o);var d=i(o,2),f=e(d),S=e(f,!0);t(f);var x=i(f,2);Is(x);var E=i(x,2),T=e(E,!0);t(E),t(d);var V=i(d,2),H=e(V);t(V),t(n);var D=i(n,2),F=e(D),O=e(F,!0);t(F);var C=i(F,2),j=e(C);let G;var u=e(j,!0);t(j),t(C),t(D);var k=i(D,2),St=e(k),is=e(St,!0);t(St);var te=i(St,2),q=e(te);let ee;var ns=e(q,!0);t(q),t(te),t(k);var $t=i(k,2),wt=e($t),ls=e(wt,!0);t(wt);var se=i(wt,2),J=e(se);let ae;var cs=e(J,!0);t(J),t(se),t($t);var Et=i($t,2),Vt=e(Et),rs=e(Vt,!0);t(Vt);var ie=i(Vt,2),X=e(ie);let ne;var os=e(X,!0);t(X),t(ie),t(Et);var Rt=i(Et,2),Lt=e(Rt),vs=e(Lt,!0);t(Lt);var le=i(Lt,2),Z=e(le),ds=e(Z);t(Z);var Tt=i(Z,2),ps=e(Tt);t(Tt),t(le),t(Rt);var ce=i(Rt,2),Mt=e(ce),us=e(Mt,!0);t(Mt);var re=i(Mt,2),jt=e(re),gs=e(jt);t(jt),t(re),t(ce),$((_s,bs,fs,ms,hs,xs,ys,ks,Ss,$s,ws,Es,Vs,Rs,Ls,Ts,Ms,js,Ws)=>{r(v,_s),r(S,bs),Ps(x,Y()),de(x,"aria-label",fs),r(T,ms),r(H,`${hs??""}x ‚Äî ${xs??""}`),r(O,ys),G=y(j,1,"toggle-btn svelte-1i19ct2",null,G,{on:tt()}),r(u,ks),r(is,Ss),ee=y(q,1,"toggle-btn svelte-1i19ct2",null,ee,{on:et()}),r(ns,$s),r(ls,ws),ae=y(J,1,"toggle-btn svelte-1i19ct2",null,ae,{on:!st()}),r(cs,Es),r(rs,Vs),ne=y(X,1,"toggle-btn svelte-1i19ct2",null,ne,{on:at()}),r(os,Rs),r(vs,Ls),r(ds,`üì¶ ${Ts??""}`),r(ps,`üì• ${Ms??""}`),r(us,js),r(gs,`üóëÔ∏è ${Ws??""}`)},[()=>c()("settings.tts_speed"),()=>c()("settings.tts_speed.slow"),()=>c()("settings.tts_speed"),()=>c()("settings.tts_speed.fast"),()=>Y().toFixed(1),()=>Fe(Y()),()=>c()("settings.phonetic"),()=>tt()?c()("settings.on"):c()("settings.off"),()=>c()("settings.screen_reader"),()=>et()?c()("settings.on"):c()("settings.off"),()=>c()("settings.animations"),()=>st()?c()("settings.off"):c()("settings.on"),()=>c()("settings.arasaac_bw"),()=>at()?c()("settings.on"):c()("settings.off"),()=>c()("settings.export_data"),()=>c()("settings.export_data"),()=>c()("settings.import_data"),()=>c()("settings.clear_data"),()=>c()("settings.clear_data")]),p("input",x,De),p("click",j,()=>w(_e,!tt())),p("click",q,()=>w(be,!et())),p("click",J,()=>w(fe,!st())),p("click",X,()=>w(me,!at())),p("click",Z,Pe),p("click",Tt,Ue),p("click",jt,Ie),g(s,a)};L(Ct,s=>{l(A)&&s(Ke)})}var Gt=i(Ct,2),qt=i(e(Gt),2),xt=e(qt),yt=i(e(xt),2);let Jt;var Qe=e(yt,!0);t(yt),t(xt);var kt=i(xt,2),Xt=i(e(kt),2),Ye=e(Xt,!0);t(Xt),t(kt);var Zt=i(kt,2);{var ts=s=>{var a=sa(),n=i(e(a),2),o=e(n);t(n),t(a),$(v=>r(o,`"${v??""}"`),[()=>_().lastSpoke.slice(0,40)]),g(s,a)};L(Zt,s=>{_().lastSpoke&&s(ts)})}var Kt=i(Zt,2);{var es=s=>{var a=aa(),n=i(e(a),2),o=e(n,!0);t(n),t(a),$(v=>r(o,v),[()=>_().lastError.slice(0,80)]),g(s,a)};L(Kt,s=>{_().lastError&&s(es)})}var Qt=i(Kt,2),Yt=e(Qt),ss=i(Yt,2);{var as=s=>{var a=ia(),n=ve(a),o=i(n,2);p("click",n,async()=>{const v=await zt();for(const d of v)await qs(d);alert(`Rensade ${v.length} cachade r√∂ster. Ladda om sidan.`)}),p("click",o,async()=>{await At("sv"),await At("en")}),g(s,a)};L(ss,s=>{_().engine==="piper"&&s(as)})}t(Qt),t(qt),t(Gt),t(It),t(lt),$((s,a,n,o,v,d,f,S,x)=>{r(Ne,s),Dt=y(B,1,"mode-btn svelte-1i19ct2",null,Dt,{active:!l(A)}),r(He,a),Ft=y(N,1,"mode-btn svelte-1i19ct2",null,Ft,{active:l(A)}),r(Oe,n),r(Ce,o),r(Ge,v),r(Ut,`${d??""}: `),r(qe,l(U)==="piper"?"Piper WASM":l(U)==="webspeech"?"Web Speech API":"‚Äî"),r(Je,`üîä ${f??""}`),r(Xe,S),r(Ze,x),Jt=y(yt,1,"debug-value svelte-1i19ct2",null,Jt,{ok:_().engine==="piper",warn:_().engine==="webspeech",err:_().engine==="none"}),r(Qe,_().engine==="piper"?"‚úÖ Piper WASM":_().engine==="webspeech"?"‚ö†Ô∏è Web Speech (fallback)":"‚ùå Ingen"),r(Ye,_().piperReady?"‚úÖ Redo":_().piperFailed?"‚ùå Ej tillg√§nglig":"‚è≥ Laddar...")},[()=>c()("settings.title"),()=>c()("settings.simple"),()=>c()("settings.advanced"),()=>c()("settings.language"),()=>c()("settings.voice"),()=>c()("settings.tts_engine"),()=>c()("settings.test_voice"),()=>c()("settings.text_size"),()=>c()("settings.theme")]),p("click",B,()=>R(A,!1)),p("click",N,()=>R(A,!0)),p("click",_t,We),p("click",Yt,()=>W("Hej! TTS-motorn testar.")),g(ke,lt),Fs(),Re()}zs(["click","input"]);export{ba as component};
