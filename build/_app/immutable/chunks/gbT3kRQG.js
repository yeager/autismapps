let i=null;async function u(){if(i)return i;try{const o=await fetch("/arasaac-sv.json");if(o.ok)return i=await o.json(),i}catch{}return i={},i}async function f(o){const a=await u();return o.map(r=>{const s=a[r.toLowerCase()];return{en:r,sv:s?.sv||r,id:s?.id||0}})}const l="https://api.arasaac.org/v1";async function w(o,a="en"){if(a==="sv"){const r=await u(),s=o.toLowerCase();for(const[n,t]of Object.entries(r))if(t.sv.toLowerCase()===s&&t.id)return[{id:t.id,keyword:t.sv,url:c(t.id,!1),urlBW:c(t.id,!0)}];const e=[];for(const[n,t]of Object.entries(r))if(t.sv.toLowerCase().includes(s)&&t.id&&(e.push({id:t.id,keyword:t.sv,url:c(t.id,!1),urlBW:c(t.id,!0)}),e.length>=50))break;if(e.length>0)return e}try{const r=await fetch(`${l}/pictograms/en/search/${encodeURIComponent(o)}`);if(!r.ok)return[];const s=await r.json(),e=a==="sv"?await u():null;return s.slice(0,50).map(n=>{const t=n.keywords[0]?.keyword||o,d=e&&e[t.toLowerCase()]?.sv||t;return{id:n._id,keyword:d,url:c(n._id,!1),urlBW:c(n._id,!0)}})}catch{return[]}}function c(o,a=!1,r=300){const s=`${l}/pictograms/${o}`,e=new URLSearchParams;a&&e.set("color","false"),r!==300&&e.set("resolution",String(r));const n=e.toString();return n?`${s}?${n}`:s}export{w as s,f as t};
