import{d as ne,a as f,b as k,s as u,f as $,t as N}from"../chunks/5jrULABA.js";import{S as le,T as I,U as xt,V as ie,$ as wt,Y as v,W as b,X as ce,d as t,_ as s,Z as i,a0 as r,a3 as ue,a1 as yt}from"../chunks/Bu7XKhG-.js";import{i as X}from"../chunks/64S6HLbC.js";import{e as Tt,i as $t}from"../chunks/D91HFo5I.js";import{t as vt,f as nt}from"../chunks/BufHwZ1v.js";import{s as Q,t as de,r as lt,a as F}from"../chunks/tnJ21aC2.js";import{s as tt}from"../chunks/DvixMhaI.js";import{s as me}from"../chunks/jfaHFQEH.js";import{b as it}from"../chunks/BHAKTja7.js";import{s as pe,a as _e}from"../chunks/Cvp8QKtV.js";import{g as fe}from"../chunks/BAFRKenw.js";import{a as ke,b as be}from"../chunks/BeKFXwpI.js";import{a as Ct}from"../chunks/BXvIZ4AA.js";var he=$('<button class="ctrl-btn work svelte-h83m8v"> </button> <button class="ctrl-btn break-btn svelte-h83m8v"> </button>',1),ge=$('<button class="ctrl-btn stop svelte-h83m8v"> </button>'),xe=$('<div class="quick-park svelte-h83m8v"><input type="text" class="svelte-h83m8v"/> <button class="park-btn svelte-h83m8v">ðŸ’­</button></div>'),we=$('<div class="timer-page svelte-h83m8v"><div class="current-task svelte-h83m8v"><span class="task-label svelte-h83m8v"> </span> <span class="task-name svelte-h83m8v"> </span></div> <div class="timer-ring svelte-h83m8v"><div class="timer-inner svelte-h83m8v"><span class="timer-time svelte-h83m8v"> </span> <span class="timer-state svelte-h83m8v"><!></span></div></div> <div class="timer-controls svelte-h83m8v"><!></div> <!></div>'),ye=$('<div><button class="check-btn svelte-h83m8v"> </button> <span class="task-text svelte-h83m8v"> </span> <button class="del-btn svelte-h83m8v" aria-label="Remove">âœ•</button></div>'),Te=$('<p class="empty svelte-h83m8v"> </p>'),$e=$('<div class="tasks-page svelte-h83m8v"><div class="add-row svelte-h83m8v"><input type="text" class="svelte-h83m8v"/> <button class="add-btn svelte-h83m8v">+</button></div> <div class="task-list svelte-h83m8v"><!> <!></div></div>'),Ce=$('<div class="parked-item svelte-h83m8v"><span class="svelte-h83m8v"> </span> <button class="del-btn svelte-h83m8v" aria-label="Remove">âœ•</button></div>'),Pe=$('<p class="empty svelte-h83m8v"> </p>'),Se=$('<div class="parked-page svelte-h83m8v"><p class="parked-desc svelte-h83m8v"> </p> <div class="add-row svelte-h83m8v"><input type="text" class="svelte-h83m8v"/> <button class="add-btn svelte-h83m8v">+</button></div> <div class="parked-list svelte-h83m8v"><!> <!></div></div>'),Ae=$('<div class="focus-page svelte-h83m8v"><header class="app-header svelte-h83m8v"><button class="back-btn svelte-h83m8v"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M15 18l-6-6 6-6"></path></svg></button> <h1 class="svelte-h83m8v"> </h1> <span class="pomo-badge svelte-h83m8v"> </span></header> <nav class="tab-bar svelte-h83m8v"><button> </button> <button> </button> <button> </button></nav> <!> <footer class="credit svelte-h83m8v"> </footer></div>');function Ye(Pt,St){le(St,!0);const o=()=>_e(de,"$t",At),[At,Bt]=pe();let ct=25,ut=5,dt=15,Et=4,P=I("timer"),m=I("idle"),q=I(0),G=I(null),W=I(0),y=I(xt([])),Y=I(""),M=I(xt([])),D=I("");ie(()=>{It()});async function It(){const e=wt(Ct);if(e){const a=await ke(e,"focus-buddy");a&&(v(y,a.tasks||[],!0),v(M,a.parked||[],!0),v(W,a.pomodoroCount||0,!0))}}async function O(){const e=wt(Ct);e&&await be(e,"focus-buddy",{tasks:t(y),parked:t(M),pomodoroCount:t(W)})}function Mt(e){const a=Math.floor(e/60),p=e%60;return`${a.toString().padStart(2,"0")}:${p.toString().padStart(2,"0")}`}function qt(){H(),v(m,"work"),v(q,ct*60),mt(),F(o()("focus.work_start"))}function Dt(){H();const e=t(W)>0&&t(W)%Et===0;v(m,e?"longbreak":"break",!0),v(q,(e?dt:ut)*60),mt(),F(e?o()("focus.long_break"):o()("focus.break_start"))}function mt(){v(G,setInterval(()=>{yt(q,-1),t(q)<=0&&(H(),Lt())},1e3),!0)}function H(){t(G)&&(clearInterval(t(G)),v(G,null))}function Ut(){H(),v(m,"idle"),v(q,0)}function Lt(){try{const e=new AudioContext,a=e.createOscillator();a.frequency.value=800,a.connect(e.destination),a.start(),setTimeout(()=>{a.stop(),e.close()},300)}catch{}t(m)==="work"?(yt(W),F(o()("focus.work_done")),O(),v(m,"idle")):(F(o()("focus.break_done")),v(m,"idle"))}function Rt(){if(t(m)==="idle")return 0;const e=t(m)==="work"?ct*60:t(m)==="longbreak"?dt*60:ut*60;return e>0?(e-t(q))/e*100:0}function pt(){t(Y).trim()&&(v(y,[...t(y),{id:crypto.randomUUID(),text:t(Y).trim(),done:!1}],!0),v(Y,""),O())}function Wt(e){v(y,t(y).map(a=>a.id===e?{...a,done:!a.done}:a),!0),O()}function Ot(e){v(y,t(y).filter(a=>a.id!==e),!0),O()}function J(){t(D).trim()&&(v(M,[...t(M),t(D).trim()],!0),v(D,""),O(),F(o()("focus.thought_parked")))}function Vt(e){v(M,t(M).filter((a,p)=>p!==e),!0),O()}function Xt(){const e=t(y).filter(a=>!a.done);return e.length>0?e[0].text:o()("focus.no_tasks")}function Yt(){return t(m)==="work"?"#E74C3C":t(m)==="break"||t(m)==="longbreak"?"#27AE60":"#3498DB"}var et=Ae(),at=s(et),st=s(at),rt=i(st,2),Zt=s(rt,!0);r(rt);var _t=i(rt,2),jt=s(_t);r(_t),r(at);var ot=i(at,2),Z=s(ot);let ft;var zt=s(Z);r(Z);var j=i(Z,2);let kt;var Ft=s(j);r(j);var K=i(j,2);let bt;var Gt=s(K);r(K),r(ot);var ht=i(ot,2);{var Ht=e=>{var a=we(),p=s(a),g=s(p),S=s(g);r(g);var x=i(g,2),V=s(x,!0);r(x),r(p);var A=i(p,2),U=s(A),_=s(U),w=s(_,!0);r(_);var d=i(_,2),h=s(d);{var C=n=>{var l=N();b(c=>u(l,c),[()=>o()("focus.focus_time")]),k(n,l)},B=n=>{var l=N();b(c=>u(l,c),[()=>o()("focus.break_time")]),k(n,l)},E=n=>{var l=N();b(c=>u(l,c),[()=>o()("focus.long_break_time")]),k(n,l)},z=n=>{var l=N();b(c=>u(l,c),[()=>o()("focus.ready")]),k(n,l)};X(h,n=>{t(m)==="work"?n(C):t(m)==="break"?n(B,1):t(m)==="longbreak"?n(E,2):n(z,!1)})}r(d),r(U),r(A);var L=i(A,2),Qt=s(L);{var te=n=>{var l=he(),c=ue(l),R=s(c);r(c);var T=i(c,2),re=s(T);r(T),b((oe,ve)=>{u(R,`â–¶ï¸ ${oe??""}`),u(re,`â˜• ${ve??""}`)},[()=>o()("focus.start_work"),()=>o()("focus.start_break")]),f("click",c,qt),f("click",T,Dt),k(n,l)},ee=n=>{var l=ge(),c=s(l);r(l),b(R=>u(c,`â¹ï¸ ${R??""}`),[()=>o()("focus.stop")]),f("click",l,Ut),k(n,l)};X(Qt,n=>{t(m)==="idle"?n(te):n(ee,!1)})}r(L);var ae=i(L,2);{var se=n=>{var l=xe(),c=s(l);lt(c);var R=i(c,2);r(l),b(T=>Q(c,"placeholder",T),[()=>o()("focus.quick_thought")]),f("keydown",c,T=>{T.key==="Enter"&&J()}),it(c,()=>t(D),T=>v(D,T)),f("click",R,J),k(n,l)};X(ae,n=>{t(m)==="work"&&n(se)})}r(a),b((n,l,c,R,T)=>{u(S,`${n??""}:`),u(V,l),me(A,`--progress: ${c??""}; --color: ${R??""}`),u(w,T)},[()=>o()("focus.working_on"),Xt,Rt,Yt,()=>Mt(t(q))]),vt(3,a,()=>nt),k(e,a)},Jt=e=>{var a=$e(),p=s(a),g=s(p);lt(g);var S=i(g,2);r(p);var x=i(p,2),V=s(x);Tt(V,17,()=>t(y),$t,(_,w)=>{var d=ye();let h;var C=s(d),B=s(C,!0);r(C);var E=i(C,2),z=s(E,!0);r(E);var L=i(E,2);r(d),b(()=>{h=tt(d,1,"task-item svelte-h83m8v",null,h,{done:t(w).done}),u(B,t(w).done?"âœ…":"â¬œ"),u(z,t(w).text)}),f("click",C,()=>Wt(t(w).id)),f("click",L,()=>Ot(t(w).id)),k(_,d)});var A=i(V,2);{var U=_=>{var w=Te(),d=s(w,!0);r(w),b(h=>u(d,h),[()=>o()("focus.no_tasks_yet")]),k(_,w)};X(A,_=>{t(y).length===0&&_(U)})}r(x),r(a),b(_=>Q(g,"placeholder",_),[()=>o()("focus.add_task")]),f("keydown",g,_=>{_.key==="Enter"&&pt()}),it(g,()=>t(Y),_=>v(Y,_)),f("click",S,pt),vt(3,a,()=>nt),k(e,a)},Kt=e=>{var a=Se(),p=s(a),g=s(p,!0);r(p);var S=i(p,2),x=s(S);lt(x);var V=i(x,2);r(S);var A=i(S,2),U=s(A);Tt(U,17,()=>t(M),$t,(d,h,C)=>{var B=Ce(),E=s(B),z=s(E);r(E);var L=i(E,2);r(B),b(()=>u(z,`ðŸ’­ ${t(h)??""}`)),f("click",L,()=>Vt(C)),k(d,B)});var _=i(U,2);{var w=d=>{var h=Pe(),C=s(h,!0);r(h),b(B=>u(C,B),[()=>o()("focus.no_parked")]),k(d,h)};X(_,d=>{t(M).length===0&&d(w)})}r(A),r(a),b((d,h)=>{u(g,d),Q(x,"placeholder",h)},[()=>o()("focus.parked_desc"),()=>o()("focus.add_thought")]),f("keydown",x,d=>{d.key==="Enter"&&J()}),it(x,()=>t(D),d=>v(D,d)),f("click",V,J),vt(3,a,()=>nt),k(e,a)};X(ht,e=>{t(P)==="timer"?e(Ht):t(P)==="tasks"?e(Jt,1):t(P)==="parked"&&e(Kt,2)})}var gt=i(ht,2),Nt=s(gt,!0);r(gt),r(et),b((e,a,p,g,S,x)=>{Q(st,"aria-label",e),u(Zt,a),u(jt,`ðŸ… ${t(W)??""}`),ft=tt(Z,1,"tab svelte-h83m8v",null,ft,{active:t(P)==="timer"}),u(zt,`â±ï¸ ${p??""}`),kt=tt(j,1,"tab svelte-h83m8v",null,kt,{active:t(P)==="tasks"}),u(Ft,`ðŸ“‹ ${g??""}`),bt=tt(K,1,"tab svelte-h83m8v",null,bt,{active:t(P)==="parked"}),u(Gt,`ðŸ’­ ${S??""}`),u(Nt,x)},[()=>o()("app.back"),()=>o()("focus.title"),()=>o()("focus.timer"),()=>o()("focus.tasks"),()=>o()("focus.parked"),()=>o()("focus.credit")]),f("click",st,()=>fe("/")),f("click",Z,()=>v(P,"timer")),f("click",j,()=>v(P,"tasks")),f("click",K,()=>v(P,"parked")),k(Pt,et),ce(),Bt()}ne(["click","keydown"]);export{Ye as component};
