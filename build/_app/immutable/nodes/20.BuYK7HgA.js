import{d as kt,a as c,b as h,s as j,f as x,e as le,c as We}from"../chunks/5jrULABA.js";import{S as yt,T as k,U as ne,V as wt,W as $,d as e,X as xt,Y as s,_ as l,Z as n,a0 as r,a3 as St,a4 as Ce,$ as Fe,a1 as Re}from"../chunks/Bu7XKhG-.js";import{i as U}from"../chunks/64S6HLbC.js";import{e as oe,i as ve}from"../chunks/D91HFo5I.js";import{s as C,a as W,t as It,r as he,l as $t,b as Dt}from"../chunks/tnJ21aC2.js";import{s as Ot}from"../chunks/DvixMhaI.js";import{s as Bt}from"../chunks/jfaHFQEH.js";import{b as je}from"../chunks/BHAKTja7.js";import{s as Tt,a as Et}from"../chunks/Cvp8QKtV.js";import{s as Mt}from"../chunks/gbT3kRQG.js";import{c as Nt,e as Ut,f as Ct}from"../chunks/BeKFXwpI.js";var Ft=x('<div class="saved-item svelte-1j0fvg2"><button class="saved-btn svelte-1j0fvg2"> </button> <button class="delete-btn svelte-1j0fvg2">‚úï</button></div>'),Rt=x('<p class="muted svelte-1j0fvg2">No schedules yet</p>'),Wt=x('<div class="panel svelte-1j0fvg2"><h3 class="svelte-1j0fvg2"> </h3> <!></div>'),Lt=x('<button class="picto-item svelte-1j0fvg2"><img width="60" height="60" loading="lazy" class="svelte-1j0fvg2"/> <span class="svelte-1j0fvg2"> </span></button>'),zt=x('<div class="picto-results svelte-1j0fvg2"></div>'),At=x('<div class="search-area svelte-1j0fvg2"><p class="search-label svelte-1j0fvg2"> </p> <div class="search-row svelte-1j0fvg2"><input type="search" class="svelte-1j0fvg2"/> <button class="btn primary svelte-1j0fvg2"> </button> <button class="btn svelte-1j0fvg2">‚úï</button></div> <!> <div class="search-row svelte-1j0fvg2"><input type="text" placeholder="Or type activity name..." class="svelte-1j0fvg2"/> <button class="btn svelte-1j0fvg2">‚ûï</button></div></div>'),Ht=x('<button class="btn timer-btn svelte-1j0fvg2">‚àí</button> <button class="btn timer-btn svelte-1j0fvg2">+</button> <button class="btn primary svelte-1j0fvg2">‚ñ∂</button>',1),Kt=x('<button class="btn danger svelte-1j0fvg2">‚è∏</button>'),Pt=x('<span class="now-badge svelte-1j0fvg2"> </span>'),Qt=We('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svelte-1j0fvg2"><path d="M20 6L9 17l-5-5" class="svelte-1j0fvg2"></path></svg>'),Vt=We('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--border)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1j0fvg2"><circle cx="12" cy="12" r="10" class="svelte-1j0fvg2"></circle></svg>'),Xt=x('<img width="56" height="56" class="item-picto svelte-1j0fvg2"/>'),Yt=x('<span class="item-time svelte-1j0fvg2"> </span>'),Zt=x('<div draggable="true" role="listitem"><!> <span class="drag-handle no-print svelte-1j0fvg2" aria-hidden="true">‚†ø</span> <button class="check-btn svelte-1j0fvg2"><!></button> <!> <span class="item-label svelte-1j0fvg2" role="button" tabindex="0"> </span> <!> <div class="item-actions no-print svelte-1j0fvg2"><button class="icon-btn svelte-1j0fvg2" aria-label="Speak">üîä</button> <button class="icon-btn svelte-1j0fvg2" aria-label="Set as now">üìç</button> <button class="icon-btn danger svelte-1j0fvg2" aria-label="Remove">‚úï</button></div></div>'),qt=x('<p class="empty-section svelte-1j0fvg2"> </p>'),Gt=x('<div class="section svelte-1j0fvg2"><div class="section-header svelte-1j0fvg2"><span class="section-emoji svelte-1j0fvg2"> </span> <h3 class="svelte-1j0fvg2"> </h3> <button class="add-btn no-print svelte-1j0fvg2"> </button></div> <div class="items-list svelte-1j0fvg2"></div></div>'),Jt=x('<div class="schedule-app svelte-1j0fvg2"><div class="schedule-toolbar no-print svelte-1j0fvg2"><h2 class="svelte-1j0fvg2"> </h2> <div class="toolbar-row svelte-1j0fvg2"><input type="text" class="name-input svelte-1j0fvg2"/> <button class="btn primary svelte-1j0fvg2"> </button> <button class="btn svelte-1j0fvg2"> </button> <button class="btn svelte-1j0fvg2"> </button></div> <!> <!> <div class="timer-section svelte-1j0fvg2"><span class="timer-label svelte-1j0fvg2">‚è±Ô∏è</span> <span class="timer-display svelte-1j0fvg2"> </span> <!> <button class="btn svelte-1j0fvg2">‚Üª</button></div></div> <div class="schedule-sections svelte-1j0fvg2"></div></div>');function us(Le,ze){yt(ze,!0);const b=()=>Et(It,"$t",Ae),[Ae,He]=Tt();let X=k(""),d=k(ne([])),F=k(""),L=k(ne([])),Y=k(!1),S=k(null),ke=k(ne([])),Z=k(!1),q=k(-1),I=k(null),z=k(null),H=k(ne(new Set)),T=k(5),K=k(0),G=k(!1),J=k(null);const ye=[{key:"morning",emoji:"üåÖ"},{key:"afternoon",emoji:"‚òÄÔ∏è"},{key:"evening",emoji:"üåô"}];function we(t){return e(d).filter(a=>a.section===t)}async function xe(){if(!e(F).trim())return;s(Y,!0);const t=Fe($t);s(L,await Mt(e(F),t),!0),s(Y,!1)}function Ke(t){if(!e(S))return;const a=Fe(Dt),i={index:e(d).length,pictogramId:t.id,pictogramUrl:a?t.urlBW:t.url,label:t.keyword,completed:!1,section:e(S)};s(d,[...e(d),i],!0),W(t.keyword),s(S,null),s(F,""),s(L,[],!0)}function Se(t,a){if(!a.trim())return;const i={index:e(d).length,label:a.trim(),completed:!1,section:t};s(d,[...e(d),i],!0),W(a)}function Pe(t){if(t.completed=!t.completed,s(d,[...e(d)],!0),t.completed){const a=e(d).indexOf(t);s(H,new Set([...e(H),a]),!0),setTimeout(()=>{s(H,new Set([...e(H)].filter(i=>i!==a)),!0)},600),W(b()("schedule.done"))}}function Qe(t){s(d,e(d).filter(a=>a!==t),!0)}function ie(t){W(t.label)}function Ve(t){s(q,t,!0);const a=e(d)[t];a&&W(b()("schedule.now")+": "+a.label)}function Xe(){const t=new Date().getHours();let a="morning";t>=12&&t<17?a="afternoon":t>=17&&(a="evening");const u=we(a).find(_=>!_.completed);u&&s(q,e(d).indexOf(u),!0)}function Ye(t){s(I,t,!0)}function Ze(t,a){t.preventDefault(),s(z,a,!0)}function qe(t,a){if(t.preventDefault(),!e(I)||e(I)===a){s(I,null),s(z,null);return}if(e(I).section!==a.section){s(I,null),s(z,null);return}const i=e(I).section,u=e(d).filter(y=>y.section===i);e(d).filter(y=>y.section!==i);const _=u.indexOf(e(I)),g=u.indexOf(a);_!==-1&&g!==-1&&(u.splice(_,1),u.splice(g,0,e(I)));const f=[];for(const y of ye)y.key===i?f.push(...u):f.push(...e(d).filter(D=>D.section===y.key));s(d,f,!0),s(I,null),s(z,null)}function Ge(){s(I,null),s(z,null)}function Je(){e(G)||(s(G,!0),s(J,setInterval(()=>{e(K)>0?Re(K,-1):e(T)>0?(Re(T,-1),s(K,59)):(ce(),W(b()("schedule.done")))},1e3),!0))}function ce(){s(G,!1),e(J)&&(clearInterval(e(J)),s(J,null))}function et(){ce(),s(T,5),s(K,0)}async function tt(){const t={name:e(X)||b()("schedule.today"),date:new Date().toISOString().split("T")[0],items:[...e(d)],createdAt:new Date};await Ut(t),W(b()("board.save")),await ee()}async function ee(){s(ke,await Nt(),!0)}function st(t){s(X,t.name,!0),s(d,[...t.items],!0),s(Z,!1),Xe()}async function at(t){await Ct(t),await ee()}function rt(){window.print()}let E=k("");wt(()=>{ee()});var ue=Jt(),de=l(ue),fe=l(de),lt=l(fe,!0);r(fe);var ge=n(fe,2),te=l(ge);he(te);var se=n(te,2),nt=l(se);r(se);var ae=n(se,2),ot=l(ae);r(ae);var pe=n(ae,2),vt=l(pe);r(pe),r(ge);var Ie=n(ge,2);{var it=t=>{var a=Wt(),i=l(a),u=l(i,!0);r(i);var _=n(i,2);oe(_,17,()=>e(ke),ve,(g,f)=>{var y=Ft(),D=l(y),M=l(D);r(D);var P=n(D,2);r(y),$(()=>j(M,`${e(f).name??""} ‚Äî ${e(f).date??""}`)),c("click",D,()=>st(e(f))),c("click",P,()=>e(f).id&&at(e(f).id)),h(g,y)},g=>{var f=Rt();h(g,f)}),r(a),$(g=>j(u,g),[()=>b()("schedule.my_schedules")]),h(t,a)};U(Ie,t=>{e(Z)&&t(it)})}var $e=n(Ie,2);{var ct=t=>{var a=At(),i=l(a),u=l(i);r(i);var _=n(i,2),g=l(_);he(g);var f=n(g,2),y=l(f,!0);r(f);var D=n(f,2);r(_);var M=n(_,2);{var P=p=>{var w=zt();oe(w,21,()=>e(L),ve,(A,N)=>{var R=Lt(),B=l(R),re=n(B,2),_e=l(re,!0);r(re),r(R),$(()=>{C(R,"title",e(N).keyword),C(B,"src",e(N).url),C(B,"alt",e(N).keyword),j(_e,e(N).keyword)}),c("click",R,()=>Ke(e(N))),h(A,R)}),r(w),h(p,w)};U(M,p=>{e(L).length>0&&p(P)})}var Q=n(M,2),O=l(Q);he(O);var o=n(O,2);r(Q),r(a),$((p,w,A)=>{j(u,`${p??""} ‚Äî ${w??""}`),C(g,"placeholder",A),f.disabled=e(Y),j(y,e(Y)?"...":"üîç")},[()=>b()("schedule.add_activity"),()=>b()(`schedule.${e(S)}`),()=>b()("board.search_pictograms")]),c("keydown",g,p=>{p.key==="Enter"&&xe()}),je(g,()=>e(F),p=>s(F,p)),c("click",f,xe),c("click",D,()=>{s(S,null),s(L,[],!0),s(F,"")}),c("keydown",O,p=>{p.key==="Enter"&&e(E).trim()&&e(S)&&(Se(e(S),e(E)),s(E,""),s(S,null))}),je(O,()=>e(E),p=>s(E,p)),c("click",o,()=>{e(E).trim()&&e(S)&&(Se(e(S),e(E)),s(E,""),s(S,null))}),h(t,a)};U($e,t=>{e(S)&&t(ct)})}var De=n($e,2),be=n(l(De),2),ut=l(be);r(be);var Oe=n(be,2);{var dt=t=>{var a=Ht(),i=St(a),u=n(i,2),_=n(u,2);c("click",i,()=>{s(T,Math.max(1,e(T)-1),!0)}),c("click",u,()=>{s(T,Math.min(60,e(T)+1),!0)}),c("click",_,Je),h(t,a)},ft=t=>{var a=Kt();c("click",a,ce),h(t,a)};U(Oe,t=>{e(G)?t(ft,!1):t(dt)})}var gt=n(Oe,2);r(De),r(de);var Be=n(de,2);oe(Be,21,()=>ye,ve,(t,a)=>{const i=Ce(()=>we(e(a).key));var u=Gt(),_=l(u),g=l(_),f=l(g,!0);r(g);var y=n(g,2),D=l(y,!0);r(y);var M=n(y,2),P=l(M);r(M),r(_);var Q=n(_,2);oe(Q,21,()=>e(i),ve,(O,o)=>{const p=Ce(()=>e(d).indexOf(e(o)));var w=Zt();let A;var N=l(w);{var R=v=>{var m=Pt(),me=l(m,!0);r(m),$(jt=>j(me,jt),[()=>b()("schedule.now")]),h(v,m)};U(N,v=>{e(p)===e(q)&&v(R)})}var B=n(N,4),re=l(B);{var _e=v=>{var m=Qt();h(v,m)},pt=v=>{var m=Vt();h(v,m)};U(re,v=>{e(o).completed?v(_e):v(pt,!1)})}r(B);var Te=n(B,2);{var bt=v=>{var m=Xt();$(()=>{C(m,"src",e(o).pictogramUrl),C(m,"alt",e(o).label)}),h(v,m)};U(Te,v=>{e(o).pictogramUrl&&v(bt)})}var V=n(Te,2),_t=l(V,!0);r(V);var Ee=n(V,2);{var mt=v=>{var m=Yt(),me=l(m,!0);r(m),$(()=>j(me,e(o).time)),h(v,m)};U(Ee,v=>{e(o).time&&v(mt)})}var Me=n(Ee,2),Ne=l(Me),Ue=n(Ne,2),ht=n(Ue,2);r(Me),r(w),$((v,m)=>{A=Ot(w,1,"schedule-item svelte-1j0fvg2",null,A,v),C(B,"aria-label",m),j(_t,e(o).label)},[()=>({completed:e(o).completed,"is-now":e(p)===e(q),"drag-over":e(z)===e(o),"just-completed":e(H).has(e(p))}),()=>e(o).completed?b()("schedule.done"):"Mark done"]),le("dragstart",w,()=>Ye(e(o))),le("dragover",w,v=>Ze(v,e(o))),le("drop",w,v=>qe(v,e(o))),le("dragend",w,Ge),c("click",B,()=>Pe(e(o))),c("click",V,()=>ie(e(o))),c("keydown",V,v=>{v.key==="Enter"&&ie(e(o))}),c("click",Ne,()=>ie(e(o))),c("click",Ue,()=>Ve(e(p))),c("click",ht,()=>Qe(e(o))),h(O,w)},O=>{var o=qt(),p=l(o,!0);r(o),$(w=>j(p,w),[()=>b()("schedule.add_activity")]),h(O,o)}),r(Q),r(u),$((O,o)=>{Bt(u,`--section-color: ${e(a).key==="morning"?"#F59E0B":e(a).key==="afternoon"?"#3B82F6":"#8B5CF6"}`),j(f,e(a).emoji),j(D,O),j(P,`+ ${o??""}`)},[()=>b()(`schedule.${e(a).key}`),()=>b()("schedule.add_activity")]),c("click",M,()=>{s(S,e(a).key,!0),s(L,[],!0),s(F,"")}),h(t,u)}),r(Be),r(ue),$((t,a,i,u,_,g,f)=>{j(lt,t),C(te,"placeholder",a),j(nt,`üíæ ${i??""}`),j(ot,`üñ®Ô∏è ${u??""}`),j(vt,`üìÇ ${_??""}`),j(ut,`${g??""}:${f??""}`)},[()=>b()("schedule.title"),()=>b()("schedule.today"),()=>b()("board.save"),()=>b()("schedule.print"),()=>b()("schedule.my_schedules"),()=>String(e(T)).padStart(2,"0"),()=>String(e(K)).padStart(2,"0")]),je(te,()=>e(X),t=>s(X,t)),c("click",se,tt),c("click",ae,rt),c("click",pe,()=>{s(Z,!e(Z)),ee()}),c("click",gt,et),h(Le,ue),xt(),He()}kt(["click","keydown"]);export{us as component};
