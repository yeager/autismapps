import{d as qt,a as _,b as m,s as v,f,e as kt}from"../chunks/5jrULABA.js";import{S as wt,T as q,U as fe,V as xt,W as k,d as e,X as Et,Y as i,Z as c,_ as o,$ as Y,a0 as s}from"../chunks/Bu7XKhG-.js";import{i as T}from"../chunks/64S6HLbC.js";import{e as I,i as P}from"../chunks/D91HFo5I.js";import{s as E,a as ge,t as Bt,l as Ue,r as Z,b as De}from"../chunks/tnJ21aC2.js";import{s as he}from"../chunks/DvixMhaI.js";import{s as O}from"../chunks/jfaHFQEH.js";import{b as J}from"../chunks/BHAKTja7.js";import{s as Ct,a as $t}from"../chunks/Cvp8QKtV.js";import{s as ze}from"../chunks/gbT3kRQG.js";import{g as St,s as Tt,d as At}from"../chunks/BeKFXwpI.js";var It=f("<button> </button>"),Pt=f("<button></button>"),Kt=f('<button class="picto-item svelte-16y2cqy"><img width="60" height="60" loading="lazy" class="svelte-16y2cqy"/> <span class="svelte-16y2cqy"> </span></button>'),Lt=f('<div class="picto-results svelte-16y2cqy"></div>'),Ut=f('<p class="no-results svelte-16y2cqy"> </p>'),Dt=f('<button class="template-item svelte-16y2cqy"><span class="template-dot svelte-16y2cqy"></span> </button>'),zt=f('<div class="panel svelte-16y2cqy"><h3 class="svelte-16y2cqy"> </h3> <!></div>'),Ft=f('<div class="saved-board-item svelte-16y2cqy"><button class="saved-board-btn svelte-16y2cqy"><span class="template-dot svelte-16y2cqy"></span> </button> <button class="delete-btn svelte-16y2cqy">âœ•</button></div>'),Ht=f('<p class="no-results svelte-16y2cqy">No saved boards yet</p>'),Mt=f('<div class="panel svelte-16y2cqy"><h3 class="svelte-16y2cqy"> </h3> <!></div>'),Nt=f('<div class="board-center svelte-16y2cqy"><span class="center-label svelte-16y2cqy"> </span></div>'),Ot=f('<img loading="lazy" class="svelte-16y2cqy"/>'),Wt=f('<input class="label-edit svelte-16y2cqy" type="text"/>'),Gt=f('<span class="cell-label svelte-16y2cqy"> </span>'),Rt=f('<span class="cell-placeholder svelte-16y2cqy">+</span>'),jt=f('<span class="cell-clear svelte-16y2cqy" role="button" tabindex="0">âœ•</span>'),Qt=f("<button><!> <!> <!></button>"),Vt=f('<div class="board-builder svelte-16y2cqy"><div class="builder-sidebar svelte-16y2cqy"><div class="toolbar svelte-16y2cqy"><h2 class="svelte-16y2cqy"> </h2> <div class="field svelte-16y2cqy"><label for="board-name" class="svelte-16y2cqy"> </label> <input id="board-name" type="text" placeholder="My Board" class="svelte-16y2cqy"/></div> <div class="field svelte-16y2cqy"><label for="center-title" class="svelte-16y2cqy"> </label> <input id="center-title" type="text" class="svelte-16y2cqy"/></div> <div class="field svelte-16y2cqy"><span id="grid-size-label"> </span> <div class="grid-options svelte-16y2cqy"></div></div> <div class="field svelte-16y2cqy"><span id="cat-color-label"> </span> <div class="color-options svelte-16y2cqy"></div></div> <div class="field svelte-16y2cqy"><label for="picto-search" class="svelte-16y2cqy"> </label> <div class="search-input svelte-16y2cqy"><input id="picto-search" type="search" class="svelte-16y2cqy"/> <button class="search-go svelte-16y2cqy"> </button></div></div> <!> <div class="actions svelte-16y2cqy"><button class="btn primary svelte-16y2cqy"> </button> <button class="btn svelte-16y2cqy"> </button> <button class="btn svelte-16y2cqy"> </button> <button class="btn svelte-16y2cqy"> </button> <button class="btn svelte-16y2cqy"> </button></div> <!> <!></div></div> <div class="builder-main svelte-16y2cqy"><div class="board-grid svelte-16y2cqy"><!> <!></div></div></div>');function ia(Fe,He){wt(He,!0);const u=()=>$t(Bt,"$t",Me),[Me,Ne]=Ct();let $=q(4),K=q(""),S=q(""),A=q("#E67E22"),h=q(fe(te(4))),L=q(""),ee=q(fe([])),U=q(!1),B=q(null),qe=q(fe([])),D=q(!1),z=q(!1),F=q(null),W=q("");const Oe=[3,4,5,6],We=["#E67E22","#3498DB","#27AE60","#9B59B6","#F1C40F","#E74C3C","#1ABC9C","#E91E63"];function te(t){return Array.from({length:t*t},(a,r)=>({index:r,label:"",isEmpty:!0}))}function Ge(t){i($,t,!0),i(h,te(t),!0)}async function ke(){if(!e(L).trim())return;i(U,!0);const t=Y(Ue);i(ee,await ze(e(L),t),!0),i(U,!1)}function Re(t){i(B,t,!0),e(h)[t].isEmpty||ge(e(h)[t].label)}function je(t){if(e(B)===null){const l=e(h).findIndex(n=>n.isEmpty);if(l===-1)return;i(B,l,!0)}const a=Y(De);e(h)[e(B)]={index:e(B),pictogramId:t.id,pictogramUrl:a?t.urlBW:t.url,label:t.keyword,isEmpty:!1},ge(t.keyword);const r=e(h).findIndex((l,n)=>n>e(B)&&l.isEmpty);i(B,r>=0?r:null,!0)}function we(t){e(h)[t]={index:t,label:"",isEmpty:!0}}function Qe(t){i(F,t,!0),i(W,e(h)[t].label,!0)}function xe(){e(F)!==null&&(e(h)[e(F)].label=e(W),i(F,null))}async function Ve(){const t={name:e(K)||"Untitled",category:"custom",gridSize:e($),cells:[...e(h)],centerTitle:e(S),categoryColor:e(A),createdAt:new Date,updatedAt:new Date};await Tt(t),ge(u()("board.save")),await G()}async function G(){i(qe,await St(),!0)}function Xe(t){i(K,t.name,!0),i($,t.gridSize,!0),i(h,t.cells,!0),i(S,t.centerTitle||"",!0),i(A,t.categoryColor,!0),i(D,!1)}async function Ye(t){await At(t),await G()}function Ee(){window.print()}function Ze(){Ee()}const Je=[{name:"Home",titleKey:"Home",color:"#E67E22",keywords:["cook","wash","clean","sleep","eat","drink","sit","play","read","shower","dress","toilet","brush teeth","watch tv","rest","help"]},{name:"School",titleKey:"School",color:"#3498DB",keywords:["read","write","draw","sing","count","play","eat","drink","listen","speak","work","rest","gym","computer","friend","teacher"]},{name:"Food",titleKey:"Food",color:"#27AE60",keywords:["water","milk","juice","bread","apple","banana","rice","pasta","chicken","fish","egg","cheese","yogurt","cookie","ice cream","soup"]},{name:"Emotions",titleKey:"Emotions",color:"#9B59B6",keywords:["happy","sad","angry","scared","tired","hungry","thirsty","pain","love","surprise","calm","excited","worried","proud","shy","bored"]},{name:"Hygiene",titleKey:"Hygiene",color:"#1ABC9C",keywords:["shower","bath","brush teeth","wash hands","soap","towel","toilet","comb","deodorant","toothbrush","toothpaste","shampoo","mirror","nail","tissue","clean"]}];async function et(t){i($,4),i(K,t.name,!0),i(S,t.titleKey,!0),i(A,t.color,!0),i(h,te(4),!0);const a=Y(Ue);for(let r=0;r<Math.min(t.keywords.length,16);r++){const l=await ze(t.keywords[r],a);if(l.length>0){const n=Y(De);e(h)[r]={index:r,pictogramId:l[0].id,pictogramUrl:n?l[0].urlBW:l[0].url,label:l[0].keyword,isEmpty:!1}}}i(z,!1)}xt(()=>{G()});var ae=Vt(),re=o(ae),Be=o(re),se=o(Be),tt=o(se,!0);s(se);var le=c(se,2),oe=o(le),at=o(oe,!0);s(oe);var Ce=c(oe,2);Z(Ce),s(le);var ie=c(le,2),ce=o(ie),rt=o(ce,!0);s(ce);var $e=c(ce,2);Z($e),s(ie);var ne=c(ie,2),ve=o(ne),st=o(ve,!0);s(ve);var Se=c(ve,2);I(Se,21,()=>Oe,P,(t,a)=>{var r=It();let l;var n=o(r);s(r),k(()=>{l=he(r,1,"grid-option svelte-16y2cqy",null,l,{active:e($)===e(a)}),v(n,`${e(a)??""}Ã—${e(a)??""}`)}),_("click",r,()=>Ge(e(a))),m(t,r)}),s(Se),s(ne);var de=c(ne,2),ye=o(de),lt=o(ye,!0);s(ye);var Te=c(ye,2);I(Te,21,()=>We,P,(t,a)=>{var r=Pt();let l;k(()=>{l=he(r,1,"color-dot svelte-16y2cqy",null,l,{active:e(A)===e(a)}),O(r,`background: ${e(a)??""}`),E(r,"aria-label",e(a))}),_("click",r,()=>i(A,e(a),!0)),m(t,r)}),s(Te),s(de);var ue=c(de,2),be=o(ue),ot=o(be,!0);s(be);var Ae=c(be,2),H=o(Ae);Z(H);var R=c(H,2),it=o(R,!0);s(R),s(Ae),s(ue);var Ie=c(ue,2);{var ct=t=>{var a=Lt();I(a,21,()=>e(ee),P,(r,l)=>{var n=Kt(),b=o(n),p=c(b,2),g=o(p,!0);s(p),s(n),k(()=>{E(n,"title",e(l).keyword),E(b,"src",e(l).url),E(b,"alt",e(l).keyword),v(g,e(l).keyword)}),_("click",n,()=>je(e(l))),m(r,n)}),s(a),m(t,a)},nt=t=>{var a=Ut(),r=o(a,!0);s(a),k(l=>v(r,l),[()=>u()("board.no_results")]),m(t,a)};T(Ie,t=>{e(ee).length>0?t(ct):e(L)&&!e(U)&&t(nt,1)})}var pe=c(Ie,2),j=o(pe),vt=o(j);s(j);var Q=c(j,2),dt=o(Q);s(Q);var V=c(Q,2),yt=o(V);s(V);var X=c(V,2),ut=o(X);s(X);var _e=c(X,2),bt=o(_e);s(_e),s(pe);var Pe=c(pe,2);{var pt=t=>{var a=zt(),r=o(a),l=o(r,!0);s(r);var n=c(r,2);I(n,17,()=>Je,P,(b,p)=>{var g=Dt(),x=o(g),C=c(x);s(g),k(()=>{O(x,`background: ${e(p).color??""}`),v(C,` ${e(p).name??""}`)}),_("click",g,()=>et(e(p))),m(b,g)}),s(a),k(b=>v(l,b),[()=>u()("board.templates")]),m(t,a)};T(Pe,t=>{e(z)&&t(pt)})}var _t=c(Pe,2);{var mt=t=>{var a=Mt(),r=o(a),l=o(r,!0);s(r);var n=c(r,2);I(n,17,()=>e(qe),P,(b,p)=>{var g=Ft(),x=o(g),C=o(x),M=c(C);s(x);var N=c(x,2);s(g),k(()=>{O(C,`background: ${e(p).categoryColor??""}`),v(M,` ${e(p).name??""}`)}),_("click",x,()=>Xe(e(p))),_("click",N,()=>e(p).id&&Ye(e(p).id)),m(b,g)},b=>{var p=Ht();m(b,p)}),s(a),k(b=>v(l,b),[()=>u()("board.my_boards")]),m(t,a)};T(_t,t=>{e(D)&&t(mt)})}s(Be),s(re);var Ke=c(re,2),me=o(Ke),Le=o(me);{var ft=t=>{var a=Nt(),r=o(a),l=o(r,!0);s(r),s(a),k(()=>{O(a,`grid-column: span ${e($)??""};`),v(l,e(S))}),m(t,a)};T(Le,t=>{e(S)&&t(ft)})}var gt=c(Le,2);I(gt,17,()=>e(h),P,(t,a,r)=>{var l=Qt();let n;var b=o(l);{var p=y=>{var d=Ot();k(()=>{E(d,"src",e(a).pictogramUrl),E(d,"alt",e(a).label)}),m(y,d)};T(b,y=>{!e(a).isEmpty&&e(a).pictogramUrl&&y(p)})}var g=c(b,2);{var x=y=>{var d=Wt();Z(d),kt("blur",d,xe),_("keydown",d,w=>{w.key==="Enter"&&xe()}),J(d,()=>e(W),w=>i(W,w)),m(y,d)},C=y=>{var d=Gt(),w=o(d,!0);s(d),k(()=>v(w,e(a).label)),m(y,d)},M=y=>{var d=Rt();m(y,d)};T(g,y=>{e(F)===r?y(x):e(a).isEmpty?y(M,!1):y(C,1)})}var N=c(g,2);{var ht=y=>{var d=jt();k(w=>E(d,"aria-label",w),[()=>u()("board.clear_cell")]),_("click",d,w=>{w.stopPropagation(),we(r)}),_("keydown",d,w=>{(w.key==="Enter"||w.key===" ")&&(w.stopPropagation(),we(r))}),m(y,d)};T(N,y=>{e(a).isEmpty||y(ht)})}s(l),k(y=>{n=he(l,1,"board-cell svelte-16y2cqy",null,n,{selected:e(B)===r,empty:e(a).isEmpty}),E(l,"aria-label",y)},[()=>e(a).isEmpty?u()("board.tap_to_add"):e(a).label]),_("click",l,()=>Re(r)),_("dblclick",l,()=>!e(a).isEmpty&&Qe(r)),m(t,l)}),s(me),s(Ke),s(ae),k((t,a,r,l,n,b,p,g,x,C,M,N)=>{v(tt,t),v(at,a),v(rt,r),v(st,l),v(lt,n),v(ot,b),E(H,"placeholder",p),R.disabled=e(U),v(it,e(U)?"...":"ðŸ”"),v(vt,`ðŸ’¾ ${g??""}`),v(dt,`ðŸ–¨ï¸ ${x??""}`),v(yt,`ðŸ“· ${C??""}`),v(ut,`ðŸ“‹ ${M??""}`),v(bt,`ðŸ“‚ ${N??""}`),O(me,`--grid-size: ${e($)??""}; --board-color: ${e(A)??""}`)},[()=>u()("board.title"),()=>u()("board.board_name"),()=>u()("board.center_title"),()=>u()("board.grid_size"),()=>u()("board.category_color"),()=>u()("board.search_pictograms"),()=>u()("board.search_pictograms"),()=>u()("board.save"),()=>u()("board.print"),()=>u()("board.export_png"),()=>u()("board.templates"),()=>u()("board.my_boards")]),J(Ce,()=>e(K),t=>i(K,t)),J($e,()=>e(S),t=>i(S,t)),_("keydown",H,t=>{t.key==="Enter"&&ke()}),J(H,()=>e(L),t=>i(L,t)),_("click",R,ke),_("click",j,Ve),_("click",Q,Ee),_("click",V,Ze),_("click",X,()=>{i(z,!e(z)),i(D,!1)}),_("click",_e,()=>{i(D,!e(D)),i(z,!1),G()}),m(Fe,ae),Et(),Ne()}qt(["click","keydown","dblclick"]);export{ia as component};
