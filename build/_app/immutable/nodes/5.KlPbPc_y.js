import{d as Ke,a as R,b as y,s as b,f as S,e as Qe,t as ne}from"../chunks/5jrULABA.js";import{S as $e,T as B,U as et,W as k,X as tt,d as e,Y as p,_ as r,Z as m,a0 as a,a2 as at,a1 as Se}from"../chunks/Bu7XKhG-.js";import{i as q}from"../chunks/64S6HLbC.js";import{e as ee,i as te}from"../chunks/D91HFo5I.js";import{s as lt,t as rt,r as st,a as z}from"../chunks/tnJ21aC2.js";import{s as oe}from"../chunks/DvixMhaI.js";import{s as ie}from"../chunks/jfaHFQEH.js";import{b as nt}from"../chunks/BHAKTja7.js";import{s as ot,a as it}from"../chunks/Cvp8QKtV.js";import{g as ct}from"../chunks/BAFRKenw.js";var vt=S('<button class="activity-card svelte-lr4yb3"><span class="act-emoji svelte-lr4yb3"> </span> <span class="act-label svelte-lr4yb3"> </span></button>'),ut=S('<div class="activities-grid svelte-lr4yb3"></div>'),bt=S('<button><span class="pattern-name svelte-lr4yb3"> </span> <span class="pattern-timing svelte-lr4yb3"> </span></button>'),dt=S('<div class="pattern-selector svelte-lr4yb3"></div>'),_t=S('<button class="calm-btn svelte-lr4yb3"> </button>'),pt=S('<button class="calm-btn stop svelte-lr4yb3"> </button>'),mt=S('<div class="breath-area svelte-lr4yb3"><!> <div class="breath-circle svelte-lr4yb3"><span class="breath-text svelte-lr4yb3"> </span> <span class="breath-count svelte-lr4yb3"> </span></div> <!></div>'),ft=S('<div class="pressure-area svelte-lr4yb3"><p class="pressure-hint svelte-lr4yb3"> </p> <button class="pressure-circle svelte-lr4yb3"><span class="svelte-lr4yb3"> </span></button></div>'),ht=S('<span class="playing svelte-lr4yb3">â™ª</span>'),yt=S('<button><span class="sound-emoji svelte-lr4yb3"> </span> <span class="svelte-lr4yb3"> </span> <!></button>'),gt=S('<div class="sounds-area svelte-lr4yb3"><p class="svelte-lr4yb3"> </p> <div class="sound-grid svelte-lr4yb3"></div></div>'),xt=S('<button class="calm-btn svelte-lr4yb3"> </button>'),kt=S('<button class="calm-btn stop svelte-lr4yb3"> </button>'),St=S('<div class="colors-area svelte-lr4yb3"><!></div>'),Tt=S("<div></div>"),wt=S('<div class="grounding-area svelte-lr4yb3"><div class="ground-card svelte-lr4yb3"><span class="ground-sense svelte-lr4yb3"> </span> <h2 class="svelte-lr4yb3"> </h2> <span class="ground-count svelte-lr4yb3"> </span></div> <div class="ground-dots svelte-lr4yb3"></div> <button class="calm-btn svelte-lr4yb3"> </button> <button class="link-btn svelte-lr4yb3"> </button></div>'),At=S("<div></div>"),Rt=S('<div class="relax-area svelte-lr4yb3"><div class="relax-card svelte-lr4yb3"><span class="relax-emoji svelte-lr4yb3">ðŸ§˜</span> <h2 class="svelte-lr4yb3"> </h2> <p class="svelte-lr4yb3"> </p></div> <div class="ground-dots svelte-lr4yb3"></div> <button class="calm-btn svelte-lr4yb3"> </button> <button class="link-btn svelte-lr4yb3"> </button></div>'),Ct=S('<button class="emergency-btn svelte-lr4yb3"> </button>'),jt=S('<div class="stress-area svelte-lr4yb3"><h2 class="svelte-lr4yb3"> </h2> <div class="stress-emoji svelte-lr4yb3"> </div> <input type="range" min="1" max="10" step="1" class="stress-slider svelte-lr4yb3"/> <div class="stress-labels svelte-lr4yb3"><span class="svelte-lr4yb3"> </span> <span class="svelte-lr4yb3"> </span> <span class="svelte-lr4yb3"> </span></div> <p class="stress-advice svelte-lr4yb3"><!></p> <!></div>'),Bt=S('<div class="emergency-overlay svelte-lr4yb3" role="button" tabindex="-1"><div class="emergency-card svelte-lr4yb3" role="dialog" aria-modal="true" tabindex="-1"><h2 class="svelte-lr4yb3"> </h2> <p class="svelte-lr4yb3"> </p> <div class="emergency-actions svelte-lr4yb3"><button class="calm-btn svelte-lr4yb3"> </button> <button class="calm-btn svelte-lr4yb3" style="background: var(--border)"> </button></div></div></div>'),Dt=S('<div class="calm-page svelte-lr4yb3"><header class="app-header svelte-lr4yb3"><button class="back-btn svelte-lr4yb3"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" class="svelte-lr4yb3"><path d="M15 18l-6-6 6-6" class="svelte-lr4yb3"></path></svg></button> <h1 class="svelte-lr4yb3"> </h1></header> <!> <!> <footer class="credit svelte-lr4yb3">Pictograms: <a href="https://arasaac.org" target="_blank" rel="noopener" class="svelte-lr4yb3">ARASAAC</a> â€” CC BY-NC-SA 3.0</footer></div>');function zt(Te,we){$e(we,!0);const u=()=>it(rt,"$t",Ae),[Ae,Re]=ot();let E=B(null),U=B("inhale"),J=B(0),I=B(!1),W=null,ae=B(1);const fe=[{id:"4-7-8",label:"calm.pattern_478",inhale:4,hold:7,exhale:8},{id:"4-4-4",label:"calm.pattern_box",inhale:4,hold:4,exhale:4},{id:"3-0-6",label:"calm.pattern_simple",inhale:3,hold:0,exhale:6},{id:"5-0-5",label:"calm.pattern_calm",inhale:5,hold:0,exhale:5}];let Z=B(et(fe[0])),le=B(!1),H=B(80),L=B(null),f=null,X=[],F=B(3),Y=B(!1);const Ce={1:"ðŸ˜Š",2:"ðŸ™‚",3:"ðŸ˜",4:"ðŸ˜•",5:"ðŸ˜Ÿ",6:"ðŸ˜°",7:"ðŸ˜«",8:"ðŸ¤¯",9:"ðŸ˜­",10:"ðŸ’¥"};let ce=B(200),K=B(!1),Q=null,P=B(0);const M=[{sense:"ðŸ‘€",count:5,key:"calm.grounding.see"},{sense:"ðŸ‘‚",count:4,key:"calm.grounding.hear"},{sense:"âœ‹",count:3,key:"calm.grounding.touch"},{sense:"ðŸ‘ƒ",count:2,key:"calm.grounding.smell"},{sense:"ðŸ‘…",count:1,key:"calm.grounding.taste"}];let N=B(0);const $=["calm.relax.feet","calm.relax.legs","calm.relax.stomach","calm.relax.hands","calm.relax.arms","calm.relax.shoulders","calm.relax.face"],he=[{id:"breathing",emoji:"ðŸŒ¬ï¸",label:"calm.breathing",color:"#87CEEB"},{id:"pressure",emoji:"ðŸ«‚",label:"calm.pressure",color:"#DDA0DD"},{id:"sounds",emoji:"ðŸŽµ",label:"calm.sounds",color:"#98D8C8"},{id:"colors",emoji:"ðŸŒˆ",label:"calm.colors",color:"#FFD1DC"},{id:"grounding",emoji:"ðŸŒ",label:"calm.grounding_title",color:"#C3B1E1"},{id:"relaxation",emoji:"ðŸ§˜",label:"calm.relaxation",color:"#FFDAB9"},{id:"stress",emoji:"ðŸ“Š",label:"calm.stress_check",color:"#B0C4DE"}];function ve(s){je(),p(E,s,!0),s&&z(u()(he.find(t=>t.id===s).label))}function je(){p(I,!1),W&&clearTimeout(W),ue(),p(K,!1),Q&&clearInterval(Q)}function Be(){p(I,!0),ye()}function ye(){if(!e(I))return;const s=e(Z),t=(c,l)=>{if(p(J,c,!0),c<=0){l();return}W=setTimeout(()=>t(c-1,l),1e3)};p(U,"inhale"),p(ae,1.6),p(J,s.inhale,!0),z(u()("calm.breathe_in")),t(s.inhale,()=>{e(I)&&(s.hold>0?(p(U,"hold"),p(J,s.hold,!0),z(u()("calm.hold")),t(s.hold,()=>{e(I)&&n()})):n())});function n(){p(U,"exhale"),p(ae,1),p(J,s.exhale,!0),z(u()("calm.breathe_out")),t(s.exhale,()=>{e(I)&&ye()})}}function De(){p(I,!1),W&&clearTimeout(W),p(ae,1)}function Ee(){p(le,!0);const s=()=>{e(le)&&e(H)<250&&(p(H,e(H)+2),requestAnimationFrame(s))};s();try{navigator.vibrate?.(5e3)}catch{}}function ge(){p(le,!1),p(H,80);try{navigator.vibrate?.(0)}catch{}}function Ge(s){if(ue(),p(L,s,!0),f=new AudioContext,s==="whitenoise"){const t=f.sampleRate*5,n=f.createBuffer(1,t,f.sampleRate),c=n.getChannelData(0);for(let i=0;i<t;i++)c[i]=(Math.random()*2-1)*.15;const l=f.createBufferSource();l.buffer=n,l.loop=!0;const o=f.createGain();o.gain.value=.3,l.connect(o),o.connect(f.destination),l.start(),X=[{noise:l,gain:o}]}else if(s==="rain"){const t=f.sampleRate*5,n=f.createBuffer(1,t,f.sampleRate),c=n.getChannelData(0);let l=0;for(let v=0;v<t;v++){const d=Math.random()*2-1;c[v]=(l+.02*d)/1.02,l=c[v],c[v]*=3.5}const o=f.createBufferSource();o.buffer=n,o.loop=!0;const i=f.createGain();i.gain.value=.4,o.connect(i),i.connect(f.destination),o.start(),X=[{noise:o,gain:i}]}else if(s==="heartbeat"){const t=f.createOscillator(),n=f.createGain();t.type="sine",t.frequency.value=60,n.gain.value=0,t.connect(n),n.connect(f.destination),t.start();const c=()=>{if(e(L)!=="heartbeat"||!f)return;const l=f.currentTime;n.gain.setValueAtTime(0,l),n.gain.linearRampToValueAtTime(.4,l+.05),n.gain.exponentialRampToValueAtTime(.01,l+.15),n.gain.setValueAtTime(0,l+.3),n.gain.linearRampToValueAtTime(.3,l+.35),n.gain.exponentialRampToValueAtTime(.01,l+.45),setTimeout(c,800)};c(),X=[{osc:t,gain:n}]}else if(s==="ocean"){const t=f.sampleRate*5,n=f.createBuffer(1,t,f.sampleRate),c=n.getChannelData(0);for(let T=0;T<t;T++)c[T]=Math.random()*2-1;const l=f.createBufferSource();l.buffer=n,l.loop=!0;const o=f.createBiquadFilter();o.type="lowpass",o.frequency.value=500;const i=f.createOscillator();i.frequency.value=.1;const v=f.createGain();v.gain.value=300,i.connect(v),v.connect(o.frequency),i.start();const d=f.createGain();d.gain.value=.25,l.connect(o),o.connect(d),d.connect(f.destination),l.start(),X=[{noise:l,gain:d}]}}function ue(){p(L,null),X.forEach(s=>{try{s.osc?.stop()}catch{}try{s.noise?.stop()}catch{}}),X=[],f&&(f.close(),f=null)}function Ie(){p(K,!0),Q=setInterval(()=>{p(ce,(e(ce)+.5)%360)},50)}function Pe(){p(K,!1),Q&&clearInterval(Q)}function Ve(){e(P)<M.length-1&&(Se(P),z(u()(M[e(P)].key)))}function qe(){p(P,0)}function Fe(){e(N)<$.length-1&&(Se(N),z(u()($[e(N)])))}function Me(){p(N,0)}var re=Dt(),be=r(re),de=r(be),xe=m(de,2),Ne=r(xe,!0);a(xe),a(be);var ke=m(be,2);{var Oe=s=>{var t=ut();ee(t,21,()=>he,te,(n,c)=>{var l=vt(),o=r(l),i=r(o,!0);a(o);var v=m(o,2),d=r(v,!0);a(v),a(l),k(T=>{ie(l,`background: ${e(c).color??""}20; border-color: ${e(c).color??""}`),b(i,e(c).emoji),b(d,T)},[()=>u()(e(c).label)]),R("click",l,()=>ve(e(c).id)),y(n,l)}),a(t),y(s,t)},ze=s=>{var t=mt(),n=r(t);{var c=_=>{var g=dt();ee(g,21,()=>fe,te,(A,h)=>{var j=bt();let O;var V=r(j),_e=r(V,!0);a(V);var se=m(V,2),pe=r(se);a(se),a(j),k(x=>{O=oe(j,1,"pattern-btn svelte-lr4yb3",null,O,{active:e(Z).id===e(h).id}),b(_e,x),b(pe,`${e(h).inhale??""}-${e(h).hold??""}-${e(h).exhale??""}`)},[()=>u()(e(h).label)]),R("click",j,()=>{p(Z,e(h),!0)}),y(A,j)}),a(g),y(_,g)};q(n,_=>{e(I)||_(c)})}var l=m(n,2),o=r(l),i=r(o,!0);a(o);var v=m(o,2),d=r(v,!0);a(v),a(l);var T=m(l,2);{var w=_=>{var g=_t(),A=r(g,!0);a(g),k(h=>b(A,h),[()=>u()("calm.start")]),R("click",g,Be),y(_,g)},D=_=>{var g=pt(),A=r(g,!0);a(g),k(h=>b(A,h),[()=>u()("calm.stop")]),R("click",g,De),y(_,g)};q(T,_=>{e(I)?_(D,!1):_(w)})}a(t),k(_=>{ie(l,`transform: scale(${e(ae)??""}); transition: transform ${e(U)==="inhale"?e(Z).inhale+"s":e(U)==="exhale"?e(Z).exhale+"s":"0s"} ease-in-out`),b(i,_),b(d,e(J))},[()=>u()("calm."+e(U))]),y(s,t)},Ue=s=>{var t=ft(),n=r(t),c=r(n,!0);a(n);var l=m(n,2),o=r(l),i=r(o,!0);a(o),a(l),a(t),k(v=>{b(c,v),ie(l,`width: ${e(H)??""}px; height: ${e(H)??""}px`),b(i,e(le)?"ðŸ«‚":"ðŸ‘†")},[()=>u()("calm.hold_press")]),R("pointerdown",l,Ee),R("pointerup",l,ge),Qe("pointerleave",l,ge),y(s,t)},He=s=>{var t=gt(),n=r(t),c=r(n,!0);a(n);var l=m(n,2);ee(l,20,()=>[{id:"whitenoise",emoji:"ðŸ“»",label:"calm.sound.whitenoise"},{id:"rain",emoji:"ðŸŒ§ï¸",label:"calm.sound.rain"},{id:"heartbeat",emoji:"ðŸ’“",label:"calm.sound.heartbeat"},{id:"ocean",emoji:"ðŸŒŠ",label:"calm.sound.ocean"}],te,(o,i)=>{var v=yt();let d;var T=r(v),w=r(T,!0);a(T);var D=m(T,2),_=r(D,!0);a(D);var g=m(D,2);{var A=h=>{var j=ht();y(h,j)};q(g,h=>{e(L)===i.id&&h(A)})}a(v),k(h=>{d=oe(v,1,"sound-card svelte-lr4yb3",null,d,{active:e(L)===i.id}),b(w,i.emoji),b(_,h)},[()=>u()(i.label)]),R("click",v,()=>e(L)===i.id?ue():Ge(i.id)),y(o,v)}),a(l),a(t),k(o=>b(c,o),[()=>u()("calm.choose_sound")]),y(s,t)},Le=s=>{var t=St(),n=r(t);{var c=o=>{var i=xt(),v=r(i,!0);a(i),k(d=>b(v,d),[()=>u()("calm.start")]),R("click",i,Ie),y(o,i)},l=o=>{var i=kt(),v=r(i,!0);a(i),k(d=>b(v,d),[()=>u()("calm.stop")]),R("click",i,Pe),y(o,i)};q(n,o=>{e(K)?o(l,!1):o(c)})}a(t),y(s,t)},Xe=s=>{var t=wt(),n=r(t),c=r(n),l=r(c,!0);a(c);var o=m(c,2),i=r(o,!0);a(o);var v=m(o,2),d=r(v,!0);a(v),a(n);var T=m(n,2);ee(T,21,()=>M,te,(A,h,j)=>{var O=Tt();let V;k(()=>V=oe(O,1,"gdot svelte-lr4yb3",null,V,{active:j<=e(P)})),y(A,O)}),a(T);var w=m(T,2),D=r(w,!0);a(w);var _=m(w,2),g=r(_,!0);a(_),a(t),k((A,h,j)=>{b(l,M[e(P)].sense),b(i,A),b(d,M[e(P)].count),w.disabled=e(P)>=M.length-1,b(D,h),b(g,j)},[()=>u()(M[e(P)].key),()=>u()("calm.next"),()=>u()("calm.restart")]),R("click",w,Ve),R("click",_,qe),y(s,t)},Ye=s=>{var t=Rt(),n=r(t),c=m(r(n),2),l=r(c,!0);a(c);var o=m(c,2),i=r(o,!0);a(o),a(n);var v=m(n,2);ee(v,21,()=>$,te,(_,g,A)=>{var h=At();let j;k(()=>j=oe(h,1,"gdot svelte-lr4yb3",null,j,{active:A<=e(N)})),y(_,h)}),a(v);var d=m(v,2),T=r(d,!0);a(d);var w=m(d,2),D=r(w,!0);a(w),a(t),k((_,g,A,h)=>{b(l,_),b(i,g),d.disabled=e(N)>=$.length-1,b(T,A),b(D,h)},[()=>u()($[e(N)]),()=>u()("calm.relax_instruction"),()=>u()("calm.next"),()=>u()("calm.restart")]),R("click",d,Fe),R("click",w,Me),y(s,t)},Je=s=>{var t=jt(),n=r(t),c=r(n,!0);a(n);var l=m(n,2),o=r(l,!0);a(l);var i=m(l,2);st(i);var v=m(i,2),d=r(v),T=r(d,!0);a(d);var w=m(d,2),D=r(w,!0);a(w);var _=m(w,2),g=r(_,!0);a(_),a(v);var A=m(v,2),h=r(A);{var j=x=>{var C=ne();k(G=>b(C,G),[()=>u()("calm.advice_low")]),y(x,C)},O=x=>{var C=ne();k(G=>b(C,G),[()=>u()("calm.advice_medium")]),y(x,C)},V=x=>{var C=ne();k(G=>b(C,G),[()=>u()("calm.advice_high")]),y(x,C)},_e=x=>{var C=ne();k(G=>b(C,G),[()=>u()("calm.advice_critical")]),y(x,C)};q(h,x=>{e(F)<=3?x(j):e(F)<=5?x(O,1):e(F)<=7?x(V,2):x(_e,!1)})}a(A);var se=m(A,2);{var pe=x=>{var C=Ct(),G=r(C);a(C),k(me=>b(G,`ðŸ†˜ ${me??""}`),[()=>u()("calm.need_help_now")]),R("click",C,()=>{p(Y,!0),z(u()("calm.you_are_safe"))}),y(x,C)};q(se,x=>{e(F)>=7&&x(pe)})}a(t),k((x,C,G,me)=>{b(c,x),b(o,Ce[e(F)]||"ðŸ˜"),b(T,C),b(D,G),b(g,me)},[()=>u()("calm.how_stressed"),()=>u()("calm.stress_calm"),()=>u()("calm.stress_medium"),()=>u()("calm.stress_overload")]),nt(i,()=>e(F),x=>p(F,x)),y(s,t)};q(ke,s=>{e(E)?e(E)==="breathing"?s(ze,1):e(E)==="pressure"?s(Ue,2):e(E)==="sounds"?s(He,3):e(E)==="colors"?s(Le,4):e(E)==="grounding"?s(Xe,5):e(E)==="relaxation"?s(Ye,6):e(E)==="stress"&&s(Je,7):s(Oe)})}var We=m(ke,2);{var Ze=s=>{var t=Bt(),n=r(t),c=r(n),l=r(c);a(c);var o=m(c,2),i=r(o,!0);a(o);var v=m(o,2),d=r(v),T=r(d);a(d);var w=m(d,2),D=r(w,!0);a(w),a(v),a(n),a(t),k((_,g,A,h)=>{b(l,`ðŸ’™ ${_??""}`),b(i,g),b(T,`ðŸ« ${A??""}`),b(D,h)},[()=>u()("calm.you_are_safe"),()=>u()("calm.emergency_msg"),()=>u()("calm.breathing"),()=>u()("calm.im_ok")]),R("click",t,()=>{p(Y,!1)}),R("keydown",t,_=>{_.key==="Escape"&&p(Y,!1)}),R("click",n,_=>_.stopPropagation()),R("keydown",n,_=>_.stopPropagation()),R("click",d,()=>{p(Y,!1),ve("breathing")}),R("click",w,()=>{p(Y,!1)}),y(s,t)};q(We,s=>{e(Y)&&s(Ze)})}at(2),a(re),k((s,t)=>{ie(re,e(E)==="colors"&&e(K)?`background: hsl(${e(ce)}, 60%, 85%)`:""),lt(de,"aria-label",s),b(Ne,t)},[()=>u()("app.back"),()=>u()("calm.title")]),R("click",de,()=>e(E)?ve(null):ct("/")),y(Te,re),tt(),Re()}Ke(["click","pointerdown","pointerup","keydown"]);export{zt as component};
